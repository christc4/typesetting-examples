















                    TOPS-10 Software Installation Guide


|                        Electronically Distributed
|  
|  
|  
|            This guide provides the site administrator, system
|            manager, system programmer, or software specialist
|            with  the  information  required  to  install  the
|            TOPS-10  software  on  KL and KS processors.  This
|            guide supercedes the TOPS-10 Software Installation
|            Guide  published  in  October,  1988.   The  order
|            number for that guide, AA-P512C-TB, is obsolete.



             Operating System:             TOPS-10 Version 7.04

             Software:                       GALAXY Version 5.1










   digital equipment corporation                   maynard, massachusetts



|  TOPS-10 Update Tape No. 04, December 1990

   First Printing, February 1984
   Revised, April 1986
   Revised, October 1988
|  Revised, September 1990
|  Revised, December 1990



   The information in this document is subject to change  without  notice
   and  should  not  be  construed  as  a commitment by Digital Equipment
   Corporation.  Digital Equipment Corporation assumes no  responsibility
   for any errors that may appear in this document.

   The software described in this document is furnished under  a  license
   and  may  only  be used or copied in accordance with the terms of such
   license.

   No responsibility is assumed for the use or reliability of software or
   equipment that is not supplied by Digital Equipment Corporation or its
   affiliated companies.



|  Copyright C 1984, 1986, 1988, 1990 Digital Equipment Corporation

   All Rights Reserved.



   The following are trademarks of Digital Equipment Corporation:

   CI             DECtape     LA50             SITGO-10
   DDCMP          DECUS       LN01             TOPS-10
   DEC            DECwriter   LN03             TOPS-20
   DECmail        DELNI       MASSBUS          TOPS-20AN
   DECnet         DELUA       PDP              UNIBUS
   DECnet-VAX     HSC         PDP-11/24        UETP
   DECserver      HSC-50      PrintServer      VAX
   DECserver 100  KA10        PrintServer 40   VAX/VMS
   DECserver 200  KI          Q-bus            VT50
   DECsystem-10   KL10        ReGIS
   DECSYSTEM-20   KS10        RSX              d i g i t a l




                                      CONTENTS



   PREFACE


   PART 1: GETTING STARTED


   CHAPTER 1       INTRODUCTION

           1.1     READING PATH FOR NEW INSTALLATIONS . . . . . . . . 1-i
           1.2     READING PATH FOR EXISTING INSTALLATIONS  . . . . . 1-3
           1.3     SUPPLEMENTARY INFORMATION  . . . . . . . . . . . . 1-4


   CHAPTER 2       PREPARATION

           2.1     TOPS-10 SYSTEM INSTALLATION MATERIALS  . . . . . . 2-2
           2.2     KL FRONT-END INSTALLATION MATERIALS  . . . . . . . 2-3
           2.3     REQUIRED HARDWARE CONFIGURATIONS . . . . . . . . . 2-3
           2.3.1     KL Hardware  . . . . . . . . . . . . . . . . . . 2-4
           2.3.2     KS Hardware  . . . . . . . . . . . . . . . . . . 2-4
           2.4     POWERING UP THE SYSTEM . . . . . . . . . . . . . . 2-4
           2.4.1     Powering up the KL10 . . . . . . . . . . . . . . 2-5
           2.4.2     Powering up the KS10 . . . . . . . . . . . . . . 2-5
           2.5     PREPARING INFORMATION  . . . . . . . . . . . . . . 2-5
           2.5.1     Worksheet 1  . . . . . . . . . . . . . . . . . . 2-5
           2.5.2     Worksheet 2  . . . . . . . . . . . . . . . . . . 2-6
           2.5.3     Worksheet 3  . . . . . . . . . . . . . . . . . . 2-6


   PART 2: PREPARING THE SYSTEM


   CHAPTER 3       BOOTING THE SYSTEM

           3.1     BOOTING THE KL SYSTEM  . . . . . . . . . . . . . . 3-1
           3.1.1     Initializing the KL Front-End  . . . . . . . . . 3-3
           3.1.2     Booting the KL Monitor . . . . . . . . . . . . . 3-4
           3.2     BOOTING THE KS SYSTEM  . . . . . . . . . . . . . . 3-5


   CHAPTER 4       STARTING THE BOOTSTRAP MONITOR

           4.1     THE ONCE DIALOGUE  . . . . . . . . . . . . . . . . 4-1
           4.2     BRINGING UP A NEW SYSTEM . . . . . . . . . . . . . 4-3






                                    iii



   CHAPTER 5       BUILDING THE MONITOR FILE SYSTEM

           5.1     ALLOCATING DISK SPACE FOR THE KL FRONT-END . . . . 5-2
           5.2     RESTORING BACKUP FROM TAPE . . . . . . . . . . . . 5-3
           5.3     RESTORING FILES FROM TAPE TO DISK  . . . . . . . . 5-3
           5.3.1     Restoring the Bootstrap Monitor  . . . . . . . . 5-3
           5.3.2     Restoring the Monitor Sources and Associated 
                     Software . . . . . . . . . . . . . . . . . . . . 5-4
           5.4     CREATING THE TOPS-10 SYSTEM DIRECTORIES  . . . . . 5-5
           5.5     COPYING THE FILES INTO DIRECTORIES . . . . . . . . 5-6
           5.6     USING SYSTEM FILES . . . . . . . . . . . . . . . . 5-8


   CHAPTER 6       BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM

           6.1     BUILDING THE KL FRONT-END FILE SYSTEM  . . . . . . 6-1
           6.1.1     Loading the Front-End  . . . . . . . . . . . . . 6-2
           6.1.2     Booting the KL Front-End from Disk . . . . . . . 6-6
           6.2     CREATING THE KS MICROPROCESSOR FILE SYSTEM . . . . 6-7
           6.2.1     Creating A Front-End File System Directory Area  6-7
           6.2.2     Writing the Bootstrap Program to Disk  . . . . . 6-7


   PART 3: UPGRADING AN EXISTING SYSTEM


   CHAPTER 7       RESTORING THE DISTRIBUTION TAPES

           7.1     RESTORING KS MICROPROCESSOR FILES  . . . . . . . . 7-2
           7.2     RESTORING THE MONITOR SOURCES AND ASSOCIATED 
                   SOFTWARE . . . . . . . . . . . . . . . . . . . . . 7-3


   CHAPTER 8       RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM

           8.1     RESTORING THE DISTRIBUTED KL FRONT-END SOFTWARE  . 8-1
           8.2     USING RSXINS . . . . . . . . . . . . . . . . . . . 8-2
           8.2.1     The RSXINS Dialogue  . . . . . . . . . . . . . . 8-2
           8.2.2     Automatic Front-End File System Installation . . 8-7
           8.2.3     Automatic Front-End Reload . . . . . . . . . . . 8-8
           8.3     WRITING THE KS BOOTSTRAP PROGRAM TO DISK . . . . . 8-8


   PART 4: BUILDING THE MONITOR AND TAILORING THE SYSTEM


   CHAPTER 9       BUILDING YOUR MONITOR

           9.1     MONGEN . . . . . . . . . . . . . . . . . . . . . . 9-2
           9.1.1     Running MONGEN . . . . . . . . . . . . . . . . . 9-3
           9.1.2     The MONGEN Dialogue Questions  . . . . . . . . . 9-5
           9.1.2.1     Running SYSGEN   . . . . . . . . . . . . . . . 9-6


                                     iv



           9.1.2.2     Running FGEN . . . . . . . . . . . . . . . .  9-14
           9.2     ASSEMBLING THE MONITOR . . . . . . . . . . . . .  9-15
           9.3     LINKING AND SAVING THE MONITOR . . . . . . . . .  9-16
           9.3.1     Copying the New Monitor to SYS:  . . . . . . .  9-17
           9.4     BRINGING UP THE NEW MONITOR  . . . . . . . . . .  9-17
           9.5     CREATING THE SYSTEM BOOTABLE TAPE  . . . . . . .  9-19
           9.5.1     Creating the KL System Bootable Tape . . . . .  9-19
           9.5.2     Creating the KS System Bootable Tape . . . . .  9-19
           9.6     AUTOMATING THE BUILD PROCEDURE . . . . . . . . .  9-20
           9.6.1     Customizing the Build Files  . . . . . . . . .  9-22
           9.6.2     The Build Procedure  . . . . . . . . . . . . .  9-25
           9.7     CUSTOMIZING BOOT . . . . . . . . . . . . . . . .  9-26
           9.7.1     Customizing the KL BOOT  . . . . . . . . . . .  9-26
           9.7.2     Customizing the KS BOOT  . . . . . . . . . . .  9-28


   CHAPTER 10      STARTING UP AND TAILORING THE GALAXY SYSTEM

           10.1    STARTING THE GALAXY SPOOLERS . . . . . . . . . .  10-2
           10.2    TAILORING THE GALAXY SYSTEM  . . . . . . . . . .  10-2
           10.2.1    Running GALGEN . . . . . . . . . . . . . . . .  10-3
           10.2.2    Assembling the Tailored GALAXY System  . . . . 10-12
           10.3    SHUTTING DOWN THE GALAXY SYSTEM  . . . . . . . . 10-13
           10.4    STARTING THE GALAXY SYSTEM . . . . . . . . . . . 10-14


   CHAPTER 11      MAINTAINING THE SYSTEM AUTHORIZATION FILE

           11.1    CONVERTING OLD ACCOUNTING FILES  . . . . . . . .  11-1
           11.2    ENTERING AND EXITING REACT . . . . . . . . . . .  11-2
           11.3    GETTING HELP WHILE USING REACT . . . . . . . . .  11-2
           11.4    DISPLAYING USER ACCOUNT INFORMATION  . . . . . .  11-3
           11.5    CREATING NEW ACCOUNTS  . . . . . . . . . . . . .  11-4
           11.5.1    Creating Multiple Accounts with the Same 
                     Project Number . . . . . . . . . . . . . . . .  11-4
           11.5.2    Creating a Single New User Account . . . . . .  11-5
           11.6    CHANGING ACCOUNTS  . . . . . . . . . . . . . . .  11-7
           11.7    DELETING ACCOUNTS  . . . . . . . . . . . . . . .  11-8
           11.8    VERIFYING CHANGES TO ACCOUNTING FILES  . . . . .  11-9
           11.9    USING ACCOUNT VALIDATION . . . . . . . . . . . . 11-10
           11.9.1    CREATING THE PROJCT.ACT FILE . . . . . . . . . 11-11
           11.9.2    CREATING THE PROJCT.EXE FILE . . . . . . . . . 11-12
           11.10   MAINTAINING LOGIN FAILURE RECORDS  . . . . . . . 11-12
           11.11   TOP-LEVEL REACT COMMANDS . . . . . . . . . . . . 11-14
           11.12   USER-MODE COMMANDS . . . . . . . . . . . . . . . 11-16


   CHAPTER 12      CREATING SYSTEM INITIALIZATION FILES

           12.1    INITIA AT SYSTEM STARTUP . . . . . . . . . . . .  12-1
           12.1.1    The SYSJOB.INI File  . . . . . . . . . . . . .  12-2
           12.1.1.1    Format of SYSJOB.INI . . . . . . . . . . . .  12-3


                                     v



           12.1.2    The TTY.INI File . . . . . . . . . . . . . . .  12-5
           12.1.2.1    Format of TTY.INI  . . . . . . . . . . . . .  12-5
           12.1.2.2    Specifying Terminal Lines  . . . . . . . . .  12-6
           12.1.2.3    Specifying Terminal Options  . . . . . . . .  12-7
           12.1.2.4    Associated (Error) Messages  . . . . . . . . 12-11
           12.1.3    The INITIA Monitor Command . . . . . . . . . . 12-11


   PART 5: SUPPLEMENTARY INFORMATION


   APPENDIX A      ONCE STARTUP OPTIONS

           A.1     ONCE AT SYSTEM STARTUP . . . . . . . . . . . . . . A-2
           A.2     RUNNING ONCE IN USER MODE  . . . . . . . . . . . . A-6
           A.3     STARTUP OPTIONS AND SWITCHES . . . . . . . . . . . A-7
           A.3.1     CHANGing System Parameters . . . . . . . . . .  A-11
           A.3.2     DEFINing Structures and System Lists . . . . .  A-14
           A.3.3     DESTROYing All Structures  . . . . . . . . . .  A-20
           A.3.4     DISSOLving a Single Structure  . . . . . . . .  A-21
           A.3.5     EXITing to Monitor Level . . . . . . . . . . .  A-21
           A.3.6     GO Option  . . . . . . . . . . . . . . . . . .  A-22
           A.3.7     NOINITIA Option  . . . . . . . . . . . . . . .  A-22
           A.3.8     REFRESHing Selected Structures . . . . . . . .  A-23
           A.3.9     SHOWing System Parameters  . . . . . . . . . .  A-24


   APPENDIX B      MODIFYING THE MONITOR

           B.1     REBUILDING THE MONITOR LIBRARY FILE  . . . . . . . B-1
           B.2     CHANGING COMMON SYMBOLS  . . . . . . . . . . . . . B-2
           B.2.1     Symbols Defined in COMMON  . . . . . . . . . . . B-2
           B.2.1.1     Decimal Symbols,Values . . . . . . . . . . . . B-2
           B.2.1.2     Octal Symbols,Values . . . . . . . . . . . . . B-4
           B.2.1.3     SIXBIT Symbols,Values  . . . . . . . . . . . . B-5
           B.2.2     Symbols Defined in COMDEV  . . . . . . . . . . . B-5
           B.2.2.1     Decimal Symbols,Values . . . . . . . . . . . . B-5
           B.2.2.2     Octal Symbols,Values . . . . . . . . . . . . . B-6
           B.2.3     Symbols Defined in COMMOD  . . . . . . . . . . . B-7
           B.2.3.1     Decimal Symbols,Values . . . . . . . . . . . . B-7
           B.2.3.2     Octal Symbols,Values . . . . . . . . . . . . . B-7
           B.2.3.3     SIXBIT Symbols,Values  . . . . . . . . . . . . B-8


   APPENDIX C      SETTING SCHEDULER PARAMETERS

           C.1     REQUIRED PRIVILEGES  . . . . . . . . . . . . . . . C-1
           C.2     CAUTIONS . . . . . . . . . . . . . . . . . . . . . C-1
           C.3     SCDSET COMMANDS  . . . . . . . . . . . . . . . . . C-2
           C.3.1     EDIT . . . . . . . . . . . . . . . . . . . . . . C-2
           C.3.2     EXIT . . . . . . . . . . . . . . . . . . . . . . C-2
           C.3.3     HELP . . . . . . . . . . . . . . . . . . . . . . C-3


                                     vi



           C.3.4     READ/SET . . . . . . . . . . . . . . . . . . . . C-3
           C.3.5     UPDATE JOBS  . . . . . . . . . . . . . . . . . . C-5
           C.4     THE SCDMAP.SYS FILE  . . . . . . . . . . . . . . . C-6


   APPENDIX D      CREATING BOOTABLE FRONT-END MEDIA

           D.1     BUILDING THE PRIMARY BOOTABLE VOLUMES  . . . . . . D-1
           D.2     BUILDING THE THIRD VOLUME  . . . . . . . . . . . . D-4


                   GLOSSARY


   INDEX


   TABLES

           9-1     Monitor Build Files  . . . . . . . . . . . . . .  9-21
           11-1    FAILUR.LOG File Format . . . . . . . . . . . . . 11-13
           11-2    Top-level REACT Commands   . . . . . . . . . . . 11-14
           11-3    REACT Field Change Commands  . . . . . . . . . . 11-17
           12-1    Special Processing Commands  . . . . . . . . . .  12-8
           12-2    Options to Run Programs  . . . . . . . . . . . . 12-10
           C-1     SCDMAP.SYS Format  . . . . . . . . . . . . . . . . C-7

























































                                    viii















                                  PREFACE



   This manual describes how to install, upgrade,  customize,  and  start
   the  TOPS-10 operating system.  It includes procedures for loading the
   default monitor, copying the programs from the distribution  tapes  to
   disk,  building  the  monitor,  starting  the  operating  system,  and
   creating  the  bootstrap  tape.   The   procedures   for   installing,
   customizing,  and  starting  the  GALAXY batch and spooling system are
   also included, as well as descriptions of  the  various  system  files
   needed  for  timesharing  on  the  TOPS-10 system.  The procedures are
   described and explained in a step-by-step method.

       _______ ________ ____________  _____   The TOPS-10 Software Installation  Guide  may  also  be  used  in  the
   following situations to:

         o  Start the system after a shutdown or failure.

         o  Change the monitor configuration.

         o  Install a new version of the monitor or GALAXY subsystem.

         o  Change disk parameters.

   This manual is intended for experienced TOPS-10  software  maintainers
   who  are  familiar  with TOPS-10 conventions for commands and symbols.
   You should be able to operate the hardware components  of  the  system
   being  installed.   For  example,  instructions  for mounting software
   media (tapes and disks) are not  documented  in  this  manual  because
                                             _______ __________ _____   those  procedures  are  documented in the TOPS-10 Operator's Guide and
       _______________ __________ ________ ______ ___ ___________ ______   the TOPS-10/TOPS-20 Operator's Hardware Device and Maintenance Manual.
   The  following  manuals  are  also valuable sources of information for
   additional reference:

   _______________ _____ _________ ______   TOPS-10/TOPS-20 Batch Reference Manual

       This manual provides  information  about  writing  and  submitting
       batch control files to the GALAXY batch processor.



                                     ix



   _______ _________ ______ ________ ______   TOPS-10 Operating System Commands Manual

       This  manual  provides  information  about  monitor  commands  and
       conventions.

   _______ __________ _______ ________ _________ ______   TOPS-10 Operator's Command Language Reference Manual

       This  manual  provides  information  about  the  OPR  program  and
       operator-privileged commands.

   _______ _____ _________ ______   TOPS-10 MACRO Reference Manual

       This manual provides information required for  making  changes  to
       program source code.

   _______ ____ _________ ______   TOPS-10 LINK Reference Manual

       This manual provides information about TOPS-10's  linking  loader,
       its  switches, commands, and functions.  LINK is used to build the
       monitor after the software configuration has been specified.

   _______ _______ _____ ______   TOPS-10 Monitor Calls Manual

       This manual provides in-depth information about monitor calls  and
       monitor  symbols  that  you  may  wish  to  modify  in the monitor
       sources.

   _______________ _______ ______ _________ ______   TOPS-10/TOPS-20 RSX-20F System Reference Manual

       This manual provides information about the KL  system's  front-end
       processor.   Of particular importance are references to the KLINIT
       dialogue and the PARSER commands.

   __________ _____ ____ _____________   TOPS-10/20 USAGE File Specification

       This manual provides information about the formats  of  the  files
       created by the USAGE accounting system.

   _______ ______ ________ ____________ _____   TOPS-10 ANF-10 Software Installation Guide

       This manual provides information for building ANF-10 remote nodes.

   The procedures for installing a TOPS-10 system  vary  greatly  between
   the  first-time, new installation of a system, and the installation of
   a new version of the  monitor  on  a  system  that  has  been  running
   TOPS-10.   This manual is organized into separate parts to address the
   specific needs of each case.

   ____ _   Part 1, "Getting Started", is made up of two chapters that explain how
   to  use  the  manual.   Chapter 1 contains introductory material which
   will help you find the procedures that  apply  to  your  installation.
   Chapter  2  contains  worksheets  that  are  useful  when building the


                                     x



   TOPS-10 monitor.  DIGITAL Field Service personnel can  help  you  fill
   out  the hardware worksheet (Worksheet 1).  As system manager you must
   provide the information for the software worksheet (Worksheet  2)  and
   for  the  disk  parameters  worksheet  (Worksheet 3).  Questions about
   software  considerations  can  be  answered  by  a  DIGITAL   Software
   Specialist.

   ____ _   Part 2, "Preparing the System", is  made  up  of  four  chapters  that
   describe  the  procedures  TOPS-10  installers  must  complete  before
   building the monitor on a new installation.

   ____ _   Part 3, "Upgrading the System",  is  made  up  of  two  chapters  that
   describe  the  procedures  TOPS-10  installers  must  complete  before
   upgrading the monitor on an existing system.

   ____ _   Part 4, "Building the Monitor and Tailoring the System", is made up of
   four chapters that describe how to build your monitor and tailor it to
   the particular needs of your site.  This part applies to both upgrades
   and new installations.

   ____ _   Part 5, "Supplementary Information", is made  up  of  appendixes  that
   document  alternatives  to  the installation procedure and information
   for modifying the monitor software.

   A glossary is also included.  The  glossary  defines  the  specialized
   terms used in this manual.

   Prepare for the task of installing the monitor  carefully.   Read  the
   parts  of  this  manual that you are not familiar with, and be sure to
   set aside plenty of time to complete the installation.   If  you  have
   any  problems with the information in this manual, please fill out the
   Reader's Comment Card provided at the back of the book, and mail it to
   Digital  Equipment Corporation.  This is an important form of feedback
   for improving the quality of the documentation.


   CONVENTIONS

   The following conventions are used in this manual,  according  to  the
   definitions  given  here.   Terms  and  file  names are defined in the
   Glossary in Appendix E.

   Convention          Meaning

   ?                   is  used  as  a   wildcard   character   in   file
                       specifications.  Any character in the filespec may
                       be replaced by a ?, thereby causing the  reference
                       to  include  any  files  with the same characters;
                       except that any  character  will  be  accepted  in
                       place of the ?, or no character may replace the ?.
                       For example, the filespec:



                                     xi



                            DSKB:MAN???.RPT[27,5434]

                       is satisfied by all of the following:

                            DSKB:MANUAL.RPT[27,5434]
                            DSKB:MAN.RPT[27,5434]
                            DSKB:MANTM.RPT[27,5434]

   *                   is also used  as  a  wildcard  character  in  file
                       specifications, but it replaces an entire field of
                       the specification; that is, the  file  name,  file
                       extension,  project  number, programmer number, or
                       SFD name.  Wildcard characters are described  more
                                                        _______ _________                       thoroughly  in  Chapter 1 of the TOPS-10 Operating
                       ______ ________ ______                       System Commands Manual.

   <CTRL/x>            represents  a  control-character.   To   enter   a
                       control-character,  hold  down  the  CTRL  key and
                       press the character represented by x.

   <ESC>               represents places where you press the ESCape key.

   <RET>               represents places where you press the RETURN key.

   __________ ____   underlined text     represents user input.

   hh:mm:ss            represents time on a 24-hour  clock,  where  hh  =
                       hours, mm = minutes, ss = seconds.

   mmm-dd-yy           represent  a  date,  where mmm = month, dd =
   or dd-mmm-yy        day, yy = year.

   V#(##)              represent software version numbers.
   VA##-##
   VE##-##



















                                    xii
                                        















                          PART 1: GETTING STARTED




             This part is made up of two chapters which explain
             how  to  use  this  manual.   Chapter  1  contains
             introductory material which will help you find the
             procedures  that apply to the installation you are
             responsible for.  Chapter  2  contains  worksheets
             that are useful when building the TOPS-10 monitor.













                                 CHAPTER 1                                 CHAPTER 1

                                INTRODUCTION                                INTRODUCTION



   Before you install the system, read the cover letter distributed  with
   the  software  package,  and  the  BEWARE  file  (MONITR.BWR)  that is
   included on the Monitor/ANF-10 tape.  They contain  information  about
   last  minute  changes  to  installation  procedures  that could not be
   included in this manual.

   This manual uses the following conventions  to  denote  the  different
   procedures for KL and KS systems:

         o  Sections appropriate to only one type  of  processor  include
            the processor type in the title.

         o  Within sections, specific references are made in the text  to
            each type of processor.



   1.1  READING PATH FOR NEW INSTALLATIONS   1.1  READING PATH FOR NEW INSTALLATIONS

   The new system is assumed to have no  data  on  the  formatted  disks.
   Therefore,  you  must  initialize the system and the system files.  To
   install the new system, first read and follow all of the  instructions
   in  Part  1,  Chapters  1  and  2.   Then,  read and follow all of the
   instructions in each chapter of Part 2 that are  appropriate  for  the
   type  of processor (KL or KS) that you are installing.  Next, go on to
   Part 4 and follow the procedures necessary to build your  monitor  and
   tailor it to the needs of your particular site.  Below is a summary of
   the chapters in Parts 1, 2, and 4  that  are  appropriate  for  a  new
   installation.


   PART 1:  GETTING STARTED

   Chapter 1:  INTRODUCTION

        This chapter helps you find the  procedures  that  apply  to  the
        installation you are currently responsible for.


                                    1-1
                                INTRODUCTION                                INTRODUCTION


   Chapter 2:  PREPARATION

        Chapter 2 describes how to check the hardware to be sure that  it
        was  installed  properly  and is ready for software installation.
        It contains worksheets to help you prepare the  information  that
        you will need during installation.


   PART 2:  PREPARING THE SYSTEM

   Chapter 3:  BOOTING THE SYSTEM

        This chapter describes how to load  the  bootstrap  monitor  from
        tape and boot the system.  For KL systems, this chapter describes
        booting the front-end  processor  as  well.   With  this  initial
        system, you can build the TOPS-10 monitor.

   Chapter 4:  STARTING THE MONITOR

        This chapter describes the ONCE dialogue, and  describes  how  to
        start the bootstrap monitor on a new installation.

   Chapter 5:  BUILDING THE MONITOR FILE SYSTEM

        This chapter describes how to copy the  monitor  sources,  CUSPs,
        GALAXY system, and unbundled software from the distribution tapes
        into disk areas that you  prepare  for  this  purpose.   It  also
        describes  the  system's administrative control files and program
        initialization files.

   Chapter 6:  BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM

        This chapter describes how to copy the front-end  processor  (for
        KL  systems)  or  the  microprocessor  (for  KS systems) from the
        distribution media to disk, and how to boot  the  front-end  from
        disk with the new software.


   PART 4:  BUILDING THE MONITOR AND TAILORING THE SYSTEM

   Chapter 9:  BUILDING THE MONITOR

        This chapter describes how to tailor the  TOPS-10  monitor  using
        MONGEN.   MONGEN  is  used  to  create  new monitor configuration
        files.  You can assemble and load the new  software,  and  reload
        the system to start the new version of the monitor.

   Chapter 10:  STARTING AND TAILORING THE GALAXY SYSTEM

        This chapter describes how to start up the  GALAXY  spoolers  and
        servers,  how  to  tailor the GALAXY batch and spooling system to
        the particular needs of the installation, and how to assemble and


                                    1-2
                                INTRODUCTION                                INTRODUCTION


        load the new GALAXY system.

   Chapter 11:  MAINTAINING THE SYSTEM AUTHORIZATION FILES

        This chapter describes how to use the REACT program to create the
        system  accounting  files.   The  system accounting files specify
        PPNs and disk usage authorization for users.

   Chapter 12:  CREATING SYSTEM INITIALIZATION FILES

        This chapter describes the INITIA program, and how to use  INITIA
        to  start  up  TOPS-10  system  components automatically when the
        system is reloaded.



   1.2  READING PATH FOR EXISTING INSTALLATIONS   1.2  READING PATH FOR EXISTING INSTALLATIONS

   If you are installing a new version of the monitor on  a  system  that
   has  been  running  TOPS-10,  you  will probably use disks with system
   information on  them.   You  need  not  create  system  accounting  or
   initialization  files  and  you  will  not  need to boot the bootstrap
   monitor from tape.  However, it is necessary  to  restore  files  from
   tape exactly as documented in these procedures.

   Before building a new  monitor  for  the  existing  installation,  you
   should  save  the  existing monitor sources, CUSPs, GALAXY components,
   and (for KL systems) front-end file system on a backup disk  or  tape.
   This  will  allow  you  to  fall  back  to your old monitor if the new
   monitor is difficult to install or run.

   To install  the  new  monitor,  first  read  and  follow  all  of  the
   instructions  in  Part 1, Chapters 1 and 2.  Then, read and follow all
   of the instructions in each chapter of Part 3 that are appropriate for
   the type of processor (KL or KS) that you have.  Next, go on to Part 4
   and follow the procedures necessary to build your monitor  and  tailor
   it  to  the  needs of your particular site.  Below is a summary of the
   chapters in Parts 1, 3, and  4  that  are  appropriate  for  a  system
   upgrade.


   PART 1:  GETTING STARTED

   Chapter 1:  INTRODUCTION

        This chapter helps you find the  procedures  that  apply  to  the
        installation you are currently responsible for.

   Chapter 2:  PREPARATION

        Preparation for building the monitor is very important.   Chapter
        2  contains  worksheets  to help you prepare the information that


                                    1-3
                                INTRODUCTION                                INTRODUCTION


        you will need during installation.  Experienced  installers  will
        find the checklists and worksheets in this chapter useful.


   PART 3:  UPGRADING THE SYSTEM

   Chapter 7:  BUILDING THE MONITOR FILE SYSTEM

        This chapter describes how to restore  the  monitor,  CUSPs,  and
        unbundled  software  from the distribution tapes, and how to copy
        them into the appropriate disk areas.

   Chapter 8:  RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM

        This chapter describes how to build the front-end file system and
        reload  the  front-end  (KL  systems  only) and how to create the
        microprocessor file system (KS systems only).


   PART 4:  BUILDING THE MONITOR AND TAILORING THE SYSTEM

   Chapter 9:  BUILDING YOUR MONITOR

        This chapter describes how to tailor the  TOPS-10  monitor  using
        MONGEN.   MONGEN  is  used  to  create  new monitor configuration
        files.  You can assemble and load the new  software,  and  reload
        the system to start the new version of the monitor.

   Chapter 10:  STARTING AND TAILORING THE GALAXY SYSTEM

        This chapter describes how to start up the  GALAXY  spoolers  and
        servers,  how  to  tailor the GALAXY batch and spooling system to
        the particular needs of the installation, and how to assemble and
        load the new GALAXY system.

   Chapter 11:  MAINTAINING THE SYSTEM AUTHORIZATION FILES

        This chapter describes how to use the REACT program to create the
        system  accounting  files.   The  system accounting files specify
        PPNs and disk usage authorization for users.

   Chapter 12:  CREATING SYSTEM INITIALIZATION FILES

        This chapter describes the INITIA program, and how to use  INITIA
        to  start  up  TOPS-10  system  components automatically when the
        system is reloaded.



   1.3  SUPPLEMENTARY INFORMATION   1.3  SUPPLEMENTARY INFORMATION

   Supplementary information is provided in Part  5.   This  consists  of


                                    1-4
                                INTRODUCTION                                INTRODUCTION


   four  appendixes  and a glossary.  The appendixes contain alternatives
   to the installation procedure, information for modifying  the  monitor
   software.  The appendixes are summarized below:

   Appendix A:  ONCE STARTUP OPTIONS

        This appendix describes the options  to  the  ONCE  program  that
        define disk characteristics and start up the monitor.

   Appendix B:  MODIFYING THE MONITOR

        This appendix describes how to  modify  the  monitor,  build  the
        monitor  library file by hand, and generate a monitor that is not
        completely supported by Digital Equipment Corporation.   It  also
        contains  brief  descriptions  of  the  relevant  symbols, source
        modules, and symbol files.

   Appendix C:  SETTING SCHEDULER PARAMETERS

        This appendix explains how to  use  the  SCDSET  program  to  set
        system  usage  quotas,  adjust  scheduler  parameters, update the
        class of all logged in jobs, and manipulate a SCDMAP.SYS file.

   Appendix D:  CREATING BOOTABLE FRONT-END MEDIA

        This appendix describes the procedure for  making  the  front-end
        media bootable for RSX-20F.

   Glossary

        The glossary lists and defines the specialized terms used in this
        manual.






















                                    1-5

























































                                    2-1












                                 CHAPTER 2                                 CHAPTER 2

                                PREPARATION                                PREPARATION



   This chapter explains the steps and precautions  to  take  before  you
   install the monitor on a new system or upgrade your existing monitor.

   If  you  are  installing  a  new  system,  a  DIGITAL  Field   Service
   Representative will install the hardware components of your system and
   will run diagnostics to ensure that the hardware functions properly.

   The materials you need to install a new system or upgrade an  existing
   system are:

         o  A supported hardware configuration.  See Section 2.3.

            To ensure that you have the  hardware  information  that  you
            need  to  install  the  system,  prepare  Worksheet 1 in this
            chapter.  If you are installing a new  system,  the  hardware
            characteristics should be listed for you by the Field Service
            Representative.

         o  A disk unit with plenty of free space.

            At least 100,000  disk  blocks  are  required  for  a  system
            upgrade.   A  newly  formatted  disk  is  required  for a new
            installation.

         o  Software distribution media:  magnetic tapes,  DECtapes,  and
            floppy diskettes.

            Each type of processor requires software that is  distributed
            on  a  different  set  of media.  The distribution package is
            described in the following sections.

         o  A list of software components and options.

            Use Worksheet 2 in this chapter to record this information.

         o  A list of disk parameters and search lists.



                                    2-1
                                PREPARATION                                PREPARATION


            Use Worksheet 3 in this chapter to record this information.

         o  System accounting files to record user  accounts  and  access
            privileges.

            You can create  these  with  the  REACT  program.   REACT  is
            described in Chapter 11.

         o  A SYSJOB.INI file and/or OPR.ATO file to  use  for  automatic
            system startup.

            Chapter 12 explains how to  create  a  SYSJOB.INI  file.   An
            OPR.ATO  file  can  also  be  used, to automatically load and
            reload  a  communications  front-end  by  inclusion  of   the
            appropriate  commands.   For information on the OPR.ATO file,
                    _______ __________ _____            see the TOPS-10 Operator's Guide.



   2.1  TOPS-10 SYSTEM INSTALLATION MATERIALS   2.1  TOPS-10 SYSTEM INSTALLATION MATERIALS

   The following magnetic tapes are provided in the software distribution
   package:

         o  The TOPS-10 Monitor/ANF-10 Tape

            This magnetic tape contains the bundled  monitor  and  ANF-10
            software   for   TOPS-10.    The  tape  is  written  at  1600
            bits-per-inch  density  (BPI)  by  the  BACKUP  program.   It
            contains the following:

             -  Monitor source files

             -  MONITR.BWR file, which contains  information  about  last
                minute  changes to installation procedures that could not
                be included in this manual.

             -  ANF-10 network files

             -  DECnet-10 network files

         o  The TOPS-10 CUSP Tapes

            "CUSP" stands for "Commonly Used System Program".  A CUSP  is
            a  system  program  that provides important functions for the
            monitor  and  the  user.   These  tapes  contain  the  latest
            versions  of  all  of the TOPS-10 monitor CUSPs and the files
            for the GALAXY batch and  spooling  system.   The  tapes  are
            written  at  1600  BPI by the BACKUP program.  The first CUSP
            tape contains a file named CUSP.BWR, which describes  changes
            to the programs on the CUSP tape.



                                    2-2
                                PREPARATION                                PREPARATION


         o  The Customer-Supported Tape

            This tape contains files that are supported by  the  customer
            base, not by DIGITAL.  This tape is also written at 1600 BPI.
            It contains the following types of files:

             -  customer-supported CUSP files

             -  customer-supported monitor modules

         o  The Unsupported Tools Tape

            This tape  contains  files  that  can  be  used  for  various
            purposes,  as  supplied.  The tools are provided "as is", and
            are not supported.

         o  The Bootable Tape

            This tape contains the TOPS-10 bootstrap monitor and  related
            programs.   The  bootable  tape  is  provided to allow you to
            start a standard operating system used to build a  customized
            monitor.   The  tape  is  written  at  1600 BPI by the BACKUP
            program.

         o  Unbundled Software Tapes

            For each unbundled software product, magnetic tape(s) contain
            the  software  necessary for running the software.  Note that
            unbundled options may require installation instructions  that
            are  not included in this manual because the product contains
            its own installation manual.



   2.2  KL FRONT-END INSTALLATION MATERIALS   2.2  KL FRONT-END INSTALLATION MATERIALS

   The KL processor installation is also supplied with software  for  the
   RSX-20F front-end.  The front-end software is distributed on different
   types  of  media,  depending  upon  the  type  of  system.   A  KL10-D
   (DECsystem-1090)  front-end  requires  three  DECtapes,  labeled DT-A,
   DT-B, and DT-C.  A KL10-E (DECsystem-1091)  front-end  requires  three
   floppy diskettes, labeled FLP-A, FLP-B, and FLP-C.



   2.3  REQUIRED HARDWARE CONFIGURATIONS   2.3  REQUIRED HARDWARE CONFIGURATIONS

   The bootstrap monitor for TOPS-10 requires a minimal set of peripheral
   hardware.  The required configurations are different for the KL and KS
   systems, and are specified below.




                                    2-3
                                PREPARATION                                PREPARATION


   2.3.1  KL Hardware   2.3.1  KL Hardware

   For  a  KL  processor,  the  minimally   required   configuration   of
   peripherals for the boostrap monitor is:

         o  One RH20 for disk, dual-ported between the front-end  and  KL
            processor

         o  One RH20 for tape

         o  CTY (console terminal)



   2.3.2  KS Hardware   2.3.2  KS Hardware

   For  a  KS  processor,  the  minimally   required   configuration   of
   peripherals for the bootstrap monitor is:

         o  One RH11 (UBA#1) for disk

         o  One RH11 (UBA#3) for tape

         o  CTY (console terminal)

   If you are  installing  a  new  system  and  have  all  the  materials
   available  to  begin  installation,  you are now ready to power up the
   system; continue reading this chapter.  If you are  installing  a  new
   version of the monitor on an existing system, go to Section 2.5.



   2.4  POWERING UP THE SYSTEM   2.4  POWERING UP THE SYSTEM

   Before powering up the system, perform the following steps:

         o  For KL systems only, set the port controller select switch on
            the  disk  drive that is dual-ported between the KL10 and the
            front-end to the A/B position.

         o  Power up the disk drives.

         o  Power up the magnetic tape drives.

         o  Power up the line printers.

         o  Turn on the CTY(s).  Make sure each is loaded with paper  and
            is  on-line.   Check the terminal setting for line speed.  An
            LA36 terminal must be set to 300 baud.  For an LA120, ask the
            Field Service Representative what the baud rate should be.

   If a line printer, disk drive, or magtape drive  is  not  powered  up,


                                    2-4
                                PREPARATION                                PREPARATION


                      _______________   __________  ________  ______  ___   refer   to   the   TOPS-10/TOPS-20   Operator's  Hardware  Device  and
   ___________ ______   Maintenance Manual for powering-up procedures.



   2.4.1  Powering up the KL10   2.4.1  Powering up the KL10

   To power up the KL10, press the black  switch  on  the  upper  control
   panel  to  the  position labeled POWER ON.  When the system is powered
   up, the light labeled POWER is lit.  If you have never powered up  the
                                _______  __________  _____   system,   refer   to   the   TOPS-10  Operator's  Guide  for  detailed
   instructions.



   2.4.2  Powering up the KS10   2.4.2  Powering up the KS10

   To power up the KS10, press the button labeled POWER.  When the system
   is  powered  up, the light labeled POWER is lit.  This usually takes a
   few seconds.  15 seconds after the power light comes  on,  the  system
   will  try to load the microcode from the disk on drive 0.  The message
   BT AUTO will be printed on the CTY to indicate that this operation  is
   in  progress.   Because  the  microcode  is  not on the disk, repeated
   attempts to load the microcode will be unsuccessful and the  CTY  will
   continue  to  print BT AUTO every 15 seconds.  Enter CTRL/C on the CTY
   to stop the process of searching for the microcode on disk.  When  you
   enter  CTRL/C, the prompt KS10> will be printed on the CTY.  Chapter 3
   describes how to load microcode from tape.

   Now that you have powered up the system, you can boot it as  described
   in  Chapter  3.   But  first, prepare the information you will need by
   following the instructions in the next section.



   2.5  PREPARING INFORMATION   2.5  PREPARING INFORMATION

   It is important to prepare the information that you will  need  during
   installation.   Because this information is lengthy, and may come from
   several sources, worksheets are provided to  record  the  information.
   Use  the  completed worksheets as reference during installation and to
   keep a record of the characteristics of the system.



   2.5.1  Worksheet 1   2.5.1  Worksheet 1

   If you are installing a new system, a Field Service Representative can
   provide   you   with   the   information  for  Worksheet  1,  Hardware
   Configuration.




                                    2-5
                                PREPARATION                                PREPARATION


   2.5.2  Worksheet 2   2.5.2  Worksheet 2

   Use Worksheet 2 to record the software  configuration.   The  software
   configuration  is  largely  the  responsibility of the system manager.
   Information to make the necessary decisions is provided in this manual
   and   in  other  documents  in  the  TOPS-10  Software  Notebook  Set.
   Questions should be directed to a DIGITAL Software Specialist.



   2.5.3  Worksheet 3   2.5.3  Worksheet 3

   Use Worksheet 3 to record disk characteristics.  The disk system  must
   be  defined for the monitor.  This is accomplished when you select the
   DEFINE startup option for the ONCE dialogue (see Appendix A).







































                                    2-6
                                PREPARATION                                PREPARATION


                                Worksheet 1

                             ________ _________                             Hardware Worksheet


   System name (24 characters maximum): ______________________________

   CPU type (KL or KS): ______________

   Number of CPUs (KL only): _________


   ___ ______ _______   CPU Serial Numbers


        CPU0: ____________________

        CPU1: ____________________

        CPU2: ____________________


   Total amount of system memory (KS 512K): ___________

                                 (KL 768K): ___________

   Clock ticks (60,50): ___________


   ______ _______   System Devices 


   Answer YES or NO to the following questions.


   Does the system have any of the following:

        One or more CI-20 (SCA) subsystem interfaces? _____

        One or more NI-20 (Ethernet) subsystem interfaces? _____

        RP01/2/3 disks? _____

        Swapping drums? _____

        RS04/05 fixed-head disks? _____

        Any DX20/RP20 disk subsystems? _____

        CI-based disks (RA60/RA81)? _____




                                    2-7
                                PREPARATION                                PREPARATION


   Are any of the following kinds of magtape drives present:

        TM02/TM03 controller-based drives (TU45/TU77s)? _____

        DX10/TX01/TX02-based drives (TU70/71/72s)? _____

        DX20/TX02-based drives (TU70/71/72s)? _____

        TM78 controller-based (TU78/79s)? _____

        TM10B controller-based (TU40/41s)? _____

        TM10C controller-based (TU43)? _____


   Does the system have any of the following devices:

        Line printers connected to the I/O Bus? _____

        Line printers connected to the Console Front-End? _____

        XY10 I/O bus plotters? _____

        CR10 I/O bus card readers? _____

        CD20 CFE-based card readers? _____

        CP10/CP10D I/O bus card punches? _____

        Paper-tape punches? _____

        Paper-tape readers? _____


                                 __________                                 Front-Ends


   Will any front-ends be running: ANF-10?       _____

                                   DN60 IBMCOMM? _____

                                   DECnet-10?    _____

   How many terminal lines are there on CPU0?    _____

                                        CPU1?    _____

                                        CPU2?    _____

                                        CPU3?    _____

                                        CPU4?    _____


                                    2-8
                                PREPARATION                                PREPARATION


   TTY number for OPR (usually CTY)?             _____

   Which lines on your system are dataset lines? ________________

                                                 ________________

                                                 ________________

                                                 ________________













































                                    2-9
                                PREPARATION                                PREPARATION


                                Worksheet 2


                             ________ _________                             Software Worksheet


   Maximum number of jobs: _____________________

   Maximum amount of memory per job: _____________________

   Allow locking jobs? (Y or N): _____________________

   Minimum amount of memory for unlocked jobs: _____________________

   Number of real-time devices: _____________________

   Number of HPQs: ____________

   Number of PTYs: ____________


   _______ ________   Monitor Services


   Answer YES or NO to the following questions about user runtime
   accounting:

        Exclude monitor overhead? _____

        Use EBOX/MBOX clocks? (KL only) _____

        Include PI time? (KL only) _____

        Account verification? _____

        Include MSGSER? _____     PSISER?  _____

                IPCF?   _____     ENQ/DEQ? _____
















                                    2-10
                                PREPARATION                                PREPARATION


                                Worksheet 3


                         ____ __________ _________                         Disk Parameters Worksheet


   For each file structure, note the following:


   Structure Name (DSKB)  _______   _______   _______   _______   _______

   Units in Structure
   (RPA0, RPA1)           _______   _______   _______   _______   _______

   Consecutive blocks
   tried on output        _______   _______   _______   _______   _______

   Overdraw blocks
   allowed per user       _______   _______   _______   _______   _______

   Private structure?     _______   _______   _______   _______   _______

   Owner PPN              _______   _______   _______   _______   _______

   Amount of space
   for crash file         ______K   ______K   ______K   ______K   ______K

   Blocks per cluster     _______   _______   _______   _______   _______

   Bits per cluster count _______   _______   _______   _______   _______


   _____   Units 


   For each unit, note the following:


   Unit Name              _______   _______   _______   _______   _______

   Unit-id                _______   _______   _______   _______   _______

   SAT Blocks             _______   _______   _______   _______   _______

   SAT Blocks in Core     _______   _______   _______   _______   _______

   Swap Space             ______K   ______K   ______K   ______K   ______K







                                    2-11
                                        
























































                                    2-12
                                        















                        PART 2: PREPARING THE SYSTEM




             This  part  is  made  up  of  four  chapters  that
             describe  the  preparatory procedures that must be
             accomplished  before  building  the  monitor   and
             tailoring  the  system.   If  you are upgrading an
             existing system, you should go to Part 3,  Chapter
             7, now.













                                 CHAPTER 3                                 CHAPTER 3

                             BOOTING THE SYSTEM                             BOOTING THE SYSTEM



   This chapter describes how to load the bootstrap monitor from tape and
   how  to  boot  the  system.   The procedure for booting a KL system is
   described in Section 3.1.  The procedure for booting a  KS  system  is
   described in Section 3.2.



   3.1  BOOTING THE KL SYSTEM   3.1  BOOTING THE KL SYSTEM

   Before booting the KL system, you must mount the required media on the
   drives,  load  the  front-end,  initialize the front-end, and load the
   bootstrap monitor.  If you  are  unfamiliar  with  the  procedure  for
                                           __________ __________ ________   mounting  software  media, refer to the TOPS-10/20 Operator's Hardware
   ______ ___ ___________ ______   Device and Maintenance Manual for instructions on  mounting  DECtapes,
   floppy diskettes, disk packs, and magtapes.

   The monitor, supporting CUSPS, and unbundled software are  distributed
   on  magnetic  tape.  The front-end software is distributed on DECtapes
   or floppy  diskettes.   Perform  the  following  steps  to  mount  the
   distribution media and load the front-end:

   Step                             Explanation

   1. Mount distribution media

      For DECtapes:                 Mount the  DECtape  labeled  DT-A  on
                                    Drive  0.   Mount the DECtape labeled
                                    DT-B on Drive 1.

      For floppy diskettes:         Mount the floppy labeled FLP-A in the
                                    left-hand  drive  unit,  DX0:.  Mount
                                    the  floppy  labeled  FLP-B  in   the
                                    right-hand drive unit, DX1:.

      Magnetic tape:                Check to see if there is a write ring
                                    in  the  reel,  and  remove it before
                                    mounting the bootable tape  on  Drive
                                    0.

                                    3-1
                             BOOTING THE SYSTEM                             BOOTING THE SYSTEM


      Disk pack:                    You must also mount a disk pack  that
                                    the   system  can  access.   Mount  a
                                    properly formatted disk pack on RPmx,
                                    where   'm'   is   the   disk  unit's
                                    controller letter and 'x' is the unit
                                    number.     The    drive    must   be
                                    dual-ported between the front-end and
                                    the  KL processor.  The drive RPA0 is
                                    used throughout this manual.

|  2. Set data switches
|  
|     For DECtapes:
|  
|     Set the data switches on      To do this, raise the switches marked
|     the front-end control panel   0 and 1 on the switch register to the
|     to 000003.                    up position.  The data  switches  are
|                                   off when down, on when up.
|  
|     For floppy diskettes:
|  
|     Set the data switches on      To do this, raise the switches marked
|     the front-end control panel   0, 1, and 2 on the switch register to
|     to 000007.                    the up position.  The  data  switches
|                                   are off when down, on when up.
|  
|  3. Check control switches        The control switches to the right  of
|                                   the   data  switches  should  all  be
|                                   raised.   This  data  switch  setting
|                                   enables  the front-end to run the CPU
|                                   initialization dialogue (KLINIT)  for
|                                   loading and configuring CPU memory.
|  
|  4. Load front-end software
|  
|     Hold the ENABLE switch on,    When  you  press these  switches, the
|     press the SW/REG switch,      front-end  software  is  loaded  from
|     then release both.            DECtape or floppy.
|  
|     For DECtapes:                 [SY0: REDIRECTED TO DT0:]
|                                   [DT0: MOUNTED]
|  
|     For floppy diskettes:         RSX-20F VE##-## hh:mm mmm-dd-yy
|  
|                                   [SY0: REDIRECTED TO DX0:]
|                                   [DXO: MOUNTED]
|                                   [DX1: MOUNTED]







                                    3-2
                             BOOTING THE SYSTEM                             BOOTING THE SYSTEM


   3.1.1  Initializing the KL Front-End   3.1.1  Initializing the KL Front-End

   At the CTY, type the responses underlined in the dialogue shown  below
   and  press  RETURN after typing each response.  You cannot type ahead;
   you must wait for the system to respond after you press  RETURN.   The
   dialogue  shown  here  is  reproduced  from  a DECsystem-1091, KL10-E,
   system startup.  Note that the messages printed  by  the  system  will
   differ  slightly  for  DECsystem-1090, KL10-D, systems, but you should
   type the same answers to the questions,  regardless  of  the  type  of
   system you are installing.

|  The KL initialization dialogue  (KLINIT)  prompts  for  commands  with
|  KLI>.   Enter  the  responses  that  are  underlined  in the following
                                      _______________  _______  _________|  example dialogue.  Refer  to  the  TOPS-10/TOPS-20  RSX-20F  Reference
   ______|  Manual for a more thorough description of the KLINIT dialogue.
|  
|  If  you  are  using  floppy  diskettes,  the  KLINIT  dialogue  starts
|  automatically.   If you are using DECtapes, you must invoke the parser
|  to mount the second drive unit and to start KLINIT:
|  
        ______|       CTRL/\
            ___ ________|       PAR>MCR MOU<RET>
            ___ ____|       MOU>MOU DT1:
        ______|       CTRL/Z
|  
        ______|       CTRL/\
            ___ ________|       PAR>MCR KLI<RET>
|  
|  Now the KLINIT dialogue starts:
|  
        KLI -- VERSION VA##-## RUNNING
        KLI -- ENTER DIALOGUE [NO,YES,EXIT,BOOT]?
            ________        KLI>YES<RET>
        KLI -- KL10 S/N:  1042., MODEL B, 60 HERTZ
        KLI -- KL10 HARDWARE ENVIRONMENT:
                MCA25 CACHE PAGER
                MOS MASTER OSCILLATOR
                EXTENDED ADDRESSING
                INTERNAL CHANNELS
                CACHE

   The following question applies only to  installations  with  an  MCA25
   cache  pager.   If you have an MCA25 cache pager, answer this question
   with BOTH and press RETURN.

        KLI -- SELECT PAGE TABLE [FILE,BOTH,0,1]
            _________        KLI>BOTH<RET>
        KLI -- PAGE TABLE SELECTED:  BOTH
        KLI -- RELOAD MICROCODE [YES,VERIFY,FIX,NO]?
            ________        KLI>YES<RET>
        KLI -- MICROCODE VERSION ### LOADED
        KLI -- RECONFIGURE CACHE [FILE,ALL,YES,NO]?


                                    3-3
                             BOOTING THE SYSTEM                             BOOTING THE SYSTEM


            ________        KLI>ALL<RET>
        KLI -- ALL CACHES ENABLED
        KLI -- CONFIGURE KL MEMORY [FILE,ALL,REVERSE,FORCE,YES,NO]?
            ________        KLI>ALL<RET>

        LOGICAL MEMORY CONFIGURATION
        ADDRESS     SIZE     INT     TYPE     CONTROLLER
        000000000   768K      4      MF20         11

        KLI -- LOAD KL BOOTSTRAP [FILE,YES,NO,FILENAME]?
            ________        KLI>YES<RET>
        KLI -- WRITE CONFIGURATION FILE[YES,NO]?
            _______        KLI>NO<RET>
        KLI --BOOTSTRAP LOADED AND STARTED
        BOOT V#(##)

        BOOT>



   3.1.2  Booting the KL Monitor   3.1.2  Booting the KL Monitor

   At the BOOT> prompt, type the file specification of  the  monitor  you
   are loading, followed by a switch to specify the tape drive controller
   name,  and  press  RETURN.   The  file  specification   is   optional,
   defaulting to the following:

        DSKB:SYSTEM.EXE[1,4]/switch

   Where '/switch' identifies the tape controller  for  the  tape  drive.
   One of the following switches may be used:

   /TM02 or /TM03      for TU45 and TU77 tape drives.  For  drives  other
                       than Unit 0, specify /TM02:u or /TM03:u, where 'u'
                       is the unit number.


   /TM10               for TU10, TU40, and TU41 tape drives.


   /TX01 or /TX02      for  TU70,  TU71,  TU72  tape  drives  on  a  DX10
                       channel.


   /DX20               for TU70, TU71, or TU72 on a DX20 channel.


   /TM78:nx            for TU78/79 tape drives, where  'n'  is  a  single
                       digit  for  the TM78's MASSBUS unit number and 'x'
                       is a single digit for the slave unit number.

   When BOOT has located the  monitor  file  on  the  tape,  the  loading


                                    3-4
                             BOOTING THE SYSTEM                             BOOTING THE SYSTEM


   procedure begins.

        [Loading from DSKB:SYSTEM.EXE [1,4]]

   When the system begins running, the system name is printed on the CTY:

        KL10       dd-mmm-yy

   The ONCE  dialogue  starts  automatically  when  the  monitor  starts,
   allowing  you  to give the monitor the information it requires to run.
   Continue the installation procedure  with  Chapter  4,  "Starting  the
   Bootstrap Monitor".  If ONCE fails to start, repeat the procedure from
   Step 2 in Section 3.1.



   3.2  BOOTING THE KS SYSTEM   3.2  BOOTING THE KS SYSTEM

   Before booting the KS system, you must mount the required media on the
   drives.   The  monitor,  supporting  CUSPS, and unbundled software are
   distributed  on  magnetic  tape.   If  you  are  unfamiliar  with  the
                                                       _______ __________   procedure for mounting software media, refer to the TOPS-10 Operator's
   _____   Guide for instructions on mounting disk packs and magtapes.

   First, you will mount the bootable tape.  Check to see if there  is  a
   write  ring in the reel.  If present, remove it and mount the bootable
   tape on tape drive 0.  You may use a drive  other  than  MTA0.   Next,
   mount a formatted disk pack on disk drive 0.

   Start the bootstrapping procedure by typing MT to the KS10> prompt  on
   the CTY.  The system responds by printing the BOOT> prompt on the CTY.

             _______        KS10>MT<RET>
        KS10>USR MOD

        BOOT V#(##)

        BOOT>

   At the BOOT> prompt, type the  file  specification  of  the  bootstrap
   monitor  and  a  switch that specifies the tape drive controller, then
   press RETURN.  The file specification is optional, defaulting  to  the
   following:

        DSKB:SYSTEM.EXE[1,4]/switch

   where '/switch' identifies the controller for  the  tape  drive.   The
   following switches may be used:

        /TM02 or /TM03 for TU45 and TU77 tape drives.

   When BOOT has located the  monitor  file  on  the  tape,  the  loading


                                    3-5
                             BOOTING THE SYSTEM                             BOOTING THE SYSTEM


   procedure begins.

        [Loading from DSKB:SYSTEM.EXE [1,4]]

   When the system begins running, the system name is printed on the CTY:

        KS10       dd-mmm-yy

   The ONCE  dialogue  starts  automatically  when  the  monitor  starts,
   allowing  you  to give the monitor the information it requires to run.
   Continue the installation procedure  with  Chapter  4,  "Starting  the
   Bootstrap Monitor".  If ONCE fails to start, repeat the procedure from
   Section 3.2.









































                                    3-6












                                 CHAPTER 4                                 CHAPTER 4

                       STARTING THE BOOTSTRAP MONITOR                       STARTING THE BOOTSTRAP MONITOR



   This chapter describes how to start up  the  bootstrap  monitor  using
   standard  and  default  settings.   The  ONCE  program  always runs at
   monitor startup and offers several options to the way it can run.  For
   complete  information  about  ONCE, refer to Appendix A.  This chapter
   contains only the information  and  procedures  needed  to  start  the
   bootstrap monitor on a new installation using default disk parameters.

   ONCE allows the user to:

         o  Keep a record of the reason for starting or reloading the
            system.

         o  Provide the date and time for the monitor.

         o  Define, change, and show structure and unit parameters.

         o  Define, change, and show the system lists -- the system
            search list, the active swapping list, and the system dump
            list.

         o  Start the monitor.



   4.1  THE ONCE DIALOGUE   4.1  THE ONCE DIALOGUE

   ONCE begins by printing, on the CTY, the system name and the date that
   the  monitor was created.  The system name can be changed when you run
   the MONGEN dialogue described in Chapter 9.  After printing the system
   name  and  date,  ONCE  scans memory to be sure that it is accessible.
   Each monitor is built for a specific amount of memory.  When you build
   your  monitor  using  MONGEN,  you  will  specify the amount of memory
   needed for your installation.  Since you are installing a new  system,
   you  may  receive  the  following message, indicating that the default
   monitor was built to expect more memory than that which  is  currently
   on-line:



                                    4-1
                       STARTING THE BOOTSTRAP MONITOR                       STARTING THE BOOTSTRAP MONITOR


      %Memory from xxxxxx to yyyyyy is off-line
      Set memory (DOWN,OFFLIN,ONLINE) [OFFLIN]:

   For a new installation, you should type DOWN and press  RETURN.   ONCE
   then asks:

      Why reload:

   This question is asked whenever  the  system  is  reloaded.   For  the
   purpose  of  installing  a new system, you should answer this question
   with NEW, and press RETURN.

   If you press RETURN without typing an answer, ONCE prints  a  list  of
   the possible responses and their meanings.  If you type HELP and press
   RETURN, you will be provided with a list of the possible responses and
   a  more  detailed  explanation  of  each.   These  are also listed and
   described in Appendix A, Section A.1.

   ONCE then asks for the date by printing:

      Date:

   Enter the date in one of the following forms:

      MMM-DD-YY
   or
      DD-MMM-YY

   Where MMM is replaced by  the  name  of  the  month  (JANUARY  through
   DECEMBER)  abbreviated to the first three characters of the month name
   (JAN through DEC), DD is the numerical day of the  month  (01  through
   31) and YY is the year in a two digit year designation.  Both the year
   and the hyphens are optional.  After you  enter  the  date  and  press
   RETURN, ONCE asks for the time:

      Time:

   Enter the time in one of the following forms:

      HH:MM:SS
   or
      HHMMSS

   Where HH is replaced by the hour, based on  a  24-hour  clock,  MM  is
   replaced  by  the  minutes  past  the  hour, and SS is replaced by the
   seconds past the hour, with  optional  colons  separating  the  hours,
   minutes, and seconds.  Enter the time and press RETURN.

   It is very important that you respond with the correct date and  time.
   If  you  do  not,  users' files may be written with the wrong creation
   dates, resulting in confusion and errors.  If you enter the wrong date
   or  time,  you  may  correct  the  error later by selecting the CHANGE


                                    4-2
                       STARTING THE BOOTSTRAP MONITOR                       STARTING THE BOOTSTRAP MONITOR


   startup option followed by  the  DATE  keyword.   The  CHANGE  startup
   option is described in Appendix A.

   After this initial dialogue, ONCE prompts you for a startup option  by
   printing:

      Startup option:

   If you type HELP and press return, ONCE lists the startup options  and
   switches  and a brief explanation of each.  This chapter describes how
   to start the monitor quickly using default values.  If you  prefer  to
   define   file   structures  to  suit  the  particular  needs  of  your
   installation, refer to Appendix A now for more information.



   4.2  BRINGING UP A NEW SYSTEM   4.2  BRINGING UP A NEW SYSTEM

   To start the new installation quickly, follow the procedures  in  this
   section.   The  DEFINE  option  provides reasonable default values for
   most disk parameters, allowing you to create file structures that  are
   usable  by  the  monitor  and to construct system lists from the units
   that are on line.

   To DEFINE structure and unit parameters to  suit  the  needs  of  your
   particular   installation  now,  refer  to  Appendix  A  for  complete
   information about the DEFINE startup option.

                                    NOTE

           If your disk units contain  unknown  information,  you
           may find the DESTROY option useful.  Refer to Appendix
           A for complete information about the  DESTROY  startup
           option.

   So far, you have provided a reason for the reload (NEW), have set  the
   date  (in the format MMM-DD-YY or DD-MMM-YY) and have set the time (in
   the format HH:MM:SS or HHMMSS).  Now, you are prompted for  a  startup
   option:

      Startup option:

   Enter DEFINE and press RETURN.

                     ___________      Startup option:DEFINE<RET>
                                  ___________      Define (ASL,SDL,SSL,STRUCT):STRUCT<RET>

      In the following dialogue, all numbers are decimal unless otherwise
      indicated.   Values  within parentheses are options.  Values within
      square brackets are defaults which will be substituted if RETURN is
      pressed.



                                    4-3
                       STARTING THE BOOTSTRAP MONITOR                       STARTING THE BOOTSTRAP MONITOR


      Any question preceded with  an  asterisk  indicates  changing  that
      parameter will require the structure to be refreshed.


                                 *** Note ***
      HOME blocks will be initialized immediately after all units in  the
      structure have been entered.

   It is advisable that you define at least one  structure  to  be  DSKB.
   All  examples  in  this manual use DSKB as the area to which files are
   copied.

                          _________      Structure to define:DSKB<RET>

                                    _________      Disk drive for logical unit 0:RPA0<RET>
                                    _____      Disk drive for logical unit 1:<RET>
                                                       _______      Do you want to see the bad regions (NO,YES) [NO]:NO<RET>

      [HOME blocks initialized on RPA0]

   In the following  section,  default  values  are  enclosed  in  square
   brackets.   Default  values  are  calculated  by ONCE according to the
   structure type.  Accept the default value by pressing RETURN.

      Parameters for structure DSKB
                                              _____        *Blocks per cluster (3 - 262143) [10]:<RET>
                                         _____         Private structure (NO,YES) [NO]:<RET>
                                        _____         Owner PPN (NONE,[p,pn]) [NONE]:<RET>
                                        _____         Disk-set (1-36,ALL,NONE) [ALL]:<RET>
                                                     _____        *Number of K for CRASH.EXE (0 - 4096) [1536]:<RET>
                                                                 _____         Blocks allowed for overdraw per user (0 - 307800) [500]:<RET>
                                                                  _____         Consecutive blocks tried for on output 90 - 262143) [30]:<RET>
                                              _____        *Bits per cluster count (0 - 18) [12]:<RET>
                                                               ________         Make this the only structure in the SSL (NO,YES) [NO]:YES<RET>
                                                               ________         Make this the only structure in the SDL (NO,YES) [NO]:YES<RET>

   In the following section,  specify  a  unit  identification  or  press
   return  to  accept the default value.  The unit identification resides
   in the HOME blocks on the disk unit, for unique identification of  the
   disk pack.  Therefore, it must be a unique number.  The unit-id may be
   a combination of numbers and letters,  and  can  have  as  many  as  6
   characters.   You might find it useful to use the pack's serial number
   for part of the unit-id.

      Parameters for unit RPA0
                         _____         Unit ID [DSKB0]:<RET>
                                          _____        *SAT blocks per unit (8 - 81) [8]:<RET>
                                        _____         SAT blocks in core (1 - 8) [8]:<RET>
                                          _________        *K for swapping (0 - 4807) [1000]:4807<RET>
                                                                    _____        *First logical block for swapping (33090 - 269332) [134672]:<RET>
                                    _____         Swapping class (0 - 1) [0]:<RET>
                                                          ________         Make this the only unit in the ASL (NO,YES) [NO]:YES<RET>


                                    4-4
                       STARTING THE BOOTSTRAP MONITOR                       STARTING THE BOOTSTRAP MONITOR


   % Structure DSKB must be refreshed before it can be used.

   Enter another structure to define or press  RETURN  and  you  will  be
   prompted for another startup option.

                          _____      Structure to define:<RET>
      [Rebuilding the system search list from the HOM blocks]

      [Rebuilding the active swapping list from the HOM blocks]

      [Rebuilding the system dump list from the HOM blocks]

      Startup option:

   After a structure is defined, it must be refreshed.  Enter REFRESH and
   press RETURN:

                      ____________      Startup option: REFRESH<RET>
      Needs refreshing: DSKB
                            _________      Structure to refresh: DSKB<RET>
      [Updated HOM blocks on unit RPA0]
      [Structure DSKB refreshed]
                           _____      Structure to refresh:<RET>
      [Rebuilding the system search list from the HOM blocks]

      [Rebuilding the active swapping list from the HOM blocks]

      [Rebuilding the system dump list from the HOM blocks]

      Startup option:

   To start the monitor now, enter NOINITIA and press RETURN:

                     _____________      Startup option:NOINITIA<RET>

      [Rebuilding the system search list from the HOM blocks]

      [Rebuilding the active swapping list from the HOM blocks]

      [Rebuilding the system dump list from the HOM blocks]

      To automatically log in under [1,2] type "LOGIN"

      KL10 Thursday 23-Jun-88 14:53:34

      .

      __________      LOGIN<RET>

      .




                                    4-5

























































                                    5-1












                                 CHAPTER 5                                 CHAPTER 5

                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM



   Before you can build your monitor you  must  build  the  monitor  file
   system.  To do this, you will:

         o  Restore files from  the  bootable  tape,  which  you  mounted
            before running ONCE.

         o  Restore files from the Monitor/ANF-10  tape,  which  contains
            the sources for the monitor and ANF-10.

         o  Restore files from the CUSP, or Commonly Used System  Program
            tape.  The files for the GALAXY batch and spooling system are
            included on this tape.

   This chapter also explains how to restore  files  from  the  unbundled
   software  tape,  the customer-supported tape, and the TOOLS tape.  All
   procedures apply to both KL and KS systems unless otherwise  noted  in
   the section title.

   Before you can restore files from the bootable tape, you must assign a
   name  to  the tape.  You mounted this tape when you booted the system,
   before running ONCE.  The tape drive is identified to the monitor  for
   your  job  using  the following monitor command.  On the CTY, type the
   following:

         ______ _____ __________        .ASSIGN MTA0: TAPE:<RET>

   The system responds with:

        MTA0 assigned

   This command assigns the name TAPE to the  tape  unit  MTA0.   If  the
   bootable  tape  is on a different tape drive, use the correct physical
   device name.

   Next, if you are installing a KL system, Section 5.1 will show you how
   to  restore  the  file  that is used to allocate space on disk for the
   front-end file system.


                                    5-1
                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM


   Then, for both KL and KS systems, Section 5.2 will  show  you  how  to
   restore  the  BACKUP program, which will be used to copy the bootstrap
   monitor from tape to disk.  If you are installing a  KS  system,  skip
   Section 5.1 and go directly to Section 5.2.



   5.1  ALLOCATING DISK SPACE FOR THE KL FRONT-END   5.1  ALLOCATING DISK SPACE FOR THE KL FRONT-END

   This section describes how to restore a file that is used to  allocate
   space for the front-end file system.  On the CTY, type the following:

         ______ __________        .REWIND TAPE:<RET>
         ___ ________________        .GET TAPE:FEFILE<RET>

   The system will respond with:

        Job setup
        .

   Now that the FEFILE job is set up, you will allocate space on  a  disk
   unit  for  the front-end file system.  At the . prompt, type START and
   press RETURN:

         __________        .START<RET>

   The system will respond with:

        DISK UNIT NAME:

   Enter a disk unit  name  and  press  RETURN.   The  following  example
   assumes that the front-end file system will be stored on the disk unit
   RPA0.  You may specify any physical disk unit for RPA0, but  the  disk
   must  be  dual-ported between the front-end and the KL, and must be an
   RP06 drive type.

                       __________        DISK UNIT NAME:RPA0:<RET>

   The system will respond with:

                                                              _____        SIZE OF FILE IN BLOCKS (<CRLF> GIVES DEFAULT OF 2000):<RET>

   Press RETURN to accept the default file size.  There may  be  a  delay
   before  the front-end completes this operation.  When the operation is
   complete, the system will respond with:

        [2008 DATA BLOCKS ALLOCATED TO FE.SYS]
        [FE.SYS AREA STARTS AT LOGICAL BLOCK 2301.]
        [FRONT END FILE CREATED, HOM BLOCKS WRITTEN]

   Next, you will restore the BACKUP program.



                                    5-2
                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM


   5.2  RESTORING BACKUP FROM TAPE   5.2  RESTORING BACKUP FROM TAPE

   This section shows you how to restore the BACKUP  program.   You  will
   use  BACKUP  to  copy  the  bootstrap monitor from tape to disk and to
   restore  the  files  from  the   Monitor/ANF-10   tape,   CUSP   tape,
   customer-supported  tape,  any unbundled software tapes, and the TOOLS
   tape.

   The following example shows how to  restore,  save,  and  run  BACKUP.
   Enter the commands that are underscored in the example:

         ___ ________________        .GET TAPE:BACKUP<RET>
        Job setup
         ____ ___________        .SAVE BACKUP<RET>
        BACKUP saved
         ___ ___________        .RUN BACKUP<RET>
        /

   The / sign is the BACKUP prompt, indicating that BACKUP is running and
   is  ready  to  accept  BACKUP  commands.   Next  you  will restore the
   bootstrap monitor.  When that  is  completed,  you  will  restore  the
   monitor  sources  and  associated  software.   The  BACKUP  program is
                    _______ __________ _____   discussed in the TOPS-10 Operator's Guide.  This manual shows only the
   commands  you  need  to type to restore the monitor and its supporting
   software.



   5.3  RESTORING FILES FROM TAPE TO DISK   5.3  RESTORING FILES FROM TAPE TO DISK

   The examples in this manual use DSKB as the  structure  to  which  the
   files will be copied, and the area [10,7] for the directory area.  The
   BACKUP program recognizes the ersatz device name  DEC  as  SSL:[10,7],
   therefore  the  procedures  in  this manual use the device name DEC to
   represent DSKB:[10,7].  The area [1,4] is reserved for  ersatz  device
   SYS,  from  which  system programs are run.  Do not substitute another
   directory area for [1,4].  The  procedures  in  this  manual  use  the
   device name SYS to represent DSKB:[1,4].



   5.3.1  Restoring the Bootstrap Monitor   5.3.1  Restoring the Bootstrap Monitor

   Now, you will restore the bootstrap monitor from  the  bootable  tape.
   For KL systems, type the following commands after the / prompt:

         ____ __________        /TAPE TAPE:<RET>
         _________ ___________        /SUPERSEDE ALWAYS<RET>
         _______ _____________        /RESTORE SYS:=*.*<RET>
        "DONE
        /



                                    5-3
                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM


   For KS systems, type the following commands:

         ____ __________        /TAPE TAPE:<RET>
         _________ ___________        /SUPERSEDE ALWAYS<RET>
         ________________        /INTERCHANGE<RET>
         _______ _____________        /RESTORE SYS:=*.*<RET>
        "DONE
         _______ _____________        /RESTORE DEC:=*.*<RET>
        "DONE

   Unload the bootable tape.  To do this, for both  KL  and  KS  systems,
   type the following command:

         ______ __________        /UNLOAD TAPE:<RET>
        [MTA0:  Read(C/H/S) = 7202000/0/0]

   This command rewinds the tape and unloads it.  Remove  the  tape  from
   the drive.

   The next section describes how to use BACKUP to restore the files from
   the  Monitor/ANF-10  tape, from any unbundled software tapes, from the
   CUSP tape, the customer-supported tape, and the TOOLS tape.



   5.3.2  Restoring the Monitor Sources and Associated Software   5.3.2  Restoring the Monitor Sources and Associated Software

   To copy the files from tape to disk, you must mount,  restore,  unload
   and  dismount  each  tape.   You  may  restore the tapes in any order,
   unless otherwise noted in the cover letter included with the  specific
   tape.

   Repeat the procedure below for each distribution tape,  starting  with
   the Monitor/ANF-10 tape.

        1.  Mount the distribution tape.

        2.  Type the following commands to restore the files:

             ____ __________            /TAPE TAPE:<RET>
             ___________            /REWIND<RET>
             _________ ___________            /SUPERSEDE ALWAYS<RET>
             __________ ________            /PROTECTION 155<RET>
             ______ ________            /SSNAME ALL<RET>
             _______ __________            /RESTORE DSKB:<RET>
            !10,7 DSKB
            "DONE
             ______ __________            /UNLOAD TAPE:<RET>
            [MTA0:  Read(C/H/S) = 7752000/0/0]

        3.  Dismount the tape.



                                    5-4
                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM


   After the files are on disk, exit  from  BACKUP  by  typing  EXIT  and
   pressing RETURN.  Now you can create the TOPS-10 disk file system.  To
   do this,  you  will  create  the  system  directories  then  copy  the
   appropriate files into each directory.



   5.4  CREATING THE TOPS-10 SYSTEM DIRECTORIES   5.4  CREATING THE TOPS-10 SYSTEM DIRECTORIES

   The TOPS-10 monitor requires certain disk directories  from  which  it
   can  access  support  programs  and  CUSPs.   You  will  create  these
   directories on disk, then copy the files from the DSKB:[10,7] area  to
   those  directories.  The monitor recognizes the ersatz device name DEC
   as DSKB:[10,7].  Therefore,  the  device  name  DEC  is  used  in  the
   following procedures.

   The program that creates directories is CREDIR.  The CREDIR program is
                    _______ ____ _________ ______   described in the TOPS-10 User Utilities Manual.  Only the commands you
   need to complete this procedure are demonstrated below.

   In the following procedure, the ersatz device names recognized by  the
   monitor  are  used  to  create the appropriate directories for storing
   monitor files.  Each ersatz device name results in  a  directory  area
   with  the  standard PPN that the monitor reserves for that purpose.  A
   directory for the specified PPN will be created on each file structure
   in the system search list, unless you specify otherwise.

   The ersatz device names used in this manual are defined as follows:

        PPN       Name      Use

        [10,7]    DEC:      DEC-supplied software

        [1,4]     SYS:      System library

        [2,5]     HLP:      HELP files

        [5,14]    DOC:      DOC files

        [5,11]    REL:      REL files

        [5,17]    UNV:      MACRO universal files

        [1,7]     ACT:      Accounting daemon files (ACTDAE)

        [5,35]    UPS:      Files maintained by MX mail listener

   Use the following commands to create the  ersatz  device  directories.
   The  directory  areas  will  be  created on each file structure in the
   system search list.  CREDIR will report on each directory  it  creates
   on  each  file  structure.   In  this  example,  DSKB is the only file
   structure in the system search  list.   Type  the  commands  that  are


                                    5-5
                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM


   underscored in the following examples:

         ___ _____________________________        .RUN DSKB:[10,7,CREDIR]CREDIR<RET>

   CREDIR will prompt you for the directory name you wish to create:

                         _________        Create directory:HLP:<RET>
           Created DSKB0:[2,5].UFD/PROTECTION:775

   Repeat for each directory name:

                         _________        Create directory:DOC:<RET>
           Created DSKB0:[5,14].UFD/PROTECTION:775

                         _________        Create directory:REL:<RET>
           Created DSKB0:[5,11].UFD/PROTECTION:775

                         _________        Create directory:UNV:<RET>
           Created DSKB0:[5,17].UFD/PROTECTION:775

                         _________        Create directory:ACT:<RET>
           Created DSKB0:[1,7].UFD/PROTECTION:775

                         _________        Create directory:UPS:<RET>
           Created DSKB0:[5,35].UFD/PROTECTION:775

   To exit from CREDIR, type CTRL/C:

                         ________        Create directory:<CTRL/C>

        .



   5.5  COPYING THE FILES INTO DIRECTORIES   5.5  COPYING THE FILES INTO DIRECTORIES

   This section shows you how  to  copy  the  files  from  DEC  into  the
   appropriate  directories.   You will copy the files to the appropriate
   areas from DEC, using the NFT (Network File Transfer) program.  NFT is
                    _______ ____ _________ ______   described in the TOPS-10 User Utilities Manual.

   The NFT prompt is an *.  To run NFT, type the following command:

         ___ _______________________        .RUN DSKB:[10,7,NFT]NFT<RET>
        *

   To copy files you only need to use the COPY command  as  shown  below.
   Use  the  COPY  command to copy the files into their appropriate areas
   from DEC:

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.EXE<RET>



                                    5-6
                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM


         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.RAM<RET>

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.VFU<RET>

         ____ _____________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]DDT.REL<RET>

         ____ ________________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]JOBDAT.REL<RET>

         ____ ________________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]OVRLAY.REL<RET>

         ____ ______________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]TECO.ERR<RET>

         ____ ___________________________________________________        *COPY HLP:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.HLP<RET>

         ____ ___________________________________________________        *COPY DOC:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.DOC<RET>

         ____ ___________________________________________________        *COPY REL:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.REL<RET>

         ____ ___________________________________________________        *COPY UNV:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.UNV<RET>

         ____ ________________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]SYSTEM.CMD<RET>

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.SYS<RET>

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.INI<RET>

   For KL systems, also copy the following files as shown:

         ____ _____________________________________________________        *COPY REL:/PROTECTION:055=DSKB:[10,7,MON,KL]TOPS10.REL<RET>

         ____ ________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]DXMCA.ADX<RET>

         ____ _______________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]DXMPA.A8<RET>

         ____ ________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]DXMCD.ADX<RET>

         ____ _________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]KNICOD.BIN<RET>

         ____ ________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]FEUIC.TXT<RET>

   For KS systems, copy the following file as shown:

         ____ _________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]SMFILE.EXE<RET>

   To exit from NFT, type EXIT and press RETURN:

         _________        *EXIT<RET>
        .

   If you have not yet read the beware files, read them now.  To find out
   what .BWR files are available, type the following:



                                    5-7
                      BUILDING THE MONITOR FILE SYSTEM                      BUILDING THE MONITOR FILE SYSTEM


         ___ _______________________________        .DIR DSKB:[10,7,*,*,*,*,*]*.BWR<RET>

   You can display the files on your terminal using the TYPE command.  Be
   sure to read all the files listed by the DIR command.



   5.6  USING SYSTEM FILES   5.6  USING SYSTEM FILES

   The SYS area includes several sample system files.  The  monitor  uses
   these  to  create  user  accounts  and  to initialize system programs.
   After you complete the procedures in Chapter 9 you  can  tailor  these
   files to your installation.

         o  ACTDAE.SYS

            This is the system's accounting file.  It records  the  PPNs,
            passwords,  access information, and disk quotas for users and
            operators.  Without the ACTDAE.SYS file,  no  one  (users  or
            operators)  can  log in.  Chapter 11 describes how to use the
            REACT program to maintain this file.

         o  SYSJOB.INI

            This file automatically starts system  jobs.   SYSJOB.INI  is
            described in Chapter 12.

         o  SYSTEM.CMD

            This file can be read by OPR to automatically start batch and
            spooling processes for GALAXY (refer to Chapter 10).

         o  TTY.INI

            INITIA reads this  file  and  initializes  the  CTY  and  TTY
            STOMPER functions.  TTY.INI is described in Chapter 12.

   Next, if you are installing a KL system,  you  will  create  the  file
   system for the front-end.  If you are installing a KS system, you will
   create the file system for the microprocessor.   Chapter  6  describes
   these procedures.













                                    5-8












                                 CHAPTER 6                                 CHAPTER 6

             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM



   The KL and KS processors are each supported by another processor.  The
   KL  processor uses a PDP-11 front-end for I/O, which requires space on
   disk for its software.  The KS system uses an 8080 microprocessor that
   also  requires  disk  space  for  storage.   This chapter explains the
   procedure for creating these disk file systems.  If you are installing
   a KL system, continue reading with Section 6.1.  If you are installing
   a KS system, go directly to Section 6.2.



   6.1  BUILDING THE KL FRONT-END FILE SYSTEM   6.1  BUILDING THE KL FRONT-END FILE SYSTEM

   To build the front-end file system, you must load the  front-end  from
   the  front-end  media, which you mounted according to the instructions
   in Chapter  3.   The  front-end  software  is  distributed  on  either
   DECtapes  or floppy diskettes.  The commands that you will type to the
   RSX-20F command language processor, the PARSER,  differ  primarily  in
   the  physical device names used.  The examples used to illustrate your
   communication with  the  PARSER,  if  not  specifically  separated  by
   appropriate  headings,  apply  to  both DECtapes and floppies.  In all
   examples, the commands that you will type are underscored.

   The following procedures assume that the front-end file system will be
   stored  on  DSKB, mounted on RPA0.  In fact, you can use any structure
   by replacing DB0 in the commands with  DBn,  where  'n'  is  the  unit
   number  in RPxn.  Make sure that the disk unit is write-enabled and is
   dual-ported between the front-end and the KL.

   KL systems may have  more  than  one  CPU  by  implementing  Symmetric
   Multi-Processing  (SMP).   In  a  multiple-CPU  system, each CPU has a
   front-end, and each front-end requires its own file  system.   If  you
   are  installing  an  SMP  system, you must follow the steps in Section
   6.1.1 and 6.1.2 for each CPU, at each CTY.

   For DECtapes:

   First, check to make sure that the DECtapes are mounted correctly.


                                    6-1
             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


   The DECtape labelled DT-A should be mounted on DECtape drive 0,  DT0:,
   and the unit selector switch should be set to 0.  The DECtape labelled
   DT-B should be mounted on DECtape drive 1, DT1:, and the unit selector
   switch  should  be  set  to  1.   On  both  DT0:   and  DT1:,  set the
   LOCAL/REMOTE switch to REMOTE  and  the  READ/WRITE  switch  to  WRITE
   ENABLE.

   For floppies:

   First, check to make sure the floppy diskettes are mounted correctly.

   The floppy diskette labelled FLP-A should be mounted in the  left-hand
   floppy  drive  DX0:,  and the floppy diskette labelled FLP-B should be
   mounted in the right-hand floppy drive DX1:.



   6.1.1  Loading the Front-End   6.1.1  Loading the Front-End

   Invoke the PARSER by typing CTRL/\  (control-backslash)  on  the  CTY.
   This control character is not echoed, but the PARSER responds with the
   prompt PAR>, indicating that it is ready to accept commands.

                                    NOTE

           If you make an error at any time during your  dialogue
           with  the PARSER, type CTRL/Z followed by CTRL/\.  The
           PARSER prompt will be printed, and you can retype  the
           command.

           If you are loading  RSX-20F  from  DECtape,  allow  at
           least 45 minutes to copy the files.

   Type the SET CONSOLE MAINTENANCE and RESET commands to ensure that the
   KL is not running.

        ________        <CTRL/\>
            ___ _______ ________________        PAR>SET CONSOLE MAINTENANCE<RET>
        CONSOLE MODE:  MAINTENANCE
            __________        PAR>RESET<RET>

        PAR#

   Set the data switches on the front-end control panel to  000003,  with
   the first two switches (0 and 1) raised and the rest off.

   Hold the ENABLE switch on and, at the  same  time,  press  the  SW/REG
   switch.   The  front-end will print its software name and date and the
   location of the front-end software.

   For DECtapes:                      For floppies:



                                    6-2
             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


   RSX-20F VA##-## hh:mm dd-mmm-yy    RSX-20F VE##-## hh:mm dd-mmm-yy

   [SY0:  REDIRECTED TO DT0:]         [SY0:  REDIRECTED TO DX0:]
   [DT0:  MOUNTED]                    [DX0:  MOUNTED]
   [DT1:  MOUNTED]                    [DX1:  MOUNTED]

   Initialize the front-end by running the INIalization program.   First,
   invoke the parser by typing CTRL/\, and type the following commands:

        ________        <CTRL/\>

            ___ ________        PAR#MCR INI<RET>
            _________        INI>DB0:<RET>

   The INI program does not prompt when initialization is complete.  When
   initialization  is  complete,  the  lights  on  the  drive  panel stop
   flashing.  Wait 30 seconds, then type CTRL/\ to invoke the parser.

        ________        <CTRL/\>
        PAR#

   Mount the disk unit on which the front-end file  system  will  reside.
   Run the MOUnt program by typing the following commands:

            ___ ________        PAR#MCR MOU<RET>
            _________        MOU>DB0:<RET>

        MOU -- MOUNT COMPLETED
            ________        MOU><CTRL/Z>

   Create the front-end file system directory.  Run the  UFD  program  by
   typing the following commands:

        ________        <CTRL/\>

            ___ ________        PAR#MCR UFD<RET>
            ______________        UFD>DB0:[5,5]<RET>

   The UFD program does not prompt the CTY when it is finished.  When the
   lights  on  the  front panel stop flashing, the operation is complete.
   Wait 30 seconds, then type CTRL/\ to invoke the parser.

        ________        <CTRL/\>
        PAR#

   If you are loading the front-end from  DECtapes,  you  will  copy  the
   *.TSK files into directories before copying the rest of the files.  If
   you are loading the front-end from floppies, you will copy all of  the
   files  now.   Run  the  PIP  program to copy the files from DECtape or
   floppy to disk.  Exit from PIP by typing CTRL/Z.  Type  the  following
   commands:



                                    6-3
             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


        For DECtapes:                      For floppies:

        ________                           ________        <CTRL/\>                           <CTRL/\>

            ___ ________                       ___ ________        PAR#MCR PIP<RET>                   PAR#MCR PIP<RET>
            ________________________           ___________________        PIP>DB0:=DT0:F11ACP.TSK<RET>       PIP>DB0:=DX0:,DX1:<RET>
            ________________________        PIP>DB0:=DT0:PARSER.TSK<RET>
            _____________________        PIP>DB0:=DT1:PIP.TSK<RET>

            ________                           ________        PIP><CTRL/Z>                       PIP><CTRL/Z>

   Redirect the system.  Run the REDirect program to redirect the  system
   search area (SY0:) from DECtape or floppy to disk.  Type the following
   commands:

        ________        <CTRL/\>

            ___ ________        PAR#MCR RED<RET>
            ______________        RED>DB0:=SY0:<RET>

   The REDirect program does not prompt the  CTY  when  it  is  finished.
   When  the  lights  on  the front panel stop flashing, the operation is
   complete.  Wait 30 seconds, then type CTRL/\ to invoke the parser.

        ________        <CTRL/\>
        PAR#

   If you are loading the front-end from DECtape, you will copy the  rest
   of  the  files from DECtape to disk.  This may take 25 minutes or more
   to complete.  When this has been completed, list the directory of  all
   the  files  in  SY0:   and  exit  from  PIP.   If  you are loading the
   front-end from floppies, you have already copied the  files  and  only
   need to list the directory.  Type the following commands:

        For DECtapes:                      For floppies:

            ___ ________                       ___ ________        PAR#MCR PIP<RET>                   PAR#MCR PIP<RET>

            ___________________                ____________        PIP>DB0:=DT0:,DT1:<RET>            PIP>DB0:/LI<RET>
            ____________                       ________        PIP>DB0:/LI<RET>                   PIP><CTRL/Z>
            ________        PIP><CTRL/Z>

   Write front-end monitor to SY0:.  Run the SAVe program  to  write  the
   front-end  monitor  to SY0:.  It is already defined as DB0:[5,5].  The
   DECtapes or floppies and disk are logically dismounted  automatically.
   PIP  will  print  warning messages about the files that already exist,
   but you may ignore these messages.  Type the following commands:

        For DECtapes:                      For floppies:

        ________                           ________        <CTRL/\>                           <CTRL/\>



                                    6-4
             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


            ___ _______ _____________          ___ _______ _____________        PAR#SET CONSOLE OPERATOR<RET>      PAR#SET CONSOLE OPERATOR<RET>
            ___ ________                       ___ ________        PAR#MCR SAV<RET>                   PAR#MCR SAV<RET>
            ____________                       ____________        SAV>SY0:/WB<RET>                   SAV>SY0:/WB<RET>

        [DB0:  DISMOUNTED]                 [DB0:  DISMOUNTED]
        [DT0:  DISMOUNTED]                 [DX0:  DISMOUNTED]
        [DT1:  DISMOUNTED]                 [DX1:  DISMOUNTED]

   For DECtapes:

   Remove the DECtapes from  drives  0  and  1,  and  mount  the  DECtape
   labelled DT-C on drive DT0:.

   For floppies:

   Remove the floppies from DX0:  and DX1:  and mount the floppy labelled
   FLP-C in drive DX0:.

   Type the following commands:

        For DECtapes:                      For floppies:

        ________                           ________        <CTRL/\>                           <CTRL/\>

            ___ ________                       ___ ________        PAR#MCR MOU<RET>                   PAR#MCR MOU<RET>
            _________                          _________        MOU>DT0:<RET>                      MOU>DX0:<RET>

        MOU -- MOUNT COMPLETE              MOU -- MOUNT COMPLETE
            ________                           ________        MOU><CTRL/Z>                       MOU><CTRL/Z>

   Copy the files to disk.  Run PIP to copy  the  files  from  the  third
   DECtape  or  floppy  to  disk  and list the directory of files on DB0.
   Then, exit from PIP, dismount the DECtape or  floppy  and  remove  the
   media from the drive.  Type the following commands:

        For DECtapes:                      For floppies:

        ________                           ________        <CTRL/\>                           <CTRL/\>

            ___ ________                       ___ ________        PAR#MCR PIP<RET>                   PAR#MCR PIP<RET>
            ______________                     ______________        PIP>DB0:=DT0:<RET>                 PIP>DB0:=DX0:<RET>
            ________________                   ________________        PIP>TT:=DB0:/LI<RET>               PIP>TT:=DB0:/LI<RET>
            ________                           ________        PIP><CTRL/Z>                       PIP><CTRL/Z>

        ________                           ________        <CTRL/\>                           <CTRL/\>

            ___ ________                       ___ ________        PAR#MCR DMO<RET>                   PAR#MCR DMO<RET>
            _________                          _________        DMO>DT0:<RET>                      DMO>DX0:<RET>
        DMO -- DISMOUNT COMPLETED          DMO -- DISMOUNT COMPLETED
            ________                           ________        DMO><CTRL/Z>                       DMO><CTRL/Z>

   You can now boot the RSX-20F front-end from the disk.  This  procedure


                                    6-5
             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


   is described in Section 6.1.2.



   6.1.2  Booting the KL Front-End from Disk   6.1.2  Booting the KL Front-End from Disk

   To initiate the load, hold the ENABLE switch on  and  press  the  DISK
   switch  at  the  same  time.   These switches are located on the drive
   panel.  Following is the output when the front-end is loaded:

        RSX-20F VA##-## hh:mm dd-mmm-yy

        [SY0: REDIRECTED TO DB0:]
        [DB0: MOUNTED]

        KLI -- VERSION VA##-## RUNNING
        KLI -- KL10 S/N: 2996., MODEL B, 60 HERTZ
        KLI -- KL10 HARWARE ENVIRONMENT:
                MCA25 CACHE PAGER
                MOS MASTER OSCILLATOR
                EXTENDED ADDRESSING
                INTERNAL CHANNELS
                CACHE

        KLI -- PAGE TABLE SELECTED: BOTH
        KLI -- MICROCODE VERSION 2.1[###] LOADED
        KLI -- ALL CACHES ENABLED

        LOGICAL MEMORY CONFIGURATION
        ADDRESS     SIZE     INT     TYPE     CONTROLLER
        00000000    768K      4      MF20         11

        KLI -- CONFIGURATION FILE WRITTEN
        KLI -- BOOTSTRAP LOADED AND STARTED
        BOOT V#(##)

        [Loading from DSKB:SYSTEM.EXE[1,4]]

        KL10 dd-mmm-yy
        Why reload:

   The ONCE dialogue  begins  automatically.   The  startup  options  are
   described  in  Appendix  A.   For  a quick startup, use the GO startup
   option.  If you are installing a  multiple-processor  KL,  repeat  the
   procedures  in  Section 6.1 at the console for each CPU, then go on to
   Chapter 9 for information about building your  monitor.   If  you  are
   installing a single processor KL system, go to Chapter 9 now.

   If you are installing a KS system, go on to Section 6.2.





                                    6-6
             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


   6.2  CREATING THE KS MICROPROCESSOR FILE SYSTEM   6.2  CREATING THE KS MICROPROCESSOR FILE SYSTEM

   This section describes the procedure for creating the file system  for
   the KS microprocessor, and for booting the monitor.



   6.2.1  Creating A Front-End File System Directory Area   6.2.1  Creating A Front-End File System Directory Area

   If you are installing a new KS system, you  must  create  a  directory
   area  on  disk  for the microprocessor file system.  This area must be
   [6,2020], and it is  recommended  that  you  use  the  structure  that
   resides  on  RPA0.   Do not use a multiple-unit file structure for the
   microprocessor file system.

   To create the directory area, type the following commands:

         _ ___________        .R CREDIR<RET>
                         _______________________        Create directory:DSKB:[6,2020]/EXIT<RET>
        Created DSKB0:[6,2020].UFD/PROTECTION:775

        .



   6.2.2  Writing the Bootstrap Program to Disk   6.2.2  Writing the Bootstrap Program to Disk

   Next, you will write the bootstrap program to disk.  To do  this,  run
   the  SMFILE program as shown below.  You must supply the serial number
   for your system's CPU.  Note that the following  example  uses  a  CPU
   serial number of 4097.

         ___ _______________        .RUN DEC:SMFILE<RET>

        DECSYSTEM 2020 DIAGNOSTICS FE-FILE PROGRAM
        VERSION #.#, TOPS-10, KS10, CPU =4097
        [FOR HELP TYPE "HELP"]

               _____ _____ __________        SMFILE>WRITE SETUP DSKB:<RET>
               _____ __________        SMFILE>WRITE RESET<RET>
               ____ __________________        SMFILE>READ DEC:T10KL.RAM<RET>
               ______ _________        SMFILE>SERIAL 4097<RET>
               _____ _________        SMFILE>WRITE CRAM<RET>
               _____ ____ ___________________        SMFILE>WRITE BOOT DEC:KSBOOT.EXE<RET>
               _____ _________        SMFILE>WRITE DONE<RET>
               _________        SMFILE>EXIT<RET>

        EXIT
        .

   The KS is now ready to run.  Reload the monitor  using  the  following
   commands:


                                    6-7
             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM             BUILDING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


        ________        <CTRL/\>

             _______        KS10>HA<RET>

   When the CPU is halted, press the RESET buttons on the CPU panel.

        KS10 CSL.V#.#
        BT AUTO
        BOOT V#(#)

             _____        BOOT><RET>

        [Loading from DSKB:SYSTEM.EXE [1,4]]

   You can load the monitor by typing commands to the BOOT  program.   To
   load  the  default  monitor just press RETURN to the BOOT prompt.  The
   default file  name  is  DSKB:SYSTEM.EXE[1,4].   To  load  a  different
   monitor,  type the file name of the monitor to the BOOT prompt, taking
   care  to  include  the  structure  name  and  the  complete  directory
   specification.

   The ONCE dialogue  begins  automatically.   The  startup  options  are
   described  in  Appendix  A.   For  a quick startup, use the GO startup
   option.  After you choose a startup option, you can begin  building  a
   monitor.  Go to Part 4, Chapter 9.





























                                    6-8
                                        















                    PART 3: UPGRADING AN EXISTING SYSTEM




             This  part  is  made  up  of  two  chapters  which
             describe how to prepare your system for upgrade to
             a  new  version  of  the  monitor.   If  you   are
             installing  a  new  system, go directly to Part 4,
             Chapter 9, "Building the Monitor".













                                 CHAPTER 7                                 CHAPTER 7

                      RESTORING THE DISTRIBUTION TAPES                      RESTORING THE DISTRIBUTION TAPES



   Before you can upgrade your system, you must restore  files  from  the
   distribution  tapes  to  disk.   You  will  use  the BACKUP program to
   restore the files from the Monitor/ANF-10  tape,  which  contains  the
   sources  for  the monitor and ANF-10.  You will also restore the files
   from the CUSP, or Commonly Used System Program tape; the files for the
   GALAXY  batch  and  spooling  system  are included on this tape.  This
   chapter also explains how to restore files from the unbundled software
   tape, the customer-supported tape, and the TOOLS tape.

   The files contained on the Monitor/ANF-10,  CUSP,  DECnet,  and  TOOLS
   tapes  are  stored  on  the  tapes in a series of sub-file directories
   (SFDs) under the [10,7] PPN on structure DSKB:.  The examples in  this
   manual  use DSKB:  as the structure to which the files will be copied,
   and the area [10,7] for the  directory  area.   After  the  tapes  are
   restored,  you  will  use NFT to copy the files into their appropriate
   directories.

                                 IMPORTANT

           Before  proceeding,  you  should  save  your  existing
           monitor sources, CUSPs, GALAXY components, and (for KL
           systems only) front-end file system on a  backup  disk
           or tape.  This will allow you to fall back to your old
           monitor if the new monitor is difficult to install  or
           run.

   Existing KS installations require some of the files from the  bootable
   tape.   These  files are not compatible with previous versions and are
   required for building the microprocessor file system and you must copy
   these  files from the bootable tape before copying the TOPS-10 monitor
   and CUSPs.  If you are upgrading a KS system, mount the bootable  tape
   now.  If you are upgrading a KL system, mount the Monitor/ANF-10 tape.

   For  existing  systems  already  running  GALAXY,  ensure   that   the
   tape-drive  you  are  using  is  not available to MDA by using the OPR
   command SET TAPE-DRIVE.  MTA0 is used in the following example; if the
   distribution  tape  is  on a different drive, use the correct physical


                                    7-1
                      RESTORING THE DISTRIBUTION TAPES                      RESTORING THE DISTRIBUTION TAPES


   device name.

         _ ________        .R OPR<RET>
            ___ __________ ____ ___________        OPR>SET TAPE-DRIVE MTA0 UNAVAILABLE
                                        ________        Enter text and terminate with ^Z<CTRL/Z>
        ^Z
        OPR>
        10:29:36     Device MTA0  --  Unavailable for use  --
            _________        OPR>EXIT<RET>
        .

   For both KL and KS systems, assign a name to the tape  by  typing  the
   following command:

         ______ _____ __________        .ASSIGN MTA0: TAPE:<RET>

   The system responds with:

        MTA0 ASSIGNED

   This command assigns the name TAPE to the tape unit MTA0.

   The procedures for copying files from tape  to  disk  use  the  BACKUP
   program.  At the . prompt, type the following:

         _ ___________        .R BACKUP<RET>
        /

   The / sign is the BACKUP prompt, indicating that BACKUP is running and
   is  ready  to accept BACKUP commands.  The BACKUP program is discussed
          _______ __________ _____   in the TOPS-10 Operator's Guide.  This manual shows only the  commands
   you need to type to restore the monitor and its supporting software.

   If you are upgrading a KS system, continue with Section 7.1.   If  you
   are upgrading a KL system, go directly to Section 7.2.



   7.1  RESTORING KS MICROPROCESSOR FILES   7.1  RESTORING KS MICROPROCESSOR FILES

   The following commands allow  you  to  restore  the  files  needed  to
   upgrade  a  KS microprocessor file system.  Type the commands that are
   underscored in the following procedure:

         ____ __________        /TAPE TAPE:<RET>
         _________ ___________        /SUPERSEDE ALWAYS<RET>
         ________________        /INTERCHANGE<RET>
         _______ ____________________        /RESTORE DEC:=SMFILE.EXE<RET>
        "DONE
         _______ ___________________        /RESTORE DEC:=T10KL.RAM<RET>
        "DONE
         _______ ____________________        /RESTORE DEC:=KSBOOT.EXE<RET>


                                    7-2
                      RESTORING THE DISTRIBUTION TAPES                      RESTORING THE DISTRIBUTION TAPES


        "DONE
         ______ __________        /UNLOAD TAPE:<RET>
        [MTA0:  Read(C/H/S) = 7752000/0/0]

   Remove the bootable tape from the drive and mount  the  Monitor/ANF-10
   tape.  Then, proceed with the instructions in Section 7.2.



   7.2  RESTORING THE MONITOR SOURCES AND ASSOCIATED SOFTWARE   7.2  RESTORING THE MONITOR SOURCES AND ASSOCIATED SOFTWARE

   To copy the files from tape to disk, you must mount,  restore,  unload
   and  dismount  each  tape.   You  may  restore the tapes in any order,
   unless otherwise noted in the cover letter included with the  specific
   tape.

   Repeat the procedure below for each distribution tape,  starting  with
   the  Monitor/ANF-10 tape.  If you wish to restore the tapes to an area
   other than DSKB:[10,7], you must specify this  area  in  the  /RESTORE
   command line in the procedure below.

        1.  Mount the distribution tape.

        2.  Type the following commands to restore the files:

             ____ __________            /TAPE TAPE:<RET>
             ___________            /REWIND<RET>
             _________ ___________            /SUPERSEDE ALWAYS<RET>
             __________ ________            /PROTECTION 155<RET>
             ______ ________            /SSNAME ALL<RET>
             _______ __________            /RESTORE DSKB:<RET>
            !10,7 DSKB
            "DONE
             ______ __________            /UNLOAD TAPE:<RET>
            [MTA0: Read(C/H/S) = 7752000/0/0]

        3.  Dismount the tape.  

   After the files are on disk, exit  from  BACKUP  by  typing  EXIT  and
   pressing RETURN.

   Next,  you  will  copy  the  files  to  the  appropriate  areas   from
   DSKB:[10,7],  using  the  Network File Transfer (NFT) program.  NFT is
                    _______ ____ _________ ______   described in the TOPS-10 User Utilities Manual.

   To copy files you only need to use the COPY command  as  shown  below.
   Use  the  COPY  command to copy the files into their appropriate areas
   from DSKB:[10,7]:

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.EXE<RET>

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.RAM<RET>


                                    7-3
                      RESTORING THE DISTRIBUTION TAPES                      RESTORING THE DISTRIBUTION TAPES


         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.VFU<RET>

         ____ _____________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]DDT.REL<RET>

         ____ ________________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]JOBDAT.REL<RET>

         ____ ________________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]OVRLAY.REL<RET>

         ____ ______________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]TECO.ERR<RET>

         ____ ___________________________________________________        *COPY HLP:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.HLP<RET>

         ____ ___________________________________________________        *COPY DOC:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.DOC<RET>

         ____ ___________________________________________________        *COPY REL:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.REL<RET>

         ____ ___________________________________________________        *COPY UNV:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.UNV<RET>

         ____ ________________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]SYSTEM.CMD<RET>

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.SYS<RET>

         ____ ___________________________________________________        *COPY SYS:/PROTECTION:055=DSKB:[10,7,*,*,*,*,*]*.INI<RET>

   For KL systems, also copy the following files as shown:

         ____ _____________________________________________________        *COPY REL:/PROTECTION:055=DSKB:[10,7,MON,KL]TOPS10.REL<RET>

         ____ ________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]DXMCA.ADX<RET>

         ____ _______________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]DXMPA.A8<RET>

         ____ ________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]DXMCD.ADX<RET>

         ____ _________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]KNICOD.BIN<RET>

         ____ ________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]FEUIC.TXT<RET>

   For KS systems, copy the following file as shown:

         ____ _________________________________________        *COPY SYS:=DSKB:[10,7,*,*,*,*,*]SMFILE.EXE<RET>

   To exit from NFT, type EXIT and press RETURN:

         _________        *EXIT<RET>
        .

   If you have not yet read the beware files, read them now.  To find out
   what .BWR files are available, type the following:

         ___ _______________________________        .DIR DSKB:[10,7,*,*,*,*,*]*.BWR<RET>



                                    7-4
                      RESTORING THE DISTRIBUTION TAPES                      RESTORING THE DISTRIBUTION TAPES


   You can display the files on your terminal using the TYPE command.  Be
   sure  to  read all the files listed by the DIR command.  After reading
   the beware files, go on to Chapter  8,  "Restoring  the  Supplementary
   Processor's File System".


















































                                    7-5

























































                                    8-1












                                 CHAPTER 8                                 CHAPTER 8

            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM



   The KL and KS processors are each supported by another processor.  The
   KL  processor uses a PDP-11 front-end for I/O, which requires space on
   disk for its software.  The KS system uses an 8080 microprocessor that
   also  requires  disk  space for storage.  Sections 8.1 and 8.2 explain
   the procedure for restoring the front-end file system for KL  systems.
   For  KS  systems, Section 8.3 explains the procedure for restoring the
   bootstrap program to disk.

   If you are upgrading a KL system, continue reading with  Section  8.1.
   If you are upgrading a KS system, go directly to Section 8.3.



   8.1  RESTORING THE DISTRIBUTED KL FRONT-END SOFTWARE   8.1  RESTORING THE DISTRIBUTED KL FRONT-END SOFTWARE

   For existing installations, where modifications have been made to  the
   front-end  software, you should copy the current front-end file system
   from FE.SYS[1,4] to a backup disk area to resolve those  modifications
   with the new version of the front-end.

   The  front-end  software  for  KL  systems  is  distributed   on   the
   Monitor/ANF-10 tape.  Additional installation tools are distributed on
   the CUSP tape.  You must restore these tapes to  disk,  following  the
   procedures in Chapter 7, before beginning the installation.

   If you have used DSKB:[10,7] as the distribution  area  on  disk,  the
   following Sub-File Directories (SFDs) will exist:

        DSKB:[10,7,RSX20F]  Contains the distributions of RSX20F for both
                            DECtape  and  floppy  based systems.  It also
                            contains RSXINS.MIC, the master  installation
                            command  file.   RSXINS.MIC  is  described in
                            Section 8.2.

        DSKB:[10,7,FELOAD]  Contains FELOAD.BIN, a PDP-11  program  which
                            will be placed in the boot blocks of the disk
                            containing the front-end file  system  during


                                    8-1
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


                            the installation process.

        DSKB:[10,7,F11]     Contains F11, a tool used to  manipulate  the
                            front-end   file   system.    The  RSXINS.MIC
                            installation process will use F11  to  create
                            and populate a new RSX20F file system.

   A  Monitor  Interpreted  Commands  (MIC)   file,   named   RSXINS.MIC,
   distributed on DSKB:[10,7,RSX20F], performs all of the steps necessary
   to create a new FE.SYS file.  It will:

         o  Ask a set of questions about the installation,  such  as  the
            target  disk  for  the  installation,  where the distribution
            files are stored, and whether or not  the  console  front-end
            should be reloaded.

         o  Use F11 to create and populate  a  new  FE.SYS  file  on  the
            target disk.

         o  Use F11 to write the contents of  FELOAD.BIN  into  the  boot
            blocks of the target disk.

         o  Run DTELDR to reload the front-end  with  the  new  software.
            This  is  done  if  you  answer  YES  to  Question  7  of the
            installation  dialogue.    The   installation   dialogue   is
            described in Section 8.2.1.

   The next section describes the RSXINS installation process in detail.



   8.2  USING RSXINS   8.2  USING RSXINS

   Before running RSXINS, you must make sure of the following:

         o  Your system must be running MIC Version 11 or later.

         o  The CUSP tape must  be  restored  so  that  its  subdirectory
            organization  is  preserved.   This procedure is described in
            Chapter 7.

         o  You must be logged in as [1,2].  The F11  program,  which  is
            invoked  by  RSXINS,  uses  Super USETI/USETO calls to do its
            work.  These can only be executed  by  a  job  logged  in  as
            [1,2].



   8.2.1  The RSXINS Dialogue   8.2.1  The RSXINS Dialogue

   A sample run  of  the  RSXINS  procedure  is  reproduced  below.   The
   dialogue  questions are numbered for clarity in this text, but are not


                                    8-2
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


   numbered in the dialogue itself.  In the following example, RSXINS  is
   used  to  install  a  new  front-end  file on structure DSKE on a 1090
   (DECtape-based) KL system.

   RSXINS is invoked by the command:

         __ ________________________ _____        .DO DSKB:RSXINS[10,7,RSX20F] <RET>

   It will display the following:

           RSXINS -- RSX-20F Front-End File System Installation Procedure

            Installation started at 16:29:17 on Tuesday, 08-Mar-88

        This procedure  will  create,  populate,  and  make  bootable  an
        RSX-20F front-end file system on any TOPS-10 structure.

        In the following dialogue, default answers  are  enclosed  within
        square brackets.  If you would like further information about any
        question, answer it with a question mark (?).   If  you  wish  to
        return  to  the  previous question asked, answer with a left-hand
        angle bracket (<).

   RSXINS checks to see if you are logged into [1,2].  If you are not, it
   will abort execution.  Otherwise, it will begin a dialogue with you to
   obtain all of the installation information needed.  In  the  dialogue,
   each  question  provides  a default answer enclosed in square brackets
   ([]).  To take the default answer, press the RETURN key.

   If you need help at any time with the answer to a particular question,
   you can respond with a question mark (?).  RSXINS will then provide an
   explanation of the question and  the  appropriate  type  of  reply  it
   expects.  Then, it will repeat the question.

   If you wish to go back to the previous question that  was  asked,  you
   can  type  a  left-hand  angle  bracket  (<).   RSXINS will repeat the
   previous question, showing your previous reply as the default.

   RSXINS will first ask for the name of the  target  disk  structure  or
   unit:

     1 * Which disk structure do you wish to put the FE.SYS area on
                 ____ _____        [DSKB]?  DSKE <RET>

   Respond to this question with either the four-character name of a disk
   structure  or  with  the  name of a specific disk unit (such as RPA0).
   Use the physical unit name if you are installing FE.SYS on a disk that
   is part of a multiple-unit structure.

   Next you will specify the location of the RSX20F  distribution  files.
   The default is the area in which the executing RSXINS file is located.



                                    8-3
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


     2 * Where is the distribution area of the front-end files located
                               _____        [DSKB:[10,7,RSX20F]]?  <RET>

   You will now be asked if the  two  programs  used  by  the  procedure,
   FELOAD.BIN and F11.EXE, exist on SYS:.

                                                             _____     3 * Are the FELOAD.BIN and F11.EXE files on SYS:  [N]?  <RET>

   These two files, described  in  the  explanations  for  the  next  two
   questions,  normally  exist  in  the  subdirectories [10,7,FELOAD] and
   [10,7,F11] on the CUSP tape.  If you have moved  these  two  files  to
   SYS:   prior  to  invoking RSXINS, answer Y, otherwise, answer N.  The
   default answer is N.

   If you answered Y, proceed to question 6.

   Next, you will be asked to specify the location  of  FELOAD,  the  new
   PDP-11  bootstrap  program.   The  default  answer  will be the FELOAD
   subdirectory on the same disk and PPN where the executing RSXINS  file
   is located.

     4 * Where is the distribution of FELOAD located
                               _____        [DSKB:[10,7,FELOAD]]?  <RET>

   Next, specify the location of F11, a tool used  by  the  procedure  to
   manipulate   FE.SYS  files.   The  default  answer  will  be  the  F11
   subdirectory on the same disk and PPN where the executing RSXINS  file
   is located.  For example:

     5 * Where is the F11 program distribution area located
                            _____        [DSKB:[10,7,F11]]?  <RET>

   Your answer to the next question determines which variant  of  RSX-20F
   will  be installed on your system.  The valid responses for Question 6
   are either F or D, as follows:

         o  F specifies the floppy-based version (VE##-##) of RSX-20F;

         o  D specifies the DECtape-based version (VA##-##).

   The default is D, indicating a DECtape-based system.

                                                                    _____     6 * Is this for a Floppy (F) or DECtape (D) based system [D]?  <RET>

   In Question 7, RSXINS will ask how large you wish to make  the  FE.SYS
   file.   The default size is 2000 blocks.  The FE.SYS file is allocated
   contiguously on the disk.  If the new FE.SYS file is larger  than  the
   previous  one,  or  if there is no previous file, the new file will be
   created beginning at a place on the disk that is:

         o  on a block that is a multiple of 400 (decimal); and



                                    8-4
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


         o  in an area where the disk space is available contiguously.

   If the requested number of blocks for FE.SYS is not available  with  a
   beginning  position  on  a  multiple of 400 blocks, then the procedure
   will fail.  In that case, it will be necessary  to  backup  the  disk,
   refresh it, run RSXINS to create the FE.SYS file, and then restore the
   rest of the disk's files.  The procedures for  disk  backup,  refresh,
                                                       _______ __________   and restoration are documented in Chapter 14 of the TOPS-10 Operator's
   _____   Guide.

   If the FE.SYS file is created on a disk with user files on  it,  there
   can  be  a  delay  of  up  to  20  seconds between the messages "[SY0:
   redirected to DB0:]" and "[DB0:  mounted]" when RSX-20F is reloaded.

     7 * How many blocks should be reserved for the new FE.SYS file
                 _____        [2000]?  <RET>

   In Question 8, RSXINS will ask if the console front-end  is  currently
   using  the target structure.  If you accept the default answer of YES,
   then RSXINS will run DTELDR to reload the console front-end  processor
   using the newly-installed RSX-20F software on the target disk.  If you
   answer NO, it will perform only the software installation.

                                                                   _____     8 * Is the target structure currently in use by RSX-20F [Y]?  <RET>

   If you answered NO to this question, please skip to Question 10.

   If you answered YES, RSXINS will then display a cautionary message:

         ** Note ** It is important that the console FE  running  on
        the  target  structure  (DSKE:)  not  access the FE.SYS area
        during  the  course  of  the  installation,  otherwise   the
        front-end  system  could  crash.   This  in  itself is not a
        problem, because RSXINS will reload the  FE  after  the  new
        file  system  is  built.   However,  if the KL10 CPU were to
        crash during the installation procedure  before  the  update
        process  was  completed,  then  the  front-end  would not be
        rebootable from the RP06 disk.  It  would  be  necessary  to
        boot   the   front-end   from  console  media  (floppies  or
        DECtapes), after which you could then reload the monitor.

        While this is unlikely, it is  possible.   There  are  steps
        that you can take to minimize this risk further, such as:

         o  Use the SHUTDOWN or STOP commands in  OPR  to  stop  any
            unit-record  devices  (card  readers  and line printers)
            connected to the front-end during the update.

         o  Do not run this procedure  if  the  time  is  within  15
            minutes  of  midnight.  This prevents the possibility of
            RSX-20F attempting to run the  MIDNIT  task  during  the
            update.   If  it  is  close  to  midnight,  refrain from


                                    8-5
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


            answering the final question  in  this  procedure  until
            after 12:01 AM (by the system clock).

         o  Avoid running this procedure if the monitor is  unstable
            or  there  is  a high incidence of hardware failures.  A
            system crash in the middle of the procedure would  leave
            the  FE.SYS  file  in  a  partially-updated  state.  The
            front-end would then have to be  reloaded  from  console
            media.

   After this text is displayed it will ask:

     * Do you wish to see this text again [N]?

   The default answer of N will cause RSXINS to proceed to the next
   question; a Y will retype the warning message.

   If you are running a single-processor KL system, please skip down to
   Question 10.  If you are running an SMP system, answer the following
   question with the CPU number whose console front-end area you are
   installing.  The default is CPU 0.

                                                                   _____     9 * Which CPU's console front-end do you wish to reload [0]?  <RET>

   You have entered all the parameters required by RSXINS.  A summary  of
   the selected parameters is displayed for you to check:

        Here is a summary of the options you have selected for 
        this installation.

        Target disk structure for installation:  DSKE
        Location of RSX20F distribution area:    DSKB:[10,7,RSX20F]
        Location of FELOAD distribution area:    DSKB:[10,7,FELOAD]
        Location of F11 distribution area:       DSKB:[10,7,F11]
        Installation type (D=DECtape, F=Floppy): D
        Size of FE.SYS file to be created:       2000
        Structure currently in use by RSX20F:    Y
        Console front-end to be reloaded on CPU: 0
        FE.SYS currently exists on DSKE:         Y

        Please indicate if these choices are correct.  If you 
        answer the following question with a NO, the entire RSXINS 
        dialogue will be restarted.

                                                         _     10 * Are the above correct (Y or N) [No default] ?  Y

   If you respond  with  N,  RSXINS  will  restart  the  dialogue.   Your
   original  response will become the new defaults for each question.  If
   you respond with Y, RSXINS will proceed to install the  new  front-end
   software, as described in Section 8.2.2.




                                    8-6
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


   8.2.2  Automatic Front-End File System Installation   8.2.2  Automatic Front-End File System Installation

   RSXINS now begins the installation process.  It will  first  check  to
   see  if  the  FELOAD  and  F11 programs and the RSX-20F subdirectories
   exist in the places you have specified.  If it does not  find  one  of
   them,  it  will  abort the installation and exit to monitor level.  If
   all files  are  located  successfully,  you  will  see  the  following
   messages:

        All questions have been asked.  The  procedure  will  now  verify
        that required SFDs and files exist.

        All files have  been  located.   Commencing  actual  installation
        procedure.

   Now it will check to see if an  FE.SYS  file  already  exists  on  the
   target  structure/unit.  If an FE.SYS file does exist, RSXINS will run
   F11 and delete the file from the target disk:

        Deleting existing DSKE:FE.SYS[1,4] file...

        [OK]

   RSXINS will now create and populate a new FE.SYS file.  RSXINS will:

         o  Initialize the FE.SYS area, allocating the number  of  blocks
            you requested in the dialogue.

         o  Create a [5,5] UIC directory in the file.

         o  Copy the file CORIMG.SYS, containing the  bootable  image  of
            RSX20F,  to  the  [0,0]  directory, replacing the placeholder
            file created when the area was initialized.

         o  Copy the rest of the RSX20F  files  to  the  [5,5]  directory
            area.

         o  Copy FELOAD.BIN to the boot blocks (blocks 1 and 4 through 7)
            of the disk unit.

   The output from RSXINS will look like this:

        Creating new front-end file on DSKE...
        Defining a new [5,5] UFD on the area...
        Placing RSX-20F system image on the area...
        Placing RSX-20F files on the [5,5] UFD in the area...
        Writing FELOAD.BIN into the disk boot blocks...
        [OK]

   If you answered NO to Question 7, RSXINS will finish  at  this  point.
   If  you  answered  YES,  RSXINS  will use DTELDR to reload the console
   front-end.


                                    8-7
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


   8.2.3  Automatic Front-End Reload   8.2.3  Automatic Front-End Reload

   RSXINS will run DTELDR to reload the console front-end that  is  using
   the   target  disk.   On  a  single-processor  KL  system,  this  will
   automatically be front-end 0 on CPU 0.  For an SMP system, the console
   front-end  on  the  CPU  specified  in  response to Question 8 will be
   reloaded, completing the installation procedure for RSX-20F:

        Now reloading front-end 0 using newly-installed RSX-20F...

        Front-end 0 started



        RSXINS procedure finished at 16:34:06 on Tuesday, 08-Mar-88


        .

   For a multi-processor KL system, repeat the procedures in Sections 8.1
   and 8.2 for each CPU's front-end file system.

   Section 8.3 describes the procedure for writing the bootstrap  program
   to  disk  for  KS  systems.   If  you are installing or upgrading a KL
   system, go on to Chapter 9.



   8.3  WRITING THE KS BOOTSTRAP PROGRAM TO DISK   8.3  WRITING THE KS BOOTSTRAP PROGRAM TO DISK

   To upgrade an existing KS system, it is not necessary to  rebuild  the
   KS  microprocessor's  file  system.   However, before you can boot the
   monitor, you must write the bootstrap program to disk.

   To do this, run the SMFILE program as shown below.  You restored  this
   program from the bootable tape in Chapter 7.  You must use the version
   of SMFILE shipped with TOPS-10 Version 7.04 and you  must  supply  the
   serial  number for your system's CPU.  Note that the following example
   uses a CPU serial number of 4097.

         ___ _______________        .RUN DEC:SMFILE<RET>

        DECSYSTEM 2020 DIAGNOSTICS FE-FILE PROGRAM
        VERSION #.#, TOPS-10, KS10, CPU =4097
        [FOR HELP TYPE "HELP"]

               _____ _____ __________        SMFILE>WRITE SETUP DSKB:<RET>
               _____ __________        SMFILE>WRITE RESET<RET>
               ____ __________________        SMFILE>READ DEC:T10KL.RAM<RET>
               ______ _________        SMFILE>SERIAL 4097<RET>
               _____ _________        SMFILE>WRITE CRAM<RET>
               _____ ____ _______________        SMFILE>WRITE BOOT KSBOOT.EXE<RET>


                                    8-8
            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM            RESTORING THE SUPPLEMENTARY PROCESSOR'S FILE SYSTEM


               _____ _________        SMFILE>WRITE DONE<RET>
               _________        SMFILE>EXIT<RET>

        EXIT
        .

   The KS is now  ready  to  run.   Reload  the  monitor  by  typing  the
   following commands on the CTY:

        ________        <CTRL/\>

             _______        KS10>HA<RET>

   When the CPU is halted, press the RESET buttons on the CPU panel.

        KS10 CSL.V#.#
        BT AUTO
        BOOT V#(#)

             _____        BOOT><RET>

        [Loading from DSKB:SYSTEM.EXE [1,4]]

   You can load the monitor by typing commands to the BOOT  program.   To
   load  the  default  monitor just press RETURN to the BOOT prompt.  The
   default file  name  is  DSKB:SYSTEM.EXE[1,4].   To  load  a  different
   monitor,  type the file name of the monitor to the BOOT prompt, taking
   care  to  include  the  structure  name  and  the  complete  directory
   specification.

   The ONCE dialogue  begins  automatically.   The  startup  options  are
   described  in  Appendix  A.   For  a quick startup, use the GO startup
   option.  Here is a sample GO startup dialogue.   Only  the  first  few
   lines of system startup output are included for clarity:

        KS10 dd-mmm-yy
                     ________        Why reload:  NEW<RET>
               ______________        Date:  22-Aug-88<RET>
               __________        Time:  17:17<RET>
                         _______        Startup option:  GO<RET>

        KS10 17:18:12 CTY system 4097
        Connected to Node CENTRA(0) Line 51
        .LOGIN 1,2
        .R OPR
        OPR>








                                    8-9
                                        
























































                                    8-10
                                        















           PART 4: BUILDING THE MONITOR AND TAILORING THE SYSTEM




             This  part  is  made  up  of  four  chapters  that
             describe  how to build your monitor and tailor the
             system to the particular needs of your site.   All
             system  installations  require  the  procedures in
             Part 4.













                                 CHAPTER 9                                 CHAPTER 9

                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR



   Even though you have a running monitor, the bootstrap monitor is  only
   a  tool  for configuring a monitor for the system.  When you build the
   monitor, you configure support  for  the  peripheral  devices,  memory
   units,  terminal  and  network  lines, and supply information that the
   monitor needs to run CUSPs successfully.  You will build  the  monitor
   using  the  MONitor  GENerator  (MONGEN) program, assemble the monitor
   with MACRO, and load and save the monitor with LINK.   Then  you  will
   bring  up  your new monitor and create a bootable monitor tape.  Later
   sections describe how to automate the build  procedure  and  customize
   BOOT.

   This chapter describes the following steps to build the monitor:

        1.  Run MONGEN.

            Run MONGEN and answer the questions in the dialogue  section.
            MONGEN  creates  symbol  definition  source files, containing
            information  obtained  from  your  answers  to  the  dialogue
            questions.  You use the source files to build your monitor.

            MONGEN creates the following source files:

             o  SYSCNF.MAC  contains  the  symbol  definitions  for   the
                hardware and software configuration.

             o  F.MAC contains feature test switches and their  settings.
                If  you  change  the  setting  of any of the feature test
                switches in the FGEN dialogue, or if you add any  feature
                test  switches,  you  must  then  reassemble  the bundled
                monitor modules to create a  new  monitor  library  file,
                TOPS10.REL.  This procedure is described in Appendix B.

        2.  Assemble the source modules.

            The COMMON, COMDEV, and COMMOD modules of the monitor must be
            assembled  with the symbol definitions recorded in the MONGEN
            configuration file, SYSCNF.MAC.


                                    9-1
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


        3.  Link and load the monitor.

            The modules must be linked with  the  monitor  library  file,
            TOPS10.REL,  and  with  any  unbundled software (such as MPE)
            that your installation has chosen to run.  These are combined
            to  form  a  runnable,  executable  monitor  in  a file named
            SYSTEM.EXE.



   9.1  MONGEN   9.1  MONGEN

   MONGEN is a dialogue program that allows you to  choose  the  software
   modules  and  features that are most appropriate for your installation
   and to define your hardware and software configuration.  MONGEN builds
   MACRO-10  source  files.   The MONGEN-created source files contain the
   information needed to create an executable monitor that is specific to
   your  installation.   Parameters  that  are  assigned  in  these files
   determine how the monitor data base is assembled.

   Before running MONGEN, do the following:

        1.  Read this chapter  to  acquaint  yourself  with  the  current
            version of the MONGEN dialogue.

        2.  Be thoroughly familiar with your system configuration.

        3.  Predetermine the answers you will provide to the questions in
            the MONGEN dialogue.  Worksheets 1 and 2, provided in Chapter
            2, will help you determine your responses.

        4.  Obtain a copy of the product-specific installation guide  for
            each  unbundled  product  you  wish  to  use, and familiarize
            yourself with any modifications to the  following  procedures
            that  might  be  necessary for installing unbundled software.
            Special  installation  instructions  for  unbundled  software
            products   are  available  in  product-specific  installation
            guides.

   The MONGEN dialogue is  divided  into  the  following  sections,  each
   asking questions about a specific aspect of the system configuration:

        SYSGEN    Defines the hardware and software configuration.   This
                  includes   type   and   number   of   CPUs,   processor
                  characteristics, ports for  data  communications,  tape
                  and  disk  units,  line  printers, and other peripheral
                  devices.  SYSGEN defines  the  terminal  configuration,
                  including  the  OPR  line  number  and the dataset line
                  numbers.  SYSGEN  also  offers  some  services  of  the
                  monitor  that  you may refuse or accept.  SYSGEN is the
                  longest portion of the MONGEN dialogue, and it  creates
                  the SYSCNF.MAC file.


                                    9-2
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


        FGEN      Allows you to  change  the  settings  of  feature  test
                  options,  thus  enabling  and  disabling  the  software
                  features and symbol values that  the  monitor  uses  to
                  determine  how  to  service  users  and  how to perform
                  maintenance  operations.   You  must  run  FGEN.   FGEN
                  creates  the F.MAC file, which is required for building
                  the monitor.  If you change the default switch settings
                  you  must  rebuild  all the monitor library files, thus
                  creating a monitor that is not  supported  by  DIGITAL.
                  For more information, refer to Appendix B.

   If you are building the monitor for the first  time,  answer  all  the
   questions  in  the SYSGEN dialogue first, then answer the questions in
   the FGEN dialogue.  On subsequent occasions, select SYSGEN if you want
   to  make changes to your harware or software configuration, and select
   FGEN if you want to change any feature test switch settings or add any
   new feature test switches.



   9.1.1  Running MONGEN   9.1.1  Running MONGEN

   You can run MONGEN from any disk area, and the source files  that  are
   generated  are  stored  in  your  job's default disk area (DSK) or any
   other disk area you specify.  Make sure that the disk area  where  the
   monitor  is to be built has at least 7000 free disk blocks.  Clear the
   directory area of any extraneous files to eliminate the possibility of
   confusion when assembling the monitor.

   MONGEN has three modes  of  dialogue  (SHORT,  PROMPT,  and  LONG)  to
   service  users  of  different  levels  of  experience.  Throughout the
   dialogue, MONGEN questions take the  form  of  the  mode  you  choose.
   MONGEN questions are in the form:

        question (default,possible answers) [explanation]:

   An explanation of the three modes and the form the questions  take  in
   each mode, is provided below:

        ____           ______        Mode           Effect

        SHORT          MONGEN prints only the questions on your terminal.
                       This  mode  assumes  that  you  need no listing of
                       default or possible answers, and no explanation of
                       the   question.    MONGEN  assumes  that  you  are
                       familiar with the choice of answers.   SHORT  mode
                       is recommended only for experienced users.

        PROMPT         MONGEN  prints  each  question,   but   adds   (in
                       parentheses)  a  choice  of  answers.  The default
                       value,  if  any,   is   printed   first   in   the
                       parenthesis, followed by the other answers you may


                                    9-3
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


                       type, separated by commas.  Due to the  nature  of
                       some of the questions, a default answer may not be
                       offered.  This is the default mode and it is  used
                       in this section to illustrate the dialogue.

        LONG           MONGEN prints each question, the choice of answers
                       (in  parentheses),  and adds an explanation of the
                       question  [in  square  brackets].   LONG  mode  is
                       strongly  recommended  for all first-time users of
                       this version of MONGEN.

   Each question, regardless of the mode chosen, ends with a  colon.   If
   you  choose  PROMPT or LONG mode, select your answer from the possible
   answers listed within parentheses and enter it after  the  colon.   To
   accept  the default answer, just press RETURN.  If the question has no
   default, MONGEN prints an error message and repeats the question.  The
   possible answers are listed in one of these forms:

        (d,m-n)        A range of numbers is provided, where 'd'  is  the
                       default  value, 'm' is the smallest number and 'n'
                       the largest number you may type.  Choose a  number
                       in   that   range.   Numbers  are  decimal  unless
                       specified otherwise in the question.

        (m-n)          A range  of  numbers  with  no  default  value  is
                       provided.   For example, you can specify multiple,
                       consecutive terminal lines  by  answering  with  a
                       range of numbers in the form (m-n).

        (YES,NO)       Answer with YES or NO

        (a,b,c,...,z)  Choose one of the values in the list.

   If you type an invalid or inappropriate  response,  MONGEN  prints  an
   error  message and repeats the question so that you can respond to the
   question again.

   To execute the version of MONGEN in DSK:[10,7,MON], type the following
   command:

         _ ___________        .R SETSRC<RET>

         __ _______________        *CP [10,7,MON]<RET>

         ________        *<CTRL/C>

         ___ ___________        .RUN MONGEN<RET>

   MONGEN responds with:

                                  _______        Write MONGEN.MIC (YES,NO):NO<RET>



                                    9-4
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   You answer this question with YES if you want  to  record  the  entire
   dialogue.   This  record  would be useful for building several similar
   monitors.

   After you answer this question, MONGEN begins:

        MONGEN for 704 monitors
        MONGEN will generate any known TOPS-10 configuration.  For
        information about which configurations are supported, please
        refer to the SPD.
                                  __________        /HELP (PROMPT,SHORT,LONG):/HELP<RET>

   Since PROMPT is the default mode, MONGEN provides a list  of  possible
   answers  in  parentheses.   If you now type /HELP, MONGEN provides the
   LONG version of this question:

        MONGEN for 704 monitors.
        MONGEN will generate any known TOPS-10 configuration.  For
        information about which configurations are supported, please
        refer to the SPD.
        /HELP (PROMPT, SHORT, LONG)[
        All numbers are decimal unless stated otherwise
        Unique abbreviations are allowed everywhere to all questions
        /HELP reasks a question in the next longer mode
        /HELP:xxx sets the mode permanently.  Modes are:
        SHORT is short
        PROMPT has choices in ()
                                                         ___________        LONG has choices in () and an explanation in []]:PROMPT<RET>

   As shown above, you may ask MONGEN for the next longer version of  the
   current question by typing /HELP.  If you wish to change modes for the
   remaining questions, type  /HELP:mode,  where  'mode'  can  be  SHORT,
   PROMPT, or LONG.  For example, if you choose SHORT mode and later want
   to change to LONG mode for the remaining questions, type:

        /HELP:LONG

   This will set the mode to LONG for the remainder of the dialogue.  You
   can answer any question with LONG to get the LONG explanation for that
   specific question.

   To exit from MONGEN at any time, type <CTRL/Z>.



   9.1.2  The MONGEN Dialogue Questions   9.1.2  The MONGEN Dialogue Questions

   This section lists the dialogue questions for each part of MONGEN.   A
   number  precedes  each  MONGEN  question.   These  numbers help you to
   follow the dialogue more easily, and they are not  actually  displayed
   when you run MONGEN.



                                    9-5
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


                                    NOTE

           MONGEN asks some questions only for specific types  of
           systems;   and  asks  others  only  if  you  answer  a
           preceding question in a certain way.

   Before running  MONGEN,  read  this  chapter  carefully.   Decide  the
   answers  for  each  question  in the dialogue.  Worksheets 1 and 2 are
   provided in Chapter 2 to help you record your responses to the  MONGEN
   questions.  If you like, you can create a .MIC file to run MONGEN, and
   answer the questions in the .MIC file to save time.

   This section lists the MONGEN questions in PROMPT mode, which  is  the
   default  mode.   Use  LONG  mode or type /HELP after a question to get
   more information about each question.

     1     Which GEN (SYS,F):

   Respond with SYS or F to indicate the section that you  wish  to  run.
   If  you  respond with SYS, MONGEN displays the SYSGEN questions.  When
   the SYSGEN dialogue is done, MONGEN asks Question 1 again, so that you
   can  start the FGEN part of the MONGEN dialogue.  The SYSGEN questions
   are listed in Section 9.1.2.1.   The  FGEN  questions  are  listed  in
   Section 9.1.2.2.



   9.1.2.1  Running SYSGEN   9.1.2.1  Running SYSGEN - SYSGEN asks questions about the hardware and
   software  of  your  system.   This  includes the central processor(s),
   storage devices, and other peripheral devices.

     2     Output (DSK:SYSCNF.MAC):

     3     DECsystem10 (KL,KS):

   Question 4 is asked for KL systems only.

     4     CPUs (1,1-6):

     5     System name:

   Question 6 is asked for each CPU.

     6     CPUn serial # (1-10000):

     7     Exclude monitor overhead from user run time (YES,NO):

   Questions 8 and 9 are asked for KL systems only.  Question 9 is  asked
   only if you answer Question 8 with YES.

     8     EBOX/MBOX runtime accounting (YES,NO):



                                    9-6
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


     9     Exclude PI time from user runtime (YES,NO):

     10    Account verification (YES,NO):

   Questions 11 and 12 are asked for KL systems only.

     11    MOS memory (YES,NO):

           Autoconfigured device options:
     12      Include SCA (NO,YES,PROMPT):

   If you answer Questions 12 through 16, 20, 21, 26, and 31  through  39
   with PROMPT, you will be asked the following questions:

           Device code (CR,0-774):
           Drive, slave, or unit:
           Data:
           Do you want to specify more data (NO,YES):

   You must answer YES to Question 13 if you want to use LAT software.

     13    Include Ethernet service (NO,YES,PROMPT):

     14    Include SA10 device support (NO,YES,PROMPT):

   Questions 15 through 17 are asked for KL systems only.

     15    Include RP01/2/3 disks (NO,YES,PROMPT):

     16    Include Swapping drums (NO,YES,PROMPT):

   If you answer Questions 17, 19, 22, and 27 through 30 with PROMPT, and
   Question 18 with YES, you will be asked the following questions:

           Device code (CR,0-774):
           Massbus device (0,0-7):
           Drive, slave, or unit:
           Data:
           Do you want to specify more data (YES,NO):

     17    Include RS04/5 Massbus disks (NO,YES,PROMPT):

     18    Prompt for RP0x/RM0x Massbus disks (NO,YES):

   Questions 19 through 21 are asked for KL systems only.

     19    Include DX20/RP20 disks (NO,YES,PROMPT):

     20    Include CI20/HSC disks (NO,YES,PROMPT):

     21    Include SA10/IBM disks (NO,YES,PROMPT):



                                    9-7
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


     22    Include TM02/TM03 magtapes (NO,YES,PROMPT):

   Questions 23 through 25 are asked for KS systems only.

     23    Include UNIBUS/LP20 printers (NO,YES,PROMPT):

     24    Include UNIBUS/CD20 card readers (NO,YES,PROMPT):

           Local Terminal Configuration:
     25      DZ-11 TTY lines (0-32):

   Questions 26 through 53 are asked for KL systems only.

     26    Include DX10/TX01/TX02 tapes (NO,YES,PROMPT):

     27    Include DX20/TX02 tapes (NO,YES,PROMPT):

     28    Include TM78/TU78/TU79 magtapes (NO,YES,PROMPT):

     29    Include TM10B magtapes (NO,YES,PROMPT):

     30    Include TC10C magtapes (NO,YES,PROMPT):

     31    Include SA10/IBM tapes (NO,YES,PROMPT):

     32    Include BA10/LP100 printers (NO,YES,PROMPT):

     33    Include CFE/LP20 printers (NO,YES,PROMPT):

     34    Include XY10 plotters (NO,YES,PROMPT):

     35    Include CR10 card readers (NO,YES,PROMPT):

     36    Include CFE/CD20 card readers (NO,YES,PROMPT):

     37    Include CP10/CP10D card punches (NO,YES,PROMPT):

     38    Include PC04 paper tape punches (NO,YES,PROMPT):

     39    Include PC04 paper tape readers (NO,YES,PROMPT):

           Types of DTE service to load:
     40      Load ANF-10 DTE service (YES,NO):

     41      Load IBMCOMM DTE service (YES,NO):

     42      Load DECnet DTE service (YES,NO):

   If you answer YES to Question 43, MONGEN asks Questions 44 through 53.
   If  you  answer  NO,  MONGEN  asks  Question  44 then goes directly to
   Question 54.



                                    9-8
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


           Local terminal configuration:
     43      Configure old terminal scanners (NO,YES):

   Question 44 is asked for each CPU.

     44    How many RSX-20F TTYs on CPUn (0,0-128):

     45    How many DC10s on CPUn (1,0-2):

     46    How many DC68s on CPUn (1,0-2):

     47    How many DC76s on CPUn (1,0-2):

   Questions 48 through 50 are asked for each DC10.

           For DC10 n:
     48      Number of DC10B 8 line data groups (1-8):

     49    Number of DC10E Data set control groups (0-1):

     50    Correspondance of DC10E lines to the DC10B lines (M-N,P):

   Question 51 is asked for each DC68.

           For DC68 n:
     51      Number of DC68 lines, including its console TTY (1-144):

   Questions 52 and 53 are asked for each DC76.

           For DC76 n:
     52      To which DL10 port is the DC76 connected (0,1-7):

     53    Decimal lines on DC76 (1-129):

     54    OPR octal line  (CTY,0-3):

     55    Data set lines

     56    Number of Jobs (1-511):

     57    Maximum pages of core for each job (0,0-16384):

     58    Total amount of system core in K (512-4096):

   Question 59 is asked for KS systems only.

     59    Clock ticks per second (60,50):

   Question 60 is asked for KL systems only.

     60    Number of real-time devices (0,0-77):



                                    9-9
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


     61    Allow jobs to be locked in core (YES,NO):

     62    Guaranteed number of pages for unlocked jobs (0,0-16384):

     63    Number of pages reserved for locking jobs in Exec Virtual
           Memory (10,0-?):

     64    Number of high priority interrupt queues (0,0-15):

     65    Meter (NO,YES):

     66    KASER (NO,YES):

     67    MPXSER (YES,NO):

     68    PSISER (YES,NO):

     69    IPCF (YES,NO):

     70    ENQ/DEQ (YES,NO):

     71    Disk sets (ALL):

   If you are building a KL monitor and you answer Question 72 with  YES,
   MONGEN  asks  Questions  73  through  86.   Otherwise, MONGEN skips to
   Question 97.

   If you are building a KS monitor and you answer Question 72 with  YES,
   MONGEN  asks Questions 87 through 96.  Otherwise, MONGEN asks Question
   89, then skips to Question 97.

     72    Configure non-autoconfigured hardware (NO,YES):

   For KL systems only, Questions 73 through 86:

           on CPUn:
     73    DIS (NO,YES):

     74    Type (VP10,340,VB10C):

     75    Number of TD10S (0,0-2):

     76    Number of units on DTn (1-8):

     77    Number of DA28s (0,0-4):

     78    Number of lines for TTY pool (8,0-512):

     79    Number of DAS78s (0,0-8):

           For DAS78 n:
     80    To which DL10 port is the DAS78 connected (0,0-7):


                                    9-10
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


     81    Decimal lines on the DAS78 (1-16):

     82    Number of DN60s (0,0-7):

           For DN60 n:
     83    To which port is the DN60 connected (0,0-7):

     84    Decimal lines on the DN60 (1-12):

     85    How many DC75NPs or DN87s on CPUn (0,0-8):

           For front end number 1:
     86    To which DL10 port is the DC75 or DN87 connected (0,0-7):

   For KS systems only, Questions 87 through 96:

     87    Number of RX211s (0,0-2):

     88    Number of units on RXx (1-2):

     89    Number of KMC/DUP Lines (0,0-2):

     90    Type of line for KDPn (ANF10,DECNET,USER,IBM):

     91    Number of DMR11 Lines (0,0-8):

     92    DMRn line type (ANF10,DECNET,USER,IBM):

     93    DMRn switched line (YES,NO):

     94    DMRn half duplex (YES,NO):

     95    Is DMRn secondary (YES,NO):

     96    Load IBM communications software (YES,NO):

     97    Number of PTYs (20,1-505):

     98    Network software (YES,NO):

     99    Node name:

     100   Number of remote TTYs (485,0-485):

   If you answer YES to Question 101, MONGEN asks Questions  102  through
   114.  If you answer NO, MONGEN skips to Question 115.

     101   ANF-10 software (YES,NO):

     102   Node name (node):

     103   Node number of central site (1,1-77):


                                    9-11
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


     104   Remote terminals (YES,NO):

     105   Virtual terminals (YES,NO):

     106   Remote card readers (YES,NO):

     107   Remote line printers (YES,NO):

     108   Remote paper tape punches (NO,YES):

     109   Remote paper tape readers (NO,YES):

     110   Remote plotters (NO,YES):

     111   Remote DN8x DDCMP devices (YES,NO):

     112   Remote data entry terminals (YES,NO):

     113   Remote task-to-task (YES,NO):

     114   Number of connects (256,1-512):

   If you answer YES to Question 115, MONGEN asks Questions  116  through
   121.  If you answer NO, MONGEN skips to Question 122.

     115   DECnet software (YES,NO):

     116   Node name (node):

     117   Area number of central site (1,1-63):

     118   Node number of central site (1,1-1023):

     119   Router type (ROUTING,NONROUTING):

     120   Transmit password (DECNET20):

     121   Remote terminals (YES,NO):

   If you answer Question 122 with YES, MONGEN asks Questions 123 through
   125.  If you answer 122 with NO, MONGEN skips to Question 126.

     122   LAT software (YES,NO):

     123   Node name (node):

     124   Number of circuits (20,1-100):

     125   Service groups:

     126   Decimal "symbol,value":



                                    9-12
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


     127   Octal "symbol,value":

     128   SIXBIT "symbol,value":

     129   Type "device-mnemonic,PI-channel" for special devices:

     130   Type "device-mnemonic,PI-channel,no.-of-devices":

     131   Type "device-mnemonic,PI-channel,highest-ac-to-save":

     132   Type "ersatz-device,P,Pn,search-list-type":

     133   Type "command-name,dispatch,flags,unique-bits,PRVTAB-name":

   If you enter a terminal class in Question 134, MONGEN  asks  Questions
   135 through 144.  Otherwise, MONGEN skips to Question 147.

     134   Terminal class:

     135   Width (80,17-255):

     136   Length (0,0-255):

     137   Fill (0,0-3):

     138   Characteristics:

     139   Address of erase table (V100EP):

     140   Address of rubout table (VTXXBP):

     141   ANSI conformance level (1,0-15):

     142   DEC conformance level (0,0-15):

     143   Characteristic attributes:

   If you do not enter a member terminal type  in  Question  144,  MONGEN
   repeats  Question  134.   If  you enter a member terminal type, MONGEN
   first asks Questions 145 and 146, then repeats Question 134.

           Now enter member terminal types
     144     Terminal type:

     145   Additional attributes to set:

     146   Attributes to clear:

   If a class to extend is entered in Question 147, Questions 144 through
   146  are  repeated.   If  no  class  to extend is entered, MONGEN asks
   Question 148.



                                    9-13
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


           Additional terminals for classes:
     147   Class to extend:

     148   System default terminal type (TTY):

   This is the  last  question  in  the  SYSGEN  portion  of  the  MONGEN
   dialogue.  MONGEN responds with:

        File DSK:SYSCNF.MAC Closed [SYSGEN finished]

   The SYSGEN dialogue is finished when the source  file  is  written  to
   disk.   Question  1 is repeated so that you may start the FGEN portion
   of the dialogue.  If you wish to exit from MONGEN, type <CTRL/Z>.



   9.1.2.2  Running FGEN   9.1.2.2  Running FGEN - The  FGEN  dialogue  simplifies  the  task  of
   choosing  appropriate  software  from  a wide selection.  For example,
   FGEN allows you to select non-standard TOPS-10 features  for  a  given
   application.   In  the  dialogue,  the  software  options  are  called
   "feature-test switches."

                                    NOTE

           Only  the  standard  settings  of   the   feature-test
           switches  have  been  tested  and are fully supported.
           Although  installations  may  alter  the  settings  of
           feature-test options, nonstandard option settings have
           not been tested and are not supported.

   If you change the settings of the feature-test switches, you must then
   rebuild  the  monitor  library  file,  TOPS10.REL.   This procedure is
   documented in Appendix B.

   After you select the FGEN portion of the dialogue, you may:

         o  List the feature-test switches with their standard settings.

         o  Request an explanation of the feature-test switch symbols.

         o  Change the feature-test switch settings.

         o  Add new feature-test switches.

   The FGEN questions are listed below.

     1     Which GEN (SYS,F):

     2     Output (DSK:F.MAC):

     3     Feature set (KL10,KS10):



                                    9-14
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


     4     Standard settings (YES,NO):

   If you select the standard settings by answering Question 4 with  YES,
   the  FGEN portion of the dialogue is finished.  If you answer Question
   4 with NO, MONGEN prompts you with Question 5.

     5     Feature:

   To list a standard switch and its setting, type the name of the switch
   and press RETURN.  For example:

                   _________           Feature:KL10<RET>
           Hardware options
              FTKL10==:-1 ;KL10 support

   To list all standard switches and their settings, type ALL  and  press
   RETURN.   All  standard  switches and settings will be listed, grouped
   according   to   the   following   categories:    hardware    options,
   communications and network features, I/O features, scheduler features,
   UUO features, miscellaneous features, and customer defined features.

   To change the value of a known switch, or  to  create  a  new  switch,
   enter  the  name of the switch without the FT prefix, its value, and a
   comment if desired, separated by commas and press RETURN.

   Question 5 is the last question in the  FGEN  portion  of  the  MONGEN
   dialogue.  MONGEN responds with:

        File DSK:F.MAC Closed

   Question 1 is asked again.  You may choose SYSGEN  or  FGEN,  or  type
   <CTRL/Z> to exit from MONGEN.



   9.2  ASSEMBLING THE MONITOR   9.2  ASSEMBLING THE MONITOR

   You must always assemble the following monitor source files:

        COMMON.MAC
        COMDEV.MAC
        COMMOD.MAC

   With the configuration source file:

        SYSCNF.MAC

   It is necessary to assemble the following universal files with them:

        F.MAC
        S.MAC
        NETPRM.MAC


                                    9-15
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


        DTEPRM.MAC (KL only)
        DEVPRM.MAC
        D36PAR.MAC

   It is important that F.MAC precede S.MAC  in  the  compiler  commands,
   because  S.MAC  has conditional assemblies that depend on the contents
   of F.MAC.  Use the following monitor commands to compile the monitor:

         _______________ ________        .COMPILE/COMPILE F,S<RET>
        MACRO:   F
        MACRO:   S

        EXIT

         _______________ ________________________________        .COMPILE/COMPILE DEVPRM,DTEPRM,NETPRM,D36PAR<RET>
        MACRO:   DEVPRM
        MACRO:   DTEPRM
        MACRO:   NETPRM
        MACRO:   D36PAR

        EXIT

         _______________ __________________________________        .COMPILE/COMPILE SYSCNF+<COMMON,COMDEV,COMMOD><RET>
        MACRO:   COMMON
        MACRO:   COMDEV
        MACRO:   COMMOD

        EXIT

   If you  are  using  a  standard  combination  of  feature-test  switch
   settings and DIGITAL-supplied sources, you do not need to assemble the
   remainder of the bundled monitor modules.  These modules have  already
   been   assembled   and  combined  in  a  monitor  library  file  named
   TOPS10.REL.  TOPS10.REL must be located in the same disk area as  that
   which you are using to build the monitor, before you can link and save
   the monitor.

   For KL installations, the TOPS10.REL library is in [10,7,MON,KL].  For
   KS installations, the TOPS10.REL library file is in [10,7,MON,KS].

   If you are not using a standard  combination  of  feature-test  switch
   settings  or if you have made changes to the monitor sources, you must
   assemble all the monitor sources, creating a new monitor library file.
   These procedures are explained in Appendix B.



   9.3  LINKING AND SAVING THE MONITOR   9.3  LINKING AND SAVING THE MONITOR

   The next step in building the monitor is to link the monitor  modules.
   The  LINK  program  used in the procedures that follow provides both a
   runnable monitor (SYSTEM.EXE), and several options for information you


                                    9-16
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   can  receive  about  the linking process.  This section lists only the
   commands that the LINK program requires to  build  the  monitor.   For
                                                             _______ ____   full  documentation  on  the  LINK  program, refer to the TOPS-10 Link
   _________ ______   Reference Manual.

   The following sequence of instructions loads and saves a monitor for a
   standard KL or KS configuration with no unbundled software:

         _ _________        .R LINK<RET>
         ______________________________ _ _______ _____        *SYSTEM/SAVE/NOINITIAL/HASH:13K = /LOCALS -<CR>
         _______________________________________        #COMMON,COMDEV,COMMOD,TOPS10/SEARCH-<CR>
         __________________________        #/PATCH:200/COUNTERS/GO<CR>

        EXIT

        .

                                    NOTE

           It is very important to leave a space on  the  command
           line  after  the  /LOCALS  switch.   If a space is not
           left, the command line will not be accepted.

   The file name SYSTEM is an arbitrary name chosen for the monitor;  you
   can  use  any  file  name.  However, the bootstrap program defaults to
   SYSTEM.EXE[1,4], so SYSTEM is a good choice for the file name.

   To load unbundled software with the monitor, include the name  of  the
   relocatable file(s) in the command line after COMMOD.  For SMP support
   use CPNSER.REL.



   9.3.1  Copying the New Monitor to SYS:   9.3.1  Copying the New Monitor to SYS:

   Now copy your customized monitor to SYS  so  that  it  can  be  easily
   loaded  by  the  bootstrap program.  To copy your monitor to SYS, type
   the following monitor command:

         ____ ____________________        .COPY SYS:=SYSTEM.EXE<RET>

   After SYSTEM.EXE is in SYS, you can start your new monitor.



   9.4  BRINGING UP THE NEW MONITOR   9.4  BRINGING UP THE NEW MONITOR

   Before you can load the new monitor, you must reload the  system.   To
   do  this,  you  will  shut  down  the current monitor, then reload the
   monitor.  Use the GO startup  option  to  start  the  monitor  quickly
   without  changing  disk  parameters.   The following procedures show a
   quick startup  for  a  KL  and  then  for  a  KS.   On  both  systems,


                                    9-17
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   SYS:TTY.INI and SYS:SYSJOB.INI were created previously.

   _________ ___ __ _______   Procedure for KL Systems

        ________        <CTRL/\>
            _____________        PAR>SHUTDOWN<RET>
        DECsystem-10 not running
        [Dumping on DSKB:CRASH.EXE[1,4]]
        [Loading from DSKB:SYSTEM.EXE[1,4]]

        KL10 20-Jun-88
                   ________        Why reload:NEW<RET>
             ______________        Date:JUN-20-88<RET>
             _____________        Time:18:36:12<RET>
                        _______        Startup option: GO<RET>

        KL10 18:36:41 CTY system 2996
        Connected to Node CENTRA(0) Line # 25
        .LOGIN 1,2
        .R OPR
            _________        OPR>EXIT<RET>
        .

   _________ ___ __ _______   Procedure for KS Systems

        ________        <CTRL/\>

             _______        KS10>HA<RET>

   (Press the RESET and BOOT switches on the console at the same time.)

        KS10  CSL.V#.#
        BTAUTO
        BOOT V#(##)

             _____        BOOT><RET>

        KS10 11-Aug-88
        Connected to Node CENTRA (0) Line # 17
                   ________        Why reload:NEW<RET>
             ______________        Date:AUG-11-88<RET>
             _____________        Time:10:29:04<RET>

                        _______        Startup option: GO<RET>

        KS10 10:30:06 CTY system 4101
        .LOGIN 1,2
        .R OPR
            _________        OPR>EXIT<RET>
        .

   Next, you will create a bootable magnetic tape for your system.


                                    9-18
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   9.5  CREATING THE SYSTEM BOOTABLE TAPE   9.5  CREATING THE SYSTEM BOOTABLE TAPE

   This section describes the procedure for creating a bootable  magnetic
   tape  for  your system.  The bootable tape is used to get your monitor
   running in the event of a disk  failure  that  prevents  booting  from
   disk.   You should rebuild the bootable tape every time you load a new
   monitor.

   For KL systems, you can build the bootable tape using the instructions
   in  Section  9.5.1.   For  KS  systems, refer to Section 9.5.2.  These
   procedures save the monitor as DSKB:SYSTEM.EXE[1,4].



   9.5.1  Creating the KL System Bootable Tape   9.5.1  Creating the KL System Bootable Tape

   Use the following steps to create a bootable monitor  tape  for  a  KL
   system.   Mount  a  magnetic  tape  that you will use for the bootable
   tape, ensuring that the write ring is on the tape.  Tape drive MTA0 is
   used here.

         ______ _____ ____________        .ASSIGN MTA0: BACKUP:<RET>

         ___ _________ _______________        .SET BLOCKSIZE BACKUP:512<RET>

         ______ ____________        .REWIND BACKUP:<RET>

         ____ _______________________        .COPY BACKUP:=FEFILE.EXE<RET>

         ____ ___________________________        .COPY BACKUP:=SYS:BACKUP.EXE<RET>

   Then, copy your new monitor and  all  the  system  files  to  tape  by
   typing:

         _ ___________        .R BACKUP<RET>

         ____ ______________________________        /SAVE DSKB:[1,4]=SYS:SYSTEM.EXE<RET>

         ____ _______________________________________        /SAVE DSKB:[1,4]=SYS:*.*,REL:*.*,UNV:*.*<RET>



   9.5.2  Creating the KS System Bootable Tape   9.5.2  Creating the KS System Bootable Tape

   Use the following steps to create a bootable monitor  tape  for  a  KS
   system.   Mount  a  tape  that  you  will  use  for the bootable tape,
   ensuring that a write ring is included.  Tape drive MTA0 is used here.

         ______ _____ ____________        .ASSIGN MTA0: BACKUP:<RET>

         ___ _________ _______________        .SET BLOCKSIZE BACKUP:512<RET>



                                    9-19
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


         ______ ____________        .REWIND BACKUP:<RET>

         ____ ______________________        .COPY BACKUP:=T10KL.RAM<RET>

         ____ _____________________        .COPY BACKUP:=BOOT.RDI<RET>

         ____ ___________________________        .COPY BACKUP:=SYS:BACKUP.EXE<RET>

   Then, copy your new monitor and  all  the  system  files  to  tape  by
   typing:

         _ ___________        .R BACKUP<RET>

         ____ ______________________________        /SAVE DSKB:[1,4]=SYS:SYSTEM.EXE<RET>

         ____ ___________________ ________ ____________        /SAVE DSKB:[1,4]=SYS:*.*, REL:*.*, UNV:*.*<RET>



   9.6  AUTOMATING THE BUILD PROCEDURE   9.6  AUTOMATING THE BUILD PROCEDURE

   This section describes how to automate the build procedure.  After you
   build  the  monitor  through  direct  interaction,  you  can  edit the
   distributed build files to tailor them to the characteristics of  your
   installation.   This  section describes the files necessary to build a
   monitor, tells you where they are located and how  to  customize  them
   and use them.

   You can use the automated build procedure whenever the monitor must be
   rebuilt  (to  install patches, upgrade the monitor version, or to make
   changes to the configuration of the hardware and/or  software).   When
   you  need  to make changes to your monitor that require rebuilding it,
   follow the instructions in this chapter.

   Before you submit the control files described in this  section,  start
   the GALAXY batch and spooling system as described in Chapter 10.

   The following table lists each file and its function.  An asterisk (*)
   appears  next  to  files that require customization.  The next section
   explains how to modify these files.

   Some of the files pertain only to  particular  installations.   Except
   where noted, all of the files below are on the Monitor/ANF-10 tape.











                                    9-20
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   Table 9-1:  Monitor Build Files   Table 9-1:  Monitor Build Files


   ______________________________________________________________________

       File            Function
   ______________________________________________________________________

       BUILD.CTL       compiles the files in the  build  areas.   These
                       areas   include   the  COMMON  modules  (COMMON,
                       COMDEV, and  COMMON).   In  addition,  BUILD.CTL
                       builds TOPS10.GLB and MON.EXE.

     * BUILDS.DCL      contains command definitions.

     * BUILDS.MIC      submits all the build control files.

     * BUILDS.PTH      defines the build areas.

       COMCTL.MIC      provides a template for the  control  file  that
                       COMPIL.MIC uses.

       COMCTL.TEC      reads COMCTL.MIC to generate  the  control  file
                       that COMPIL.MIC uses.

       COMPIL.CTL      builds TOPS10.REL.

       COMPIL.MIC      creates and submits a control file that compiles
                       and lists a single monitor module.

     * GEN.CTL         runs the MONGEN dialogues.

       MPE.FIL         contains a list of MPE files to compile and  the
                       names of the directory areas for the .REL files.
                       This file applies only to SMP sites.  It  is  on
                       the MPE or CPNSER tape.

       START.CTL       performs the following operations in preparation
                       for full recompilation of the monitor:

                        o  Deletes all files from BASE:   except  *.MAC
                           and *.MIC.

                        o  Creates the LINK.CCL and GLOB.MIC files.

                        o  Creates MPE.FIL, UNSUP.FIL,  and  DECNET.FIL
                           if  they  do  not already exist in the build
                           area.

                        o  Uses the *.FIL  files  to  create  UNIV.CMD,
                           TOPS10.CMD,  and  TOPS10.CCL  in  each  FGEN
                           area.


                                    9-21
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


                        o  Invokes TREE.TEC, and TOPS10.TEC.

                                             NOTE

                           Submit START.CTL whenever you install  a
                           new version of the monitor, an autopatch
                           update  to  the  monitor,  or  when  you
                           change   the  value  of  any  previously
                           defined  feature  test  symbols  from  a
                           universal file.

     * SWITCH.INI      includes switches,  runs  the  version  of  PATH
                       shipped  with  TOPS-10  Version  7.04,  and sets
                       defaults for the SUBMIT commands.

     * TOPS10.FIL      contains a list of  files  to  compile  and  the
                       names of the directory areas for the .REL files.

       TOPS10.TEC      creates the .CCL and .CMD files that COMPIL.CTL,
                       BUILD.CTL, and UNIV.CTL use.

       TREE.TEC        uses BUILDS.PTH and  START.MIC  to  insure  that
                       FGEN  and  BUILD  areas  exist and that they are
                       empty.   TREE.TEC  deletes  START.MIC  when   it
                       completes this action.

     * UNIV.CTL        recompiles all the universal files  in  selected
                       areas, as defined by hard-wired paths.

       UNSUP.FIL       contains a list of customer-supported modules to
                       compile.   This  file applies only to sites with
                       unsupported  configurations.   It  is   on   the
                       customer-supported tape.
   ______________________________________________________________________



   9.6.1  Customizing the Build Files   9.6.1  Customizing the Build Files

   Some of the files  for  building  the  monitor  can  be  used  without
   alteration.   However,  the  following  files are only templates.  You
   must modify them to build a monitor that reflects  your  installation.
   This section lists those files and explains how to customize them.

         o  BUILDS.DCL

            This file defines the PATH command to  run  SYS:PATH.EXE  (as
            used in the supplied .MIC and .CTL files).  This command must
            invoke   the   PATH   program   supplied    on    the    7.04
            customer-supported  CUSP  tape.   If this version of the PATH
            program is installed in SYS:  you do not need to include this
            command definition.


                                    9-22
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


         o  BUILDS.MIC

            This file submits COMPIL.CTL in each FGEN area, and BUILD.CTL
            in each build area.  Edit it to use only your monitor areas.

         o  BUILDS.PTH

            This file  consists  of  three  sections,  separated  by  the
            following  string:     !<*>!  .  Each section defines logical
            names for one of the following areas:   library  areas,  FGEN
            areas, and monitor build areas.

            1.  LIBRARY AREAS

                 -  BASE:

                    This name is required.  Define it  to  point  to  the
                    area  used  to  edit any locally modified sources for
                    building.  The area should be the  superior  SFD  (or
                    UFD)  of each of the FGEN areas defined in the second
                    section of the file.

                 -  CTLS:

                    This name is required.  Define it  to  point  to  the
                    files  used  in  the  build procedures (*.MIC, *.CTL,
                    *.TEC, and *.FIL).

                 -  LOGS:

                    This name is required.  Define it  to  point  to  the
                    area that stores all the batch log files.

                 -  MON:

                    You must define this name, and  specify  the  /SEARCH
                    attribute.     The    /SEARCH    attribute    insures
                    accessibility of the files required during the  build
                    procedure.   It  points  to the distribution sources,
                    and files used in the build procedures.

                 -  SYS:, UNV:, REL:

                    These may not be  required,  but  you  must  use  the
                    current  version  of  MACRO  and  LINK  to  build the
                    monitor.


            2.  FGEN AREAS

                The FGEN areas are used to build a  TOPS10.REL  file  for
                linking  monitors.   There is one FGEN area for each FGEN


                                    9-23
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


                dialogue you complete in MONGEN.  Most installations need
                only one or two such areas:  a KL area and a KS area.

            3.  MONITOR BUILD AREAS

                The monitor build areas are used to build a  MON.EXE  for
                each system at an installation.  Define these areas to be
                in  SFDs  subordinate  to  the  appropriate  FGEN  areas.
                However, if there is only one build area corresponding to
                a given FGEN area, the two areas can point  to  the  same
                SFD.   For example, in the supplied prototype, S could be
                the same as KS.

            Finally, the BUILDS.PTH file invokes the DECLARE  program  to
            define   required  monitor  commands.   This  procedure  also
            ensures that full directory scanning is enabled for the job.

            It may not be necessary to  define  commands,  but  directory
            scanning  is  required  for  the  job.   The commands must be
            defined if the System Search List definition  is  not  [1,4].
            The  automated build procedure requires that the PATH and MIC
            commands be defined, therefore those programs must  exist  in
            the build area if they are not in SYS.

         o  GEN.CTL

            This file runs MONGEN for each FGEN and build area.  Edit  it
            to generate only the configurations in your monitor areas.

         o  SWITCH.INI

            This file should be in the UFD  corresponding  to  the  BASE:
            area.   Define  it to run the version of PATH supplied on the
            7.04 customer-supported CUSP tape and to process  BUILDS.PTH.
            It  should  also  set  up  appropriate  defaults  for  SUBMIT
            commands.

         o  TOPS10.FIL

            TOPS10.FIL contains a list of files  to  compile.   For  each
            file,  it  lists  four  optional fields of information in the
            following format:

            <UNIV SPEC>|<COMPIL STRING>|<LIBRARY SPEC>|<AREA LIST>

            1.  UNIV SPEC

                This field determines whether the  file  is  a  universal
                file,  and consequently, whether its COMPIL STRING should
                be duplicated in UNIV.CMD.




                                    9-24
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


            2.  COMPIL STRING

                This field contains the command to give to COMPIL to  get
                the file compiled.  If the program is available as a .REL
                file (such as EDDT), leave this field blank.

            3.  LIBRARY SPEC

                This field contains the specification for the  module  to
                be  included  in  TOPS10.REL.  If this file should not be
                part of the monitor library file, leave this field blank.

            4.  AREA LIST

                This field contains the list of FGEN and build areas  for
                which the file should be compiled.

         o  UNIV.CTL

            This file forces compilation  of  all  monitor  sources.   It
            defines  a path to each FGEN area to do this.  Edit it to use
            your FGEN areas.



   9.6.2  The Build Procedure   9.6.2  The Build Procedure

   The following example shows the complete build procedure.  The  column
   to the left shows the commands that you type.  The column to the right
   of the commands contains explanatory remarks.


         ______ __________        .SUBMIT START<RET>

         __ _______ ___________        .DO COMPILE MONGEN<RET>       Include this COMPILE  command  only
                                      if   you   have   made  changes  to
                                      MONGEN.MAC.

         ______ _________        .SUBMIT UNIV<RET>             Include  the  SUBMIT  UNIV  command
                                      only if you have submitted START.

         __ _______ _______________        .DO COMPILE modulename<RET>   Include DO COMPILE if you have made
                                      changes  to  a  module.  The module
                                      will be recompiled  and  a  listing
                                      will be generated.

         __ ___________        .DO BUILDS<RET>               Compiles the monitor modules in the
                                      FGEN  areas, and builds MON.EXE and
                                      TOPS10.GLB.   If   you   have   not
                                      changed  the  universal files, this
                                      is  the  only  step  you  need   to
                                      perform.


                                    9-25
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   9.7  CUSTOMIZING BOOT   9.7  CUSTOMIZING BOOT

   You can run the batch control file, BOOT.CTL, as distributed, to build
   BOOT  after  you  have  started  GALAXY  (refer  to  Chapter 10).  The
   following command submits the control file for batch processing:

         ______ _____________        .SUBMIT BOOT.CTL<RET>

   Or, before you bring up the monitor, you can  perform  the  individual
   steps  manually  and  modify the control file to eliminate the loading
   procedures for hardware that does not exist at your installation.

   For a KS system, you can modify the control file  to  include  a  step
   that creates binary files or a step to start EDDT.

   For a KL system, you can modify the control file to include or exclude
   microcode  for  various  hardware components, as well.  This procedure
   allows you to save space in memory, because the monitor  contains  all
   the microcode available.

   Section 9.7.1 describes the procedure for KL systems.   Section  9.7.2
   describes the procedure for KS systems.



   9.7.1  Customizing the KL BOOT   9.7.1  Customizing the KL BOOT

   To customize BOOT for  your  KL  system,  first  enter  the  following
   command:

         _______________ _____________        .COMPILE/COMPILE BOOT.MAC<RET>

   The following output will appear on your terminal:

        MACRO:  BTSPRM
           BOOT
        [Assembling Boot for a KL10]
        [Including DX10/TX01 driver]
        [Including TM02 driver]
        [Including DX20/TX02 driver]
        [Including TM78 driver]
        EXIT
        .

   The files BTSPRM.UNV and BOOT.REL have been created.  Next,  run  LINK
   to create BTONCE.EXE:

         _ _________        .R LINK<RET>
         ___________________________________________________        *BTONCE/SAVE=BOOT/LOCALS/SYMSEG:LOW,REL:EDDT/GO<RET>
        EXIT
        .



                                    9-26
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   Now, you can run BTONCE and, by  providing  Y  or  N  answers  to  the
   questions,   include   or   exclude  microcode  for  various  hardware
   components.  Running BTONCE creates BOOT.EXE and BOOT.EXB.  The BTONCE
   questions are as follows:

         _ ___________        .R BTONCE<RET>
        Create binary output file [Y/N]:   Enter Y or N, then
        Preserve EDDT and symbols [Y/N]:   press RETURN
        Load DX10/TX01 microcode [Y/N]:
        Load DX20/TX02 microcode [Y/N]:
        Load DX20/RP20 microcide [Y/N]:
        Load KLIPA/CI microcode [Y/N]:
        Load KLNI/NI microcode [Y/N]:
        .

   Lastly, run FILDDT to create a BOOT DDT that you can use  to  look  at
   BOOT  in  the running monitor and examine problems that you might have
   with your BOOT procedure.  The FILDDT prompt is File:.  Enter the file
   name  BTONCE  followed  by the switch /S, which directs FILDDT to load
   the symbol table from the file.  After  entering  the  file  name  and
   switch, press RETURN:

         _ ___________        .R FILDDT<RET>
             _____________        File:BTONCE/S<RET>
        [Extracting symbols from file DSKB:BTONCE.EXE[*.*]
        [1339 Symbols loaded from file]
        File:

   Enter the switch /M at the File:  prompt and press RETURN.  The switch
   /M  directs  FILDDT  to look at the running monitor.  In the following
   discussion, note that $ represents the escape character.

   Next, enter the command string 1$U, followed by RETURN.  1$U  provides
   FILDDT  with  the  physical  page  number  of the CPU's EPT (Executive
   Process Table).  $U is the commmand that sets the EPT page  number  in
   FILDDT; the EPT for CPU0 occupies physical page 1.

   Then, enter the command string  -1,,-BTSVEC$8U,  followed  by  RETURN.
   Because  it  is  unlikely  that  the  location of the assembled symbol
   values will match the arbitrary location selected by the  monitor  for
   BOOT,  the  assembled values must be relocated.  $8U is the relocation
   command, and -1,,-BTSVEC is the argument to that command.

   To exit from FILDDT, enter <CTRL/Z>.  Then  save  the  BTDDT  file  it
   created.

             _______        File:/M<RET>
        [Looking at the running monitor]
        ________        1$U<RET>
        ___________________        -1,,-BTSVEC$8U<RET>
        ________        <CTRL/Z>
         ____ __________        .SAVE BTDDT<RET>


                                    9-27
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   These commands create a new version of BOOT and a BTDDT that  you  can
   now  load.   The  file  must  be  loaded  into  each  front-end  on  a
   multiple-processor KL system; repeat this procedure at the CTY of each
   processor  in  an  SMP  system.  You must repeat the copying procedure
   every time you rebuild the front-end file system.

   The following procedure shows how to load BOOT into the front-end  for
   a  single-processor  KL system.  It is assumed that the front-end file
   system resides on DSKB.

         ___ ________        .LOG 1,2<RET>
         ___ ________        .RUN F11<RET>
            ___ ________________________________________        F11>PUT DSKB:[5,5]=DSKB:BOOT.EXB[10,7,BOOT]<RET>
        [DSKB will be treated as RPA0]
        +- RPA0:[5,5]BOOT.EXB;4076=DSKB:BOOT.EXB/IMAGE
            _________        F11>EXIT<RET>
        .

   Now you can bring up your new monitor with the new  BOOT.EXB  file  to
   control microcode loading by the front-end.



   9.7.2  Customizing the KS BOOT   9.7.2  Customizing the KS BOOT

   To customize BOOT for your KS system, enter  the  following  commands.
   These  commands  set  the  KS feature test switch to build BOOT for KS
   systems.  Type CTRL/Z twice to exit from COMPILE:

         _______________ ______________________        .COMPILE/COMPILE TTY:+DSK:BOOT.MAC<RET>

              ______________        MACRO:FTKL10==0<RET>
        _______________        FTKS10==-1<RET>
        ______        CTRL/Z
        ______        CTRL/Z
        .

   Next, run LINK and create KSONCE.EXE:

         _ _________        .R LINK<RET>
         ___________________________________________________        *KSONCE/SAVE=BOOT/LOCALS/SYMSEG:LOW,REL:EDDT/GO<RET>
        EXIT
        .

   Now, you can modify the control file to include a  step  that  creates
   binary  output  files  and  a  step  to  start EDDT by running KSONCE.
   Include these functions by answering the following questions with YES:

         _ ___________        .R KSONCE<RET>
        Create binary output file [Y/N]:   Enter Y or N, then
        Preserve EDDT and symbols [Y/N]:   press RETURN



                                    9-28
                           BUILDING YOUR MONITOR                           BUILDING YOUR MONITOR


   To create KSBOOT.EXE from BOOT.EXE, type the following:

         ______ ________________________        .RENAME KSBOOT.EXE=BOOT.EXE<RET>

   Refer to Chapter 6 for the appropriate dialogue used to copy the  file
   to the microprocessor file system.
















































                                    9-29

























































                                    10-1












                                 CHAPTER 10                                 CHAPTER 10

                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM



   After the TOPS-10 monitor is running, you can start the  GALAXY  batch
   and  spooling  system.   GALAXY is a set of programs that controls the
   batch system, the operator interface, the output devices, and requests
   for  the  disk and tape units of the operating system.  The components
   of the GALAXY system are:

        Module    Function

        ACTDAE    Accounting daemon

        BATCON    Batch controller

        CATLOG    Mountable device catalog daemon

        CDRIVE    Card reader spooler

        GLXLIB    Sharable GALAXY object-time system

        LPTSPL    Line printer spooler

        NEBULA    DQS Spooler

        OPR       Operator interface

        ORION     Operator interface controller

        PLEASE    User-to-operator communications program

        PULSAR    Tape and disk label processor

        QUASAR    GALAXY queue manager and scheduler

        QUEUE     User spooling and mount request program

        SPRINT    Card reader interpreter




                                    10-1
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


   10.1  STARTING THE GALAXY SPOOLERS   10.1  STARTING THE GALAXY SPOOLERS

   Whenever the system is reloaded, the  GALAXY  spoolers  must  also  be
   started.   You  can  start  the spoolers by typing commands to the OPR
   program, the operator interface for  the  GALAXY  batch  and  spooling
   system.  After reloading the system, type the following command to run
   OPR:

         _ ________        .R OPR<RET>
        OPR>

   OPR responds with its  prompt,  OPR>.   To  obtain  a  list  of  valid
   commands  to  the  OPR  program,  type  ?.   To obtain a list of valid
   arguments to any command, type the command and  a  ?.   To  start  the
   spoolers, type START:

            _____ _        OPR>START ? one of the following:
        BATCH-STREAM      CARD-PUNCH        FAL-STREAM        NODE
        NQC-STREAM        PAPER-TAPE-PUNCH  PLOTTER           PRINTER
        READER
        OPR>

   In this example, the ?  was typed to show the  possible  arguments  to
   START.  To start the new GALAXY system, use each of the arguments with
   the START command.  For example, to start batch-stream 0:

            _____ ____________ ______        OPR>START BATCH-STREAM 0<RET>

   If you receive error messages indicating that certain objects  do  not
   exist,  you  may  ignore  them.   The  message  shows  that  a certain
   configuration does not exist at your installation.  Continue with  the
   next command.

   The spoolers can be started automatically by OPR if  you  include  the
   above commands in the file SYS:SYSTEM.CMD.

   You can ensure that the appropriate GALAXY files have been started  by
   using the OPR>SHOW STATUS command.

                                             _______  __________  _______   The OPR  program  is  described  in  the  TOPS-10  Operator's  Command
   ________ _________ ______   Language Reference Manual.



   10.2  TAILORING THE GALAXY SYSTEM   10.2  TAILORING THE GALAXY SYSTEM

   This section describes the procedure for tailoring the  GALAXY  system
   to the requirements of your installation.  It describes the procedures
   necessary for running the GALGEN program, submitting the GALGEN  batch
   job, and starting the GALAXY system with the new parameters.

   It is only necessary to run GALGEN if you have made changes to  GALAXY


                                    10-2
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


   modules  that  are  affected  by  GALGEN parameters, or if you wish to
   change the default parameters described in the GALGEN  program.   Note
   that  DECnet  Version  4  support is built into the distributed GALAXY
   programs; therefore, it is not necessary  to  run  GALGEN  to  include
   DECnet support.



   10.2.1  Running GALGEN   10.2.1  Running GALGEN

   You can run GALGEN during the installation of GALAXY or  after  GALAXY
   is started.

   The GALGEN program consists of a set of questions that allows  you  to
   change  the standard configuration to match the hardware configuration
   of your installation.  If your answers to all of the GALGEN  questions
   match  the  default  answers  (shown  in  square  brackets), it is not
   necessary for you to run the GALGEN program.   The  GALGEN  dialog  is
   shown  below  in  the LONG format.  Additional explanation is provided
   for some questions.

   You can save time and effort by building the GALAXY system in your own
   disk  area.   Copy  GALGEN.EXE  into  your area before running it, and
   follow the procedure shown here:

         ___ ___________        .RUN GALGEN<RET>

   GALGEN begins by printing the following:

        GALGEN Version n(nnnn)

        [Starting GALAXY Generation Procedure for TOPS-10 System]
        [Writing GALAXY Configuration File DSKB:GALCNF.MAC[10,7]]

        In the following dialog, all questions are of the form:

          text of question (list or range of answers) [default answer]

        The line starts with the actual text of the question.   Following
        the question is a description of the possible answers enclosed in
        parentheses.  This description might be a  range  of  numbers,  a
        list  of  keywords,  or  a  textual  description.  Following this
        description is the default answer, enclosed in  square  brackets.
        The default will be assumed if you only press the RETURN key.

        You have the choice of carrying on a  LONG  dialog  in  which  an
        explanation  of  each  question  is  provided automatically, or a
        SHORT dialog in which it is assumed that you  are  familiar  with
        the  GALAXY generation procedure.  In either case, you can always
        obtain the help text by typing a question mark (?) in response to
        to any question.



                                    10-3
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


        Answer the following  question  with  either  LONG  (for  a  long
        dialog)  or  SHORT (for a short one).  Simply pressing the RETURN
        key will imply SHORT.

        Dialog Length (SHORT,LONG) [SHORT]


                     Administrative Controls and Parameters
                     -------------- -------- --- ----------


        The  questions  in  this  section   determine   absolute   GALAXY
        parameters,  which  cannot  be  overridden  by  user  or operator
        commands.

        The system logs all operator interactions in a disk file  in  the
        spooling  area.   Your answer to the following question specifies
        the name to be used for this file.

        Operator log filename (3-6 Characters) [OPERAT]

        You have the option of maintaining a  backup  master  queue  file
        which  may  be used in the unlikely event that the primary master
        queue file is destroyed.

   The backup file for the master queue file is useful if GALAXY  or  the
   master  queue file is accidentally deleted or damaged.  It records all
   the current queue jobs so that they will not be lost.

        Do you want redundant master queue file (YES,NO) [NO]

        Any permanantly mounted structure may  be  used  for  the  master
        queues.  The structure that is first in the system search list is
        preferred.

   The structure on which the master  queue  file  is  stored  should  be
   easily  accessible  by  GALAXY.   SSL is the acronym for System Search
   List.  Unless you are running a private version of GALAXY, you  should
   press RETURN for this question.

        File structure to use for master queue (3-6 Characters) [SSL]

        Users can  specify  a  priority  for  their  batch  and  spooling
        requests  with  the  /PRIORITY  switch.  The allowable values for
        this parameter range between 1 (representing lowest priority) and
        63  (representing  the  highest).   The  following  two questions
        relate to this switch.  The first question requests  the  maximum
        priority which may be specified by a non-privileged user.

        Maximum priority non-privileged users may specify (1-63) [20]

        You may specify the value to be used if the user does not specify


                                    10-4
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


        a /PRIORITY switch.  This value must be between 1 and the maximum
        that you specified in the previous question.

   A queue request that is queued without the /PRIORITY switch must  take
   a  default  priority.   The value you specify here will be used as the
   default for such requests.  The  value  must  be  between  1  and  the
   maximum  that  you  specified  in the previous question.  If you use 1
   here, users will not be able to set some requests to a  priority  that
   is  lower  than  the  default.   Therefore, it is recommended that the
   default that you specify here be greater than 1.

        Default for /PRIORITY on batch and spooling requests (1-63) [10]


                             [SYSTEM]INFO Parameters
                             ------------ ----------


        This section allows you to set any currently defined [SYSTEM]INFO
        control parameters.

        The [SYSTEM]INFO facility, which allows users to manipulate  PIDs
        for  IPCF communication by symbolic names, is now part of QUASAR.
        While [SYSTEM]INFO  normally  limits  the  maximum  length  of  a
        symbolic  PID  name  via  the  GETTAB item %IPMPL (maximum packet
        length), you have the option of specifying the maximum length  of
        a PID name allowable at all.

        Maximum length of a PID name (29-79 Characters) [39]


                                  Applications
                                  ------------


        The following section determines which optional applications  you
        wish to run on your system.  These applications will be accesible
        through OPR, the operator interface program.

        GALAXY  supports  by  default  the  CATALOG,  CONFIG,  and  QUOTA
        applications.   If  you wish to run additional applications (such
        as NCP), answer YES.

   If you answer this question  with  NO,  the  Applications  portion  of
   GALGEN is completed.

        Do you wish to run optional applications?  (YES,NO) [YES]

        The LAT Control Protocol (LCP) commands  allow  the  operator  or
        system  administrator  to  control  various aspects of Local Area
        Transport (LAT) service, and  to  display  status  and  parameter
        settings information.


                                    10-5
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


        The LCP command subset is required if your monitor is built  with
        Ethernet LAT terminal access enabled.

        Include the LAT Control Protocol (LCP) commands?  (YES,NO) [YES]

        The Network Control Protocol  (NCP)  commands  allow  the  system
        administrator   to  perform  various  DECnet  network  management
        functions.

        The NCP command subset is required if you are running DECnet-10.

        Include the  DECnet  Network  Control  Protocol  (NCP)  commands?
        (YES,NO) [YES]

        You can include  installation-developed  applications  with  your
        answers to the following questions.

        Do you  wish  to  run  any  installation-developed  applications?
        (YES,NO) [NO]

   If you answer this  question  with  YES,  GALGEN  asks  the  following
   questions:

        Specify the name of the application.  This name is used to access
        the application through OPR.

        Application name or carriage return to exit (1-20 characters)

        Each application must be associated  with  an  application  table
        name.   This  table file contains the command syntax parsing tree
        for the application.  Specify only the file name.

        Table name for application (1-6 characters)

        The code to implement  an  application  can  exist  either  as  a
        separate program (which communicates with users via ORION), or as
        an internal module within ORION itself.

        Internal ORION application?  (YES,NO) [NO]

   If you answer this  question  with  YES,  GALGEN  asks  the  following
   question:

        Please  specify  the  name   of   the   module   containing   the
        application-specific  code.   This  module  will be assembled and
        incorporated into ORION.  You need only provide  the  file  name.
        The extension of .MAC is assumed.

        Application module name (1-6 characters)

        Specify the name of the application.  This name is used to access
        the application through OPR.


                                    10-6
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


        Application name or carriage return to exit (1-20 characters)


                               Batch Job Defaults
                               ----- --- --------


        The questions in this section are used to define  default  values
        for the various options that a user can specify when submitting a
        batch job.

        The batch user can specify a maximum runtime for  his  batch  job
        using  the  /TIME switch.  If he does not specify this switch the
        following default will be used:

        Default batch job runtime limit (5-9999 seconds) [300]

        Every batch job has maximum  limits  for  each  type  of  spooled
        output.   These  limits  can  be  set  by  the  batch  user  with
        appropriate switches to the SUBMIT command.  If the user  doesn't
        specify these switches, the following defaults will be used:

        Line printer output limit (0-9999 pages) [200]
        Card punch output limit (0-9999 cards) [1000]
        Paper tape punch output limit (0-5000 feet) [200]
        Plotter output limit (0-5000 minutes) [30]

        The user can specify whether or not the batch log file should  be
        printed  after  the job terminates by using the /OUTPUT switch to
        the SUBMIT command.  The action is specified by:  LOG  to  always
        print  the log file, NOLOG to never print the log file, and ERROR
        to print the log file only if the job  ended  with  an  unhandled
        error.   If  the  user doesn't specify this switch, the following
        value will be used.

        Default for SUBMIT/OUTPUT (LOG,NOLOG,ERROR) [LOG]

        The system provides for the enforcement  of  a  maximum  physical
        memory  limit  on  batch  jobs.   The  user can specify a maximum
        memory parameter and if  any  program  attempts  to  exceed  this
        limit, the batch job goes virtual.

   If you answer the following question with NO, the Batch  Job  Defaults
   section of GALGEN is completed.

        Should memory limits be enforced (YES,NO) [YES]

        The user can specify a maximum memory limit by  using  the  /CORE
        switch.   If  this  switch  is  not  specified  by  the user, the
        following default will be used.

        Memory limit (24-16384 pages) [512]


                                    10-7
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


                      Line Printer Defaults and Parameters
                      ---- ------- -------- --- ----------


        The questions in this section are used to set default values  for
        the line printer spooler.

        Job banner pages are printed  at  the  beginning  of  each  print
        request.  The user's name and any /NOTE value is printed on them.

        Number of job banner pages (0-5) [2]

        Job trailer pages are printed at the end of each  print  request.
        The user's name and any spooler checkpoint information is printed
        on them.

        Number of job trailer pages (0-5) [2]

        File header pages are printed before each file or  copy  in  each
        print  request.  The file name is printed in BOLD letters on each
        header page.

        Number of file header pages (0-5) [2]

        The user can specify a special form for a print request with  the
        /FORMS  switch.   If  this  switch is not specified the following
        default will be used.

        Name for standard output forms (4-6 Characters) [NORMAL]

        The number  of  characters  that  uniquely  identify  a  form  is
        compared  with  the  current  form  name  to determine if a forms
        change is required for a specific user request.

        Number of characters which uniquely identifies form (2-6) [4]

   The forms type that a user specifies  when  submitting  a  request  is
   compared  with the forms type currently mounted in the printer and the
   forms type recorded in SYS:LPFORM.INI and SYS:SPFORM.INI.  Your answer
   to this question specifies the number of characters in the name of the
   forms type that qualify as a match.

        There may be site-specific devices which require  special  device
        drivers  loaded  with  LPTSPL  as  needed.  For example, the LN01
        laser printer requires the module LPTL01 in order for  LPTSPL  to
        load fonts as requested.

        Do you want to load any special printer drivers?  (YES,NO) [NO]

   If you answer this question with YES, GALGEN asks:

        Each device driver must have its own module to be loaded with the


                                    10-8
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


        LPTSPL main module.  This module's .REL file must be found on the
        build areas when LPTSPL is loaded.

        Name of device driver module (1-6 characters)
        Any more special drivers to load (YES,NO) [NO]
|  
|       There may be site specific  hard  copy  terminal  printers  which
|       function  as  LA120  or  LA180 equivalents, but have non-standard
|       names.  LPTSPL must be told to recognize these names.
|  
|                                 *** NOTE ***
|  
|       The use of non-standard hard copy terminals is supported only  if
|       the terminal is functionally equivalent to an LA120 or an LA180.
|  
|       Do you want to use non-standard terminal printers  (YES,NO)  [NO]
|       yes
|  
|  If you answer YES, GALGEN asks for the name of the terminal:
|  
|       Name of terminal (1-6 Characters)
|       Any more terminals (YES,NO) [NO]


                               Parameters for MDA
                               ---------- --- ---


        The questions in  this  section  are  used  to  set  the  default
        parameters for the Mountable Device Allocator (MDA).

        The  following  question  allows  you  to  enable  the   deadlock
        avoidance  code in MDA.  This code prevents jobs from waiting for
        tape or disk resources that another job may already own, or  that
        do not exist.  Enabling the deadlock avoidance code causes MDA to
        use slightly more CPU time to  insure  that  deadlocks  will  not
        occur.

        Enable deadlock avoidance?  (YES,NO) [YES]

        You have the  option  of  specifying  which  label  type  is  the
        default.

                                      NOTE:
        Label type USER-EOT will allow a user program to see the  end  of
        tape  condition on an UNLABELED tape only.  All other label types
        will  cause  the  user  to  block  at  end  of  tape  while   MDA
        automatically  expands  the  volume  set.   In this case the user
        program will NOT see end of tape.


        Default  tape  label  type   (ANSI,BYPASS,IBM,USER-EOT,UNLABELED)


                                    10-9
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


        [USER-EOT]

        You have the option of specifying the default  density  at  which
        tapes are read and written.

        Default 9-track tape density (200,556,800,1600,6250) [1600]
        Default 7-track tape density (200,556,800) [800]

        You have the option of specifying the default track type on which
        to mount tapes.

        Default track type (7,9) [9]

        The system administrator can allow non-privileged users to bypass
        label processing.

        Allow bypassing for non-privileged users?  (YES,NO) [NO]

   When   mounting   a   labeled   tape,   a   user   can   include   the
   /LABEL-TYPE:BYPASS  switch  to specify that the tape label be ignored.
   If you want this function to be restricted to privileged users, answer
   NO  to  this  question.  If you want all users to be able to mount any
   tape regardless of the label type, answer YES to this question.


                      Miscellaneous Defaults and Parameters
                      ------------- -------- --- ----------


        The questions in this section refer to general GALAXY parameters.

        The following section establishes default bias and disk  page  to
        spooler unit conversion factors.

        Do you want the standard limit computation (YES,NO) [YES]

   This question refers to disk page conversion to spooler units.   (Note
   that  one  disk page equals four disk blocks.) If you do not want this
   conversion, answer NO to the  question.   If  you  answer  NO,  GALGEN
   prints  the  following  and  prompts  you  for a value for each output
   device.

        The default output limit of a spooled file is calculated as:

            limit = disk blocks * units per disk block * copies

        The output limit is expressed in pages for the printer, cards for
        the  card  punch, minutes for the plotter, and feet for the paper
        tape punch.  The following  questions  establish  the  number  of
        units of output per disk page.

        Number of printed pages per disk block [.7]


                                   10-10
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


        Number of punched cards per disk block [8]
        Minutes of plotter output per disk block [0.07]
        Feet of paper tape per disk block [7]

        The default action to be taken when output exceeds the  specified
        limit  for  an  output spooler may be to ABORT the job and ignore
        all remaining output, ASK the operator what to do, or PROCEED  to
        finish processing the job.

        Default output-limit-exceeded action (ABORT,ASK,PROCEED) [ASK]

        If file access between network nodes is to be done,  each  FAL  -
        file  access  listener  -  stream needs a network type associated
        with it.  The network types supported are ANF-10 and DECnet.

        Default network-type for FAL streams (ANF-10,DECnet) [ANF-10]

        Galaxy-10 spoolers (object processors) are now grouped into three
        categories  and  are  started  (logged-in  and  run) by QUASAR at
        different times depending on which category they fall into.   The
        three categories and their corresponding characteristics are:

        %ONCE  - "fired up" by QUASAR after QUASAR starts ORION,  PULSAR,
                 and CATLOG.  The spooler will never logout on its own.

        %STCMD - "fired up" by QUASAR when an OPR START command is issued
                 for  a  stream  controlled  by the spooler.  The spooler
                 will logout when all streams under its control are  shut
                 down.

        %DEMND - "fired up" by QUASAR when a job is in a queue  that  can
                 be  serviced by one of the spooler's job streams.  These
                 "demand" spoolers  will  logout  after  "n"  minutes  of
                 idleness.   You will be prompted below to define a value
                 for "n".

        The PRCDAT macro in QSRMAC.MAC defines the category to which each
        supported object processor/spooler belongs.

        Number of minutes "demand" spoolers tolerate idleness (5-60) [10]

        Your site may wish to include additional symbols and values which
        are  different from Digital's standard ones.  By specifying these
        values here, you may further tailor  GALAXY  to  your  particular
        installation.

        Do you wish to enter any site specific parameters?  (YES,NO) [NO]

   If you answer this question with YES, GALGEN prints the following:

        The parameters are entered as lines of text in a form  acceptable
        for assembly by MACRO-10.  Valid examples are:


                                   10-11
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


                  XP   SYMBOL,EXPRESSION  ;comment
                  ND   SYMBOL,EXPRESSION  ;comment
                  SYMBOL==EXPRESSION      ;comment

        Where SYMBOL is a legal symbol name for MACRO-10, and  EXPRESSION
        is  any  valid  MACRO-10  expression consisting of symbols and/or
        constants.  The comment is any arbitrary string beginning with  a
        semicolon.

        Enter site specific parameter text:  (Empty line to end.)

        [End of GALGEN Dialog]

   When the dialog is finished, GALGEN writes the output file  GALCNF.MAC
   into the disk area.  Use this output file to configure your new GALAXY
   system.



   10.2.2  Assembling the Tailored GALAXY System   10.2.2  Assembling the Tailored GALAXY System

   Use the batch control file (GALAXY.CTL) provided to assemble  the  new
   GALAXY  system.  To submit a batch job, the GALAXY system and spoolers
   must be running.  GALAXY is usually started at system startup from the
   SYSJOB.INI  or  OPR.ATO  file.   You should create one of these files,
   reload the system, and start the  GALAXY  spoolers  (as  described  in
   Section 10.1).

   The GALAXY components listed below  should  be  started  automatically
   whenever  the system is reloaded.  You can accomplish this by creating
   a file named SYSJOB.INI, and  including  the  commands  to  start  the
   components  in that file.  SYSJOB.INI is described in Chapter 12.  The
   GALAXY components that must  be  started  automatically  whenever  the
   system is reloaded are:

        ACTDAE
        QUASAR

   The batch control file (GALAXY.CTL) that is included on the CUSP  tape
   uses  the  GALCNF.MAC file to generate a GALAXY system.  The batch job
   will generate the appropriate .EXE files for the GALAXY system.   Copy
   the batch control file into your area and submit it from there.

   To start the batch job, type the monitor command and press RETURN:

         ______ ________________________        .SUBMIT GALAXY/TIME/RESTART<RET>

   If the batch job ends in an error, try to correct  the  control  file,
   then  delete  the .LOG file and submit the control file again.  If the
   error  occurs  again,  consult  a  software   specialist   or   system
   programmer.



                                   10-12
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


                                    NOTE

           It is important that the batch job  run  successfully.
           Check  the  log  file  carefully  to  be  sure that no
           warning (%) errors occurred.  These errors do not  end
           the job but may cause problems later.

   When the batch job finishes successfully, a series of messages will be
   printed  on  the operator's terminal.  One message will be printed for
   each component of the GALAXY system as it is created.

   When the components are successfully created, they  are  ready  to  be
   copied  into  SYS.   Note that the system should be stand-alone during
   this  process  because  no  users  can  submit  requests  during  this
   procedure.



   10.3  SHUTTING DOWN THE GALAXY SYSTEM   10.3  SHUTTING DOWN THE GALAXY SYSTEM

   If a GALAXY system is already running, you must shut  it  down  before
   replacing it with new GALAXY modules.  Before shutting down the GALAXY
   system, you should obtain exclusive use of  the  operating  system  by
   scheduling stand-alone time for this purpose or by ending timesharing.

   Using the OPR program, stop the GALAXY system.  To run OPR,  type  the
   following command and press RETURN:

         _ ________        .R OPR<RET>
        OPR>

   OPR responds with its  prompt,  OPR>.   To  obtain  a  list  of  valid
   commands  to the OPR program, type ?  at this point.  To obtain a list
   of valid arguments to any command, type the command and a ?.

            ________ _        OPR>SHUTDOWN ? one of the following:
        BATCH-STREAM      CARD-PUNCH        FAL-STREAM        NODE
        NQC-STREAM        PAPER-TAPE-PUNCH  PLOTTER           PRINTER
        READER
        OPR>

   In this example, a ?  was typed to show all the possible arguments  to
   the  SHUTDOWN  command.   To  stop  all  the  components of the GALAXY
   system, type the  SHUTDOWN  command  followed  by  the  name  of  each
   component.  For example:

            ________ ____________ ______        OPR>SHUTDOWN BATCH-STREAM n<RET>
            ________ __________ ______        OPR>SHUTDOWN CARD-PUNCH n<RET>
                          .
                          .
                          .
            ________ _______ ______        OPR>SHUTDOWN PRINTER n<RET>


                                   10-13
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


            ________ ______ ______        OPR>SHUTDOWN READER n<RET>

   During this procedure, OPR may print the  following  message  on  your
   terminal:

        --There are no devices started--

   In this case, there were no devices on line for that  component.   You
   can ignore the message and go on to the next command.

   After you shut down all the components, exit from OPR.  Type EXIT  and
   press RETURN:

            _________        OPR>EXIT<RET>
        .

   After returning to monitor level, use the SYSTAT  monitor  command  to
   determine  the  jobs that are running for GALAXY.  The GALAXY jobs may
   be named any or all of the following:

        CDRIVE
        CATLOG
        NEBULA
        IBMSPL

   Using the ATTACH command, attach to each job and log it out.

   The GALAXY programs that are currently running must now be copied to a
   backup  area  from  SYS.  In the following example, they are copied to
   OLD ([1,3]).

      ____ ___________________________________________________________     .COPY [1,3]=[1,4]CDRIVE.EXE,CATLOG.EXE,NEBULA.EXE,IBMSPL.EXE<RET>

     .

   You must also delete the master queue files.  The master  queue  files
   can be deleted with the following command:

         ______ _________________        .DELETE SYS:QSRMS1.*<RET>

        FILES DELETED:
        SYS:QSRMS1.QSR
        221 BLOCKS FREED

   Now you can copy the new files to SYS and  bring  up  the  new  GALAXY
   system.



   10.4  STARTING THE GALAXY SYSTEM   10.4  STARTING THE GALAXY SYSTEM

   After you stop the old GALAXY system, you can  start  the  new  GALAXY


                                   10-14
                STARTING UP AND TAILORING THE GALAXY SYSTEM                STARTING UP AND TAILORING THE GALAXY SYSTEM


   system.   The first step is to copy all the new GALAXY files into SYS.
   The new files will automatically supersede the old files in SYS.   Use
   the COPY command to copy all the .EXE files from your area to SYS.

         ____ _______________        .COPY SYS:=*.EXE<RET>

   You can start the GALAXY programs  by  reloading  the  system  if  the
   system  has  a  file  SYS:SYSJOB.INI that logs in the system programs.
   The SYSJOB.INI file is described in Chapter 12.  To start  the  GALAXY
   programs  manually,  reload the system by typing CTRL/\ on the CTY and
   typing the SHUTDOWN command to the parser.  Then reload the system, as
   demonstrated here:

        ________        <CTRL/\>

            _____________        PAR>SHUTDOWN<RET>

        DECsystem-10 not running

        [Dumping on DSKB:CRASH.EXE[1,4]]

        [Loading from DSK:SYSTEM.EXE[1,4]]

        TOPS-10 704 Development mmm-dd-yy

                   __________        Why reload:SCHED<RET>
             ______________        Date:NOV-29-87<RET>
             __________        Time:17:55<RET>

                       _______        Startup option:GO<RET>

        TOPS-10 704 Development NOV-29-87
        .

   Now log in with the PPN [1,2] and start  up  the  GALAXY  spoolers  by
   running the OPR program, as described in Section 10.1.


















                                   10-15

























































                                    11-1












                                 CHAPTER 11                                 CHAPTER 11

                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE



   The REACT program enables you to  maintain  the  system  authorization
   file, ACTDAE.SYS.  This chapter describes how to use REACT commands to
   create, change, and delete user accounts.  It also  describes  how  to
   update  the master accounting file, and enable account validation.  To
   change  user  accounts  with  REACT,  you  must  have   administrative
   privileges (JP.ADM in JBTPRV).

   The REACT Command Tables at the end  of  this  chapter  provide  quick
   reference to the commands discussed in Sections 11.4 through 11.8.



   11.1  CONVERTING OLD ACCOUNTING FILES   11.1  CONVERTING OLD ACCOUNTING FILES

   The REACT shipped with TOPS-10 Version 7.04 requires that you use  the
   ACTDAE.SYS  accounting  file.   If your system currently uses ACCT.SYS
   and AUXACC.SYS files, you can use a program called  NEWACT  to  create
   the new accounting file, ACTDAE.SYS.

   To convert ACCT.SYS and AUXACC.SYS files to the ACTDAE.SYS format, use
   the NEWACT program as shown below:

        1.  Run NEWACT.

            NEWACT looks up the ACCT.SYS, AUXACC.SYS, and USERS.TXT files
            and uses the information in them to create the new ACTDAE.SYS
            file.  If you  do  not  want  the  information  in  USERS.TXT
            included  in  your  new accounting file, delete the USERS.TXT
            file.

        2.  Copy the new ACTDAE.SYS file to SYS.








                                    11-1
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   11.2  ENTERING AND EXITING REACT   11.2  ENTERING AND EXITING REACT

   The following examples show how to enter and exit the REACT program.

   To enter REACT type the following:

         _ __________        .R REACT<RET>
        REACT>

   To exit the REACT program and return to monitor  command  level,  type
   EXIT and press RETURN:

              _________        REACT>EXIT<RET>
        .



   11.3  GETTING HELP WHILE USING REACT   11.3  GETTING HELP WHILE USING REACT

   There are three different ways to get help while using REACT:   typing
   a question mark, typing HELP, and pressing the ESCape key.

   For information  about  REACT  top-level  commands,  you  can  type  a
   question mark to display a list of the command keywords:

         _ __________        .R REACT<RET>
              _        REACT>?  one of the following:
        CHANGE DELETE EXIT HELP INSERT LIST LOCK PURGE SELECT SHOW
        UNLOCK VERIFY

   If you type HELP and press return, REACT will print out a list of  the
   commands and a brief description of each:

              _________        REACT>HELP<RET>
                               Help for REACT %33B(242)
        CHANGE       Change profile entries
        DELETE       Delete a profile
        EXIT         Exit program
        HELP         Gives information on commands
        INSERT       Insert a profile into the accounting file
        LIST         Write profile information to a file
        LOCK         Lock accounting file against updates
        PURGE        Purge expired profiles
        SELECT       Select wildcarding criteria
        SHOW         Display profile information on the terminal
        UNLOCK       Unlock accounting file to allow updates
        VERIFY       Verify the accounting file from a master file

   If you type HELP and a command name, REACT provides a  description  of
   that command:

              ____ ___________        REACT>HELP CHANGE<RET>


                                    11-2
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


                               Help for REACT %33B(242) - CHANGE
        The CHANGE command enables you to enter user mode and modify user
        profiles.  The syntax is:  CHANGE user-id

   Once you  have  entered  enough  characters  to  uniquely  identify  a
   command, you may press the ESCape key.  When you press the ESCape key,
   REACT completes the rest of the command name  for  you,  and  provides
   guidewords  in parentheses to help you complete the command line.  For
   example, if you type 'cha' and press the ESCape key:

              ________        REACT>cha<ESC>
        REACT>chaNGE (user-id)

   Table 11-2 provides a complete list of top-level  commands  and  their
   functions.

   When you are in user-mode, type a question mark to display commands:

              ______ _____________        REACT>CHANGE [27,150]<RET>
             _        USER>?  one of the following:
        ACCESS-TYPES           CONTEXT-QUOTAS      CORE-LIMITS
        DISTRIBUTION-LOCATION  ENQ-DEQ-QUOTA       EXPIRATION-DATE
        IPCF-QUOTAS            LOGIN-TIMES         MAILING-ADDRESS
        NAME                   PASSWORD            PERSONAL-NAME
        PRIVILEGES             PROFILE-DEFAULT     PROGRAM-TO-RUN
        REQUIREMENTS           SCHEDULAR-TYPE      SPOOLED-DEVICES
        STRUCTURE-QUOTAS       WATCH-BITS
          or one of the following:
        DEFAULT  DONE     HELP     QUIT     RESTORE   SHOW

   In user-mode, you may ask for HELP on specific commands:

             ____ _________________        USER>HELP ACCESS-TYPES<RET>

        ACCESS-TYPES  specifies  the  types  of  access  allowed  to  the
        specified  user.   ACCESS  refers  to any attempt by a user or in
        behalf of a user to gain access to the  system  using  a  correct
        combination of user-id and password.

   You may also use the ESCape  key  when  you  are  in  user-mode.   For
   example, if you type 'acc' and press the ESCape key:

             ________        USER>acc<ESC>
        USER>accESS-TYPES (allowed)



   11.4  DISPLAYING USER ACCOUNT INFORMATION   11.4  DISPLAYING USER ACCOUNT INFORMATION

   The SHOW command  displays  information  about  users  listed  in  the
   accounting file.  To display a user's profile, type the following:



                                    11-3
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


        REACT>SHOW user-id/switch<RET>

   Where user-id can be the user name  or  PPN  of  an  existing  account
   profile.  You may optionally include one of the following switches:

        /DETAIL  lists all user profile information (default)
        /FAST    lists only the user-name and PPN

   Characteristics of the profile that have not  been  changed  from  the
   default  are  designated  by an asterisk at the beginning of the line.
   An example of a user profile is included in Section 11.5.2.



   11.5  CREATING NEW ACCOUNTS   11.5  CREATING NEW ACCOUNTS

   The INSERT command allows you to create new  accounts,  singly  or  in
   groups,  and to define the attributes of the accounts you create.  The
   attributes you define for a user's account make up the user's profile.
   You must specify a user-id when you use the INSERT command.



   11.5.1  Creating Multiple Accounts with the Same Project Number   11.5.1  Creating Multiple Accounts with the Same Project Number

   You can create a group of accounts with the same  project  number  and
   different  programmer  numbers, using the INSERT command.  To do this,
   you supply a wildcard character (*) for the programmer number.

   The example below shows how to create a group of 5 accounts  with  the
   project  number  25,  programmer  numbers  100  through 500, using the
   default profile, with names and passwords supplied by REACT.

         _ __________        .R REACT<RET>
              ______ ___________        REACT>INSERT [25,*]<RET>
                                 ________        Base programmer number:  100<RET>

   Supply the first programmer number in the series you want to create.

                                      ________        Programmer number increment:  100<RET>

   Supply the number to increment each programmer number.   By  selecting
   100,  the programmer number for the first account, n, will be 100; for
   the second account, n+100; for the third account n+100+100; and so on.

                                  ______        Count of PPNs to insert:  5<RET>

   Supply the number of PPNs you wish to create.

                                 ______        Prompt for user's name?  N<RET>

   Respond YES if you want REACT to prompt you for the user name for each


                                    11-4
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   account  you  create.   If you respond NO, REACT generates a user name
   for each account it generates in this series, but you may  change  the
   name later.

                              ______        Prompt for password?  N<RET>

   Enter YES if you want REACT to prompt you for the  password  for  each
   account  you  create.   If  you  enter  NO,  REACT  generates a random
   password for each account it creates  in  this  series,  but  you  may
   change the password later.  REACT creates the accounts:

        [READPL Default profile loaded:  [%,%]]
         User [25,100] 25,100 inserted with password GLAMDIRK
         User [25,200] 25,200 inserted with password SNAKAIZ
         User [25,300] 25,300 inserted with password RENGLYPCH
         User [25,400] 25,400 inserted with password IZMOPWIQ
         User [25,500] 25,500 inserted with password FILZNIKR
         A total of 5 users inserted
        REACT>

   To SHOW the accounts you just created, type the SHOW command  followed
   by the [project number, wildcard character]/SWITCH and press RETURN:

              ____ ________________        REACT>SHOW [25,*]/FAST<RET>
        25,100  25,100
        25,200  25,200
        25,300  25,300
        25,400  25,400
        25,500  25,500
         A total of 5 users listed
        REACT>



   11.5.2  Creating a Single New User Account   11.5.2  Creating a Single New User Account

   To create a single new user account,  type  INSERT,  followed  by  the
   user-id.   If  you  aren't sure which programmer numbers are available
   within a specific project number group, you can use the  SHOW  command
   combined with the switch /FAST to suppress profile information:

              ____ ________________        REACT>SHOW [27,*]/FAST<RET>
        27,100  OLDUSER
        27,200  VERYOLDUSER
        27,300  ANCIENTUSER
         A total of 3 users listed
        REACT>

   When you create a new account, the user-id may be a user name or  PPN.
   After  entering  the user name, you may supply an existing user-id for
   REACT to use as a model for the new profile.  If you do not supply  an
   existing  user-id,  REACT  uses a default profile to establish initial


                                    11-5
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   values for the account attributes.  The  following  examples  use  the
   name  NEWUSER for the new-user-id, and, in the second example, OLDUSER
   for the existing-user-id:

              ______ ____________        REACT>INSERT NEWUSER<RET>
                       _____________        New user PPN:  [27,150]<RET>
   or
              ______ ____________________        REACT>INSERT NEWUSER=OLDUSER<RET>
                       _____________        New user PPN:  [27,150]<RET>

   If the new-user-id has already been assigned, REACT  prints  an  error
   message:

        %REANAE Name NEWUSER is already taken by [P,PN]
        REACT>

   If the new-user-id is valid, but the PPN you have specified is already
   assigned, REACT prints an error message:

        %REAPAE PPN [P,PN] is already taken by OTHERUSER
        REACT>

   If both the new-user-id and the PPN are valid, and  if  you  have  not
   supplied  an  existing user-id to use as a model, REACT uses a default
   profile to establish initial values for the account attributes.  After
   either  of  these  have  been done, REACT enters user mode and you can
   make changes to any of the attributes that do not fit the requirements
   of the new user.

   The following example shows how to create an account for user  NEWUSER
   using the default profile:

              ______ ____________        REACT>INSERT NEWUSER<RET>
                       _____________        New user PPN:  [27,150]<RET>
        [READPL Default profile loaded:[27,%]]
        USER>

   To display the default profile attributes of NEWUSER's  account,  type
   the SHOW command and press RETURN at the USER> prompt:

             _________        USER>SHOW<RET>
           PPN:  [27,150]
           User name:  NEWUSER
           Profile default:  [27,%] or [%,%]
         * Personal name:  -none-
         * Distribution location:  -none-
         * Mailing address:  -none-
         * Expiration date:  -none-
         * LOGIN times:  Weekdays 0:23  Weekends 0:23
         * Access types:  Card reader, Network file  access,  Local,  ANF
           CTY, Dataset, Remote, Subjob of batch, Batch
         * Requirements for LOGIN:


                                    11-6
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


                Account and remark strings are not required
                Name is not required
                Password under timesharing and batch
                Password change at next LOGIN
                Minimum password length:  6
                Password change interval:  Every 90 days
                Password changes are allowed
         * Schedular type:  0
         * Program to run:  -none-
         * Context-quotas:  Context 4, Total pages 512
         * Core limits:  Physical 512, Virtual 512
         * ENQ/DEQ quota:  100
         * IPCF quotas:  Send 2, Receive 5, PIDs 2
         * Privileges:  Disk priority:  3,  HPQ:   15,  System  operator,
           ENQ-DEQ,  IPCF,  LOCK,  METER, CPU, SPY-all-core, SPY-monitor,
           Unspooling
         * Spooled device bits:  CDP, CDR, LPT, PLT, PTP
         * Watch-bits:  MTA
         * Structure quotas:
           Structure  Quota in  Quota out  Reserved  Status
           ---------  --------  ---------  --------  ------
             DSKB        80000      20000         0
             DSKC        80000      20000         0
           Administrative data:
           Profile last changed by [27,300] at 29-Sep-87 14:33:20
           Last access -never-
           Last password change 29-Sep-87 14:33:20

   Complete the insertion with the command DONE:

             _________        USER>DONE<RET>
         User [27,150] newuser inserted with password poobah
         A total of one user inserted
        REACT>

   To modify  any  of  the  attributes  of  NEWUSER's  account,  see  the
   description of user-mode commands in the next section.



   11.6  CHANGING ACCOUNTS   11.6  CHANGING ACCOUNTS

   The CHANGE command allows you to modify the attributes of an  existing
   user  profile.   Before  you  change a user's profile, you may want to
   display the profile to check the current values and settings.  Use the
   SHOW command and supply a user-id to display a profile.

   To modify user NEWUSER's profile,  type  CHANGE  and  the  user-id  or
   [P,PN]  and press RETURN.  After you have made changes, enter DONE and
   press  RETURN.   The  following  example  shows  how  to  change   the
   expiration date of NEWUSER's account:



                                    11-7
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


              ______ _____________        REACT>CHANGE [27,150]<RET>
             _        USER>?  one of the following:
        ACCESS-TYPES           CONTEXT-QUOTAS      CORE-LIMITS
        DISTRIBUTION-LOCATION  ENQ-DEQ-QUOTA       EXPIRATION DATE
        IPCF-QUOTAS            LOGIN-TIMES         MAILING-ADDRESS
        NAME                   PASSWORD            PERSONAL-NAME
        PRIVILEGES             PROFILE-DEFAULT     PROGRAM-TO-RUN
        REQUIREMENTS           SCHEDULAR-TYPE      SPOOLED-DEVICES
        STRUCTURE-QUOTAS       WATCH-BITS
          or one of the following:
        DEFAULT     DONE     HELP     QUIT     RESTORE     SHOW
             _______________ ______________        USER>EXPIRATION-DATE 31-DEC-89<RET>
             _________        USER>DONE<RET>
         User [27,150] newuser changed
         A total of one user changed
        REACT>



   11.7  DELETING ACCOUNTS   11.7  DELETING ACCOUNTS

   The DELETE command removes a user account from  ACTDAE.SYS.   You  can
   use  wildcards  in  a  PPN to delete multiple accounts.  The following
   example deletes user NEWUSER's account.

              ____ _________________        REACT>SHOW NEWUSER/FAST<RET>
             27,150    NEWUSER
         A total of one user listed
              ______ _____________        REACT>DELETE [27,150]<RET>

   REACT responds with:

        User [27,150] newuser, expiration date:  31-Dec-89
        Are you sure?

   This question prevents you from accidentally deleting  accounts.   You
   can  respond  to this question with NO, QUIT, SHOW, or YES.  Use NO or
   QUIT if you do not want to delete the account.  Use  SHOW  to  display
   the profile (the question "Are you sure?" will be repeated).  Type YES
   only if you want to delete the account.  If you type YES, REACT prints
   the following messages:

                        ________         Are you sure?  YES<RET>
         User [27,150] newuser deleted
         A total of one user deleted.
        REACT>

   Use the SHOW command to check that you  have  deleted  user  NEWUSER's
   account.

              ____ ____________        REACT>SHOW NEWUSER<RET>
        ?REANSU No such user newuser


                                    11-8
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   11.8  VERIFYING CHANGES TO ACCOUNTING FILES   11.8  VERIFYING CHANGES TO ACCOUNTING FILES

   To use the VERIFY command, you must first have a copy of ACTDAE.SYS in
   your  disk  area to use as a master accounting file.  The default file
   name for this copy is MASTER.SYS.  The VERIFY command is used to check
   for  differences  between  the master file (MASTER.SYS) and the system
   file (ACTDAE.SYS), and to update MASTER.SYS to reflect  valid  changes
   that  have  been  made  to  ACTDAE.SYS.   You can list the differences
   between the two files and then decide whether or not you want REACT to
   update MASTER.SYS.

   Before issuing the VERIFY command to REACT, you must lock  ACTDAE.SYS.
   Issuing  the  LOCK  command  opens  ACTDAE.SYS  in  read-only mode and
   prevents other users from making changes to it while you are  updating
   the master file.  To lock ACTDAE.SYS, type LOCK and press RETURN:

              _________        REACT>LOCK<RET>
        [REALOK Accounting file locked; changes are prohibited]
        REACT>

   To use the VERIFY command, type the following command to REACT:

        REACT>VERIFY master-file user-id/switch<RET>

   You may include a user-id (user name or  PPN)  after  the  master-file
   name, to check only that user profile against the same user profile in
   ACTDAE.SYS.  If you include a PPN,  you  can  also  use  the  wildcard
   character (*) to VERIFY a group of accounts.

   You may also include one or more of the following switches:

        /REPORT        Lists the account attributes of user profiles that
                       are different from those in the system file.  This
                       action is taken by default.

        /NOREPORT      Does not list the account attributes of  the  user
                       profiles that are different from the system file.

        /UPDATE        Allows you to update the master file with  changes
                       from  the  system  file.  This is the default, but
                       after listing the differences between  the  master
                       file  and  the system file, REACT will ask whether
                       or not you want to UPDATE the master file.

        /NOUPDATE      Does not allow you to update the master file  with
                       changes from the system file.

   To list differences throughout the entire master file, for all users:

              ______ _______________        REACT>VERIFY MASTER.SYS<RET>

        Master file:           DSKC:MASTER.SYS[1,2]


                                    11-9
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


        Accounting file:       DSKA:ACTDAE.SYS[1,4]
        Temporary file:        DSKC:039REA.TMP[1,2]
        Verifying:             [*,*] /REPORT /UPDATE

   REACT lists the profile information for any  user  profiles  that  are
   different  from the system accounting file.  This listing is identical
   to the display from the SHOW command, illustrated in  Section  11.5.2.
   Then,  to  make  sure you want to UPDATE the master file, REACT prints
   the following question:

        Preserve changes?

   You can respond with NO, QUIT, SHOW, or YES.  If you  want  to  delete
   the  changes  from  your master file, type NO or QUIT.  To display the
   changes, type SHOW.  If you want to keep the changes, type YES.

   Then, unlock ACTDAE.SYS:

              ___________        REACT>UNLOCK<RET>
        [REAUNL Accounting file unlocked; changes are permitted]



   11.9  USING ACCOUNT VALIDATION   11.9  USING ACCOUNT VALIDATION

   The USAGE file accounting system provides ASCII files containing  data
   useful  in billing users for system usage.  The accounting daemon (the
   ACTDAE program) can provide validation of account strings  when  users
   log in, and write usage data in the USAGE files.

   For details on the format of the USAGE  file  entries,  refer  to  the
   __________  _____ ____ _____________   TOPS-10/20  USAGE File Specification.  The following sections describe
   the procedure for enabling account validation.

   To enable account validation, do the following:

        1.  Answer Y to Question 10 in the SYSGEN portion of MONGEN

        2.  Require  account  validation  for  LOGIN  for  each  PPN   in
            ACTDAE.SYS.

        3.  Create the account validation file PROJCT.ACT.

        4.  Run  the  program  PROJCT.EXE  to  convert  PROJCT.ACT   into
            PROJCT.SYS.

        5.  Copy PROJCT.SYS into ersatz device SYS: (PPN is [1,4]).







                                   11-10
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   11.9.1  CREATING THE PROJCT.ACT FILE   11.9.1  CREATING THE PROJCT.ACT FILE

   PROJCT.ACT is an ASCII  file  you  can  create  to  associate  account
   strings with PPNs.  The format of each line in PROJCT.ACT is:

        [P,PN]=ACCOUNT1,ACCOUNT2,ACCOUNT3,...

   You can use the * and ? wildcard characters  in  the  PPNs.   You  can
   substitute  the  * for either the project number or programmer number,
   or both.  You can substitute the ? for a single digit in the PPN.

   For example,  the  PPN  definition  [27?,3007]  would  define  account
   strings  for [27n,3007], where 'n' equals any number from 0 to 7.  The
   PPN definition [27,*] would define account strings for all  programmer
   numbers with the project number 27, or [27,n] through [27,nnnnnn].

   A single PPN can be defined to accept any number of  account  strings,
   each  of  which  is  an  ASCII  sequence  of  up  to 39 alphanumerical
   characters.  The account strings must match  user  input  (at  LOGIN),
   exactly,  including  the  casing  of  letters.   If the account string
   definition in PROJCT.ACT is all uppercase, for example, the user  must
   type the account string in all uppercase form.

   You can allow the user to log in without typing an account  string  by
   defining  a  default  account  string  for  the PPN.  Use the /DEFAULT
   switch after one of the account strings that is valid for  the  user's
   PPN.   Then,  when  the user logs in, (s)he can simply press RETURN in
   response to the ACCOUNT: prompt.  The session will be charged  to  the
   default account string.  For example, the following account definition
   allows the user to default accounting data to the first account string
   in the definition (PUBLICATIONS):

        [27,5434]=PUBLICATIONS/DEFAULT,MARKETING,MAINTENANCE

   The PPN entries in the  PROJCT.ACT  file  must  occur  in  numerically
   ascending  order.   In  the  case  of  wildcard  characters,  the * is
   equivalent to 777777, and the ? is equivalent to a 7.  In  case  of  a
   conflict  between  a  wildcarded  number  and  an explicit number, the
   wildcarded PPN  must  follow  the  explicit  PPN.   For  example,  the
   following order is valid:

        [10,10]=ABC
        [10,2370]=DEF,GHI
        [10,23??]=FOO
        [10,*]=GHI
        [*,*]=JKL

   Note that, under this scheme, the user with PPN [10,10] may not log in
   with  account string JKL, because an explicit definition overrides any
   subsequent definitions.  However, the user with PPN [10,2370] can  log
   in  with account string GHI, because any number of account strings can
   be valid for a single PPN.


                                   11-11
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   Account strings can also contain wildcard characters.  The  *  in  the
   account  string  definition denotes account strings with any number of
   characters (or no characters) to replace it.  However, when  the  ? is
   used  to  replace  a  character,  it  must  be matched by a character.
   Therefore, the account string ABC??FG* can be matched only by  account
   strings containing ABC for the first three characters, followed by any
   two characters, containing FG for the sixth  and  seventh  characters,
   followed by no more or any number of characters.



   11.9.2  CREATING THE PROJCT.EXE FILE   11.9.2  CREATING THE PROJCT.EXE FILE

   After you create  PROJCT.ACT,  and  ensure  that  it  exists  in  your
   directory path, run the PROJCT.EXE program as shown below:

         _ ___________        .R PROJCT<RET>

        END OF JOB
        EXIT
        .

   If an error occurs  during  processing  the  PROJCT.ACT  file,  PROJCT
   displays  a message indicating the field or problem in the input file.
   Edit the PROJCT.ACT file to correct the problem, and run PROJCT again.
   When  successful,  PROJCT creates the PROJCT.SYS file.  Copy this file
   into SYS:

   When account validation  has  been  enabled,  the  user  will  see  an
   additional   prompt  in  the  LOGIN  dialogue  (ACCOUNT:),  after  the
                               _______ _________ ______  ________  ______   PASSWORD:  prompt.  See the TOPS-10 Operating System  Commands  Manual
   for more information.



   11.10  MAINTAINING LOGIN FAILURE RECORDS   11.10  MAINTAINING LOGIN FAILURE RECORDS

   REACT uses the FAILUR.LOG file to maintain records on login  failures.
   All  records  in  the  FAILUR.LOG file are written in 7-bit ASCII, and
   vary in length.  All validation failure entries have the  same  format
   for  the  first eleven fields.  The following table explains the first
   eleven fields of the FAILUR.LOG file:












                                   11-12
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   Table 11-1:  FAILUR.LOG File Format   Table 11-1:  FAILUR.LOG File Format



   ______________________________________________________________________

     Field
     Number Position  Data Type    Contents
   ______________________________________________________________________

     1      001       Octal        Error code, as defined in ACTSYM

     2      003       Decimal      Date and time, in same format as
                                   USAGE entries

     3      017       Decimal      Job number of QUEUE./IPCF sender

     4      020       Octal        PPN (left half) of above job

     5      026       Octal        PPN (right half) of above job

     6      032       ASCII        12 character name of above job

     7      044       ASCII        6 character program name

     8      050       ASCII        TTY name (for example, TTY45)

     9      056       ASCII        Node name of job (ANF-10, DECnet, or
                                   LAT)

     10     072       ASCII        Line name on above node

     11     075       Octal        Asynchronous Port Characteristic
                                   (APC) code


     The format for fields that end the Invalid account string (1)  and
     Invalid password (6) error entries is shown below.

     12     077       Octal        PPN (left half) whose account string
                                   was invalid

     13     083       Octal        PPN (right half) whose account
                                   string was invalid

     The job not privileged entry (3) only contains the first 11 fields
     because the job number is already specified.
   ______________________________________________________________________






                                   11-13
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   11.11  TOP-LEVEL REACT COMMANDS   11.11  TOP-LEVEL REACT COMMANDS

   The following table describes the basic action Commands for  creating,
   changing,  and  deleting  accounts.   It  also  describes commands for
   updating the master accounting file and displaying user information.


   Table 11-2:  Top-level REACT Commands   Table 11-2:  Top-level REACT Commands


   ______________________________________________________________________

     Command               Function
   ______________________________________________________________________

     CHANGE user-id        Enables you to enter  user-mode  and  modify
                           user profiles.

     DELETE user-id/switch

                           Removes   the   specified    account    from
                           ACTDAE.SYS.   You  can specify a wildcard in
                           the  user-id.   Switches  are:    /ASK   and
                           /NOASK.   If you specify /ASK, REACT prompts
                           you to confirm each deletion you  make.   If
                           you  specify  /NOASK,  REACT does not prompt
                           you to confirm each deletion.  /ASK  is  the
                           default.

     EXIT                  Exits the REACT program and returns  you  to
                           monitor command level.

     HELP                  Displays information about  REACT  commands.
                           To  display  a brief list of REACT top-level
                           commands, type HELP and  press  RETURN.   To
                           get  more  information  about  a  particular
                           REACT command, type  HELP  and  the  command
                           name.

     INSERT user-id [=user-id]

                           Enables you to enter  user-mode  and  create
                           user  accounts.   You can supply an optional
                           existing user-id to use as a guide  for  the
                           new profile.









                                   11-14
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


     LIST user-id filespec/switch

                           Writes information from the specified user's
                           profile  to  a  file.   You  can  specify  a
                           wildcard in the user-id.  The  default  file
                           specification  is DSK:ACCT.LST[-].  Switches
                           are:    /DETAIL,   which   lists   all   the
                           information  in a user's profile, and /FAST,
                           which lists only the PPN and its  associated
                           username.  /DETAIL is the default.

     LOCK                  Opens  ACTDAE.SYS  in  READ-ONLY  mode,   to
                           prevent  other  users from making changes to
                           the  file  while  you  update   the   master
                           accounting file.

     PURGE                 Deletes expired profiles.

     SELECT                Allows  you  to  mark  accounts  that   have
                           certain  profile  attributes in common.  You
                           use  the  SELECT  command  to  specify   the
                           attributes  that you want as identifiers for
                           the group.  After you mark the accounts as a
                           group,  you can change various attributes of
                           the profiles as a group, rather  than  doing
                           so individually.

                           For example, to extend the  expiration  date
                           of  all accounts that expire on December 31,
                           you do the following:  SELECT  the  accounts
                           that  have  the  expiration date you want to
                           change, and CHANGE the  expiration  date  to
                           the desired date.

     SHOW user-id/switch   Displays  information  from  the   specified
                           user's  profile.  You can specify a wildcard
                           in the  user-id.   Switches  are:   /DETAIL,
                           which  displays  all  the  information  in a
                           user's profile, and  /FAST,  which  displays
                           only  the  PPN  and its associated username.
                           /DETAIL is the default.

     UNLOCK                Reopens ACTDAE.SYS so that other  users  may
                           access it.










                                   11-15
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


     VERIFY [filespec] user-id/switch

                           Checks  for  differences  between  a  master
                           accounting  file (MASTER.SYS) and the system
                           file  (ACTDAE.SYS).   You  can   specify   a
                           particular  user account or verify all PPNs.
                           This  command  allows  you   to   list   the
                           differences between your master file and the
                           system  accounting  file,  and,  optionally,
                           update  the  master  accounting  file.   The
                           user-id can be either a  [P,PN]  or  a  user
                           name.   If  the username includes characters
                           other than A-Z, a-z, hyphen (-)  or  digits,
                           you must enclose it in double quotes.
   ______________________________________________________________________



   11.12  USER-MODE COMMANDS   11.12  USER-MODE COMMANDS

   User-mode commands are subcommands to the CHANGE, INSERT,  and  SELECT
   commands, and consist of the following types of commands:

         o  COMMANDS to perform the changes specified with  Field  Change
            Commands.  These commands are listed in Table 11-2.

         o  COMMANDS to change customer-defined fields that  specify  the
            customer-defined  user account field that you want to change.
            You can  define  customer-defined  FIELDS  in  REACTU.MAC  to
            tailor  the  REACT  program  to  the  special  needs  of your
            installation.

         o  COMMANDS to change  account  fields  that  specify  the  user
            account  field  that  you want to change.  These commands are
            listed in Table 11-3.

   The following prompt indicates that you have entered user mode:

        USER>

   The following table lists REACT Commands to change fields.













                                   11-16
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


   Table 11-3:  REACT Field Change Commands   Table 11-3:  REACT Field Change Commands


   ______________________________________________________________________

     Command               Function
   ______________________________________________________________________

     ALL                   Allows you to specify all of the options for
                           a given field change command.

     AND                   Allows you  to  specify  selection  criteria
                           with the SELECT command.

     ACCESS-TYPES          Specifies the types of access allowed to the
                           specified user.  An access is any attempt by
                           a user, or in behalf  of  a  user,  to  gain
                           access   to   the  system  using  a  correct
                           combination   of   user-id   and   password.
                           ACCESS-TYPES  include  following:   ANF-CTY,
                           BATCH,    DATA-SET,    FILES-ONLY,    LOCAL,
                           NETWORK-FILE-ACCESS,   PHYSICAL-CARD-READER,
                           REMOTE, SUBJOB-OF-BATCH.

     CONTEXT-QUOTAS        Specifies the limits governing  the  use  of
                           job  contexts.   The  context  quota  is the
                           number of contexts a user may  have  at  any
                           one  time.   Each logged in job has at least
                           one (current) context.  The maximum is  511.
                           A  quota  of  zero  indicates no limit.  The
                           saved page quota is the number of  pages  of
                           swapping  space  a user may occupy with idle
                           contexts.  A  quota  of  zero  indicates  no
                           limit.   Refer  to  the  description  of job
                                             _______  _________  ______                           contexts in  the  TOPS-10  Operating  System
                           ________ ______                           Commands Manual for more information.

     CORE-LIMITS           Specifies a decimal value for  the  physical
                           and  virtual  limit  of the number of pages.
                           The maximum  number  of  physical  pages  is
                           8,192.   The maximum number of virtual pages
                           is 16,384.

     DISTRIBUTION-LOCATION Specifies text to be displayed on the banner
                           page(s)   of   spooled   output.   The  text
                           indicates   where   the   operator    should
                           distribute the user's output.

     DONE                  Writes the changes to the ACTDAE.SYS file.

     ENQ-DEQ-QUOTA         Specifies a decimal value for the number  of
                           outstanding  ENQ  locks.  The maximum number


                                   11-17
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


                           is 511.

     EXPIRATION-DATE       Specifies the date and time when  LOGINs  to
                           this account are no longer allowed.

     IPCF-QUOTAS           Specifies a  decimal  value  for  the  SEND,
                           RECEIVE,  and PID quotas.  The maximum value
                           for each quota is 511.

     HELP                  Displays  help  text   for   the   specified
                           user-mode command.

     LOGIN-TIMES           Specifies the time of the day  the  user  is
                           allowed to LOGIN.  Weekdays are divided into
                           24 one-hour segments.  Weekends are  divided
                           into  12 two-hour segments.  Therefore, if a
                           user is permitted to LOGIN  on  Saturday  at
                           7:00 AM, the user can actually LOGIN between
                           6:00 AM and 7:59 AM.

     NAME                  Specifies the  username  for  this  profile.
                           The  username  can  consist of any printable
                           character except the  following:  %,  *,  or
                           / .  It can be up to 39 characters long, and
                           it cannot begin with a numeric character.

     NO                    Allows  you  to  specify  options  to  field
                           change commands

     NONE                  Allows you to disallow all of the options to
                           a given field change command.

     NOT                   Allows you  to  specify  selection  criteria
                           with the SELECT command.

     OR                    Allows you  to  specify  selection  criteria
                           with the SELECT command.

     PASSWORD              Specifies a password the user must  type  to
                           gain access to the system.  The password can
                           consist of any printable characters, and can
                           be up to 39 characters long.

     PERSONAL-NAME         Specifies  a  name  other  than  the  user's
                           offical  accounting  name  (see  NAME).  The
                           personal name, if available, is  printed  on
                           the  banner  page(s)  of  a  user's  spooled
                           output.  This is an unprivilged entry  in  a
                           profile,  and as such may be modified by the
                           user.




                                   11-18
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


     PPN                   Specifies the  user's  [project,  programmer
                           number].  The [P,PN] is the primary means of
                           identifying a user.

     PRIVILEGES            Specifies the privileged  functions  allowed
                           to   the  user.   The  privileged  functions
                           are:  CPU,  DISK-PRIORITY,   ENQ-DEQ,   HPQ,
                           IPCF,  LOCK, METER, MON-SPY, OPERATOR, POKE,
                           RTTRP, SPY, TRPSET, UNSPOOL

     PROGRAM-TO-RUN        Specifies  the  file  specification  of  the
                           program to run after LOGIN is complete.  The
                           file  specification  may  include  a  device
                           name,    program    name,   extension,   and
                           directory, including up to  five  levels  of
                           sub-file directories (SFD).

     PROHIBIT              Enables the system administrator to  prevent
                           users  from  changing their passwords.  This
                           is useful in situations where several people
                           share a single PPN.

     QUIT                  Terminates  the  current  user-mode  command
                           without executing that command.

     REQUIREMENTS          Specifies additional  information  the  user
                           must supply when logging in.  Options are:

                            o  ACCOUNT-STRING  information   associated
                               with the user

                            o  INTERVAL maximum time  between  password
                               changes

                            o  LENGTH minimum characters for password

                            o  NAME under timesharing or batch

                            o  PASSWORD under timesharing or batch

                            o  PROHIBIT password changes

                            o  REMARK to be stored in the usage files











                                   11-19
                 MAINTAINING THE SYSTEM AUTHORIZATION FILE                 MAINTAINING THE SYSTEM AUTHORIZATION FILE


     RESTORE               Deletes any  changes  you  have  made  to  a
                           profile  in  the  current user-mode session,
                           and returns all attributes to their original
                           values.

     SCHEDULER-TYPE        Associates the specified user profile with a
                           group  that  has  been  assigned a scheduler
                           class.   (See  Appendix  C  for  information
                           about assigning scheduler classes.)

     SHOW                  Displays  the   current   fields   for   the
                           specified user profile.

     SPOOLED-DEVICES       Specifies the physical devices not  normally
                           available to the user.  The options are CDP,
                           CDR, LPT, PTP, PLT and ALL.

     STRUCTURE-QUOTAS      Specifies the structure on  which  the  user
                           has  disk space allocated, and the amount of
                           disk  space  allocated  on  the   structure.
                           LOGIN  puts  these  structures in the user's
                           search  list,  and  sets   either   of   the
                           following two I/O status bits:  READ-ONLY or
                           NO-CREATE.

     WATCH-BITS            Specifies any of the  following  watch  bits
                           that  LOGIN  sets:    CONTEXTS,  DAY, FILES,
                           MTA, READ, RUN, VERSION, WAIT,  WRITE.   For
                           more  information, see the SET WATCH command
                                   _______  _________  ______  ________                           in the  TOPS-10  Operating  System  Commands
                           ______                           Manual.
   ______________________________________________________________________






















                                   11-20












                                 CHAPTER 12                                 CHAPTER 12

                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES



   There are several files that the monitor can use to help start up  the
   system,  initiate  terminal  communication, and provide information to
   the user.  The files can be created by the  system  adminstrator.   If
   they  exist,  the INITIA program reads them and passes the information
   stored in them to the monitor.  The files INITIA can read are:

        Filename                When

        SYS:SYSJOB.INI          system startup
        SYS:INITIA.TXT          the TEXT option is specified
        SYS:NOTICE.TXT          the NOTICE option is specified
        ALL:STR.TXT[1,4]        the STRUCTURES option is specified
        SYS:TTY.INI             a terminal requests connection
        DSK:SWITCH.INI[p,pn]    you log in
        HLP:INITIA.HLP          HELP is requested

   Users can also run INITIA from their  terminals  to  set  up  terminal
   characteristics  and  display  information  about  the  terminal.  The
   command options that direct INITIA to read these files are  listed  in
   Table 12-1, Special Processing Commands.



   12.1  INITIA AT SYSTEM STARTUP   12.1  INITIA AT SYSTEM STARTUP

   INITIA runs automatically at system startup.  At  system  startup,  it
   reads  SYS:SYSJOB.INI,  an optional system startup file created by the
   system  administrator.   You   can   prevent   INITIA   from   running
   automatically  at  startup  by  using  the NOINITIA startup option, as
   described in Appendix A.  SYSJOB.INI contains the  commands  necessary
   to  start  up  system  programs  that normally run in a detached state
   (that is, programs that do not normally require terminal  I/O).   Some
   of the system programs that may be started from SYSJOB.INI are ACTDAE,
   FILDAE, and QUASAR.

   SYSJOB.INI  allows  you  to  start  system  components   quickly   and
   automatically.  Most of the programs that can be started automatically


                                    12-1
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


   by OPSER, from the OPR.ATO  file,  can  be  started  more  easily  and
   efficiently  by  INITIA  through  SYSJOB.INI.   SYSJOB.INI can contain
   monitor commands and commands to programs, but its intended purpose is
   as  a  system  initialization  file, and great care should be taken to
   ensure that the file can be read successfully.

   INITIA also runs automatically whenever a  terminal  connects  to  the
   system.   INITIA  reads  the file SYS:TTY.INI to establish information
   about the terminal.  TTY.INI can also contain commands  to  INITIA  to
   interrogate  the  connecting terminal to determine its characteristics
   and attributes.

                                    NOTE

           INITIA cannot access files that are protected from it.
           Therefore,  the  system  files  SYSJOB.INI and TTY.INI
           must have a  protection  code  of  <155>.   Protection
                                                _______ _________           codes are described in detail in the TOPS-10 Operating
           ______ ________ ______           System Commands Manual.



   12.1.1  The SYSJOB.INI File   12.1.1  The SYSJOB.INI File

   If it exists, SYS:SYSJOB.INI is read  by  INITIA  at  system  startup.
   TOPS-10 provides several system programs that are suitable for startup
   by INITIA from SYSJOB.INI.   System  programs  commonly  started  from
   SYSJOB.INI  are the system DAEMON programs DAEMON, FILDAE, ACTDAE; the
   GALAXY component QUASAR; user utilities such as MIC; the mail delivery
   program  MX;  and  site-specific  system programs.  Any system program
   that normally runs in a detached state is a candidate for startup from
   SYSJOB.INI.

   INITIA reads SYSJOB.INI and sends the commands contained in it to  the
   monitor   for  special  processing  through  the  FRCLIN  (force-line)
   mechanism.  FRCLIN is an internal mechanism of the monitor that allows
   a  privileged  program  to  pass commands to the monitor as though the
   commands had been issued from a terminal.  INITIA uses FRCLIN to start
   system  programs because terminal input is handled by the monitor with
   a minimum of delay.  After INITIA is finished, FRCLIN is free for  use
   by other system components that must send commands to run programs.

   System programs that may be started from SYSJOB.INI detect the  FRCLIN
   mechanism  and  detach  themselves automatically.  To detect FRCLIN, a
   program must compare the number of the terminal  line  that  sent  the
   startup  command  with  Word 162 (%CNFLN) of GETTAB Table 11 (.GTCNF),
   where the FRCLIN line number is stored.

   The FRCLIN mechanism ignores output from the programs that are started
   with  FRCLIN, and for that reason it may be difficult to determine why
   SYSJOB.INI fails to complete.  To detect the reason for  an  error  in
   SYSJOB.INI, set the DF.WFL bit in the monitor debugging word (DEBUGF),


                                    12-2
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


   and restart INITIA.  Output from the programs that  are  started  will
   then be printed on the CTY.



   12.1.1.1  Format of SYSJOB.INI   12.1.1.1  Format of SYSJOB.INI - SYSJOB.INI is formatted as a list  of
   the  commands  that  can  be  sent through FRCLIN to the monitor.  Any
   monitor commands can be placed in SYSJOB.INI, but  the  following  are
   the most commonly used:

        SET DEFAULT ACCOUNT string    Sets a default  account  string  by
                                      which  the  jobs  on  FRCLIN can be
                                      logged in.

        LOGIN                         Logs in a  job  through  FRCLIN  to
                                      accommodate  the  program  that  is
                                      started on the  next  line  of  the
                                      file.

   This command does not actually run the LOGIN program or use the  LOGIN
   UUO.  The monitor performs special logging-in actions to prepare a job
   for the program.  The jobs  are  logged  in  under  the  PPN [1,2]  by
   default.

   It is possible to log in programs with a PPN other than  [1,2].   This
   may be accomplished by omitting the LOGIN command, and by specifically
   omitting the R or RUN command.  The program will then be  run  from  a
   job  that  is  not  logged  in,  using  PPN  [2,5].   The  program  is
   responsible for logging itself in, if desired, by using the LOGIN  UUO
   and any PPN that is valid.

        program                       Specifies  the  name  of  a  system
                                      program to run.

   Each program name is placed on a line following a LOGIN command.   The
   program is assumed to be run from SYS.  Therefore, the command

        BATCON

   is actually interpreted as the command

        R BATCON

   The actual monitor command R or RUN may be  included  in  the  command
   line.

   The following is an example of a SYS:SYSJOB.INI file:

        SET DEFAULT ACCOUNT MUMBLE    ;set the account string as "MUMBLE"
        LOG                           ;log in a SYSJOB
        ACTDAE                        ;run the accounting daemon
        LOG


                                    12-3
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


        DAEMON                        ;run SYS:DAEMON
        LOG
        FILDAE                        ;run SYS:FILDAE
        LOG
        QUASAR                        ;run SYS:QUASAR
        .
        .
        .
        NIK/DETACH                    ;run a local  program  in  detached
        LOG                           ;mode
        SET HPQ 1                     ;set a high priority run queue  for
        R MIC                         ;start MIC
        .

   To insure that input  from  other  FRCLIN  users  does  not  interrupt
   logically  related groups of commands in SYSJOB.INI, INITIA groups the
   SYSJOB.INI commands into strings delimited  by  LOGIN  commands.   For
   example,  the  following list shows commands contained in a SYSJOB.INI
   file:

        LOGIN
        ACTDAE
        LOGIN
        SET HPQ 1
        DAEMON

   INITIA groups the above commands into two strings.  INITIA copies  the
   first  string  into  FRCLIN's input buffer.  The first string contains
   the following commands:

        LOGIN<CR>ACTDAE<CR>

   Then it copies the the second string into FRCLIN's input buffer.   The
   second string contains the following commands:

        LOGIN<CR>SET HPQ 1<CR>DAEMON<CR>

                                    NOTE

           INITIA considers any program name given in  SYSJOB.INI
           that  starts  with  "LOG" to be a LOGIN command.  This
           does not affect the content of the input, but  it  may
           cause conflicts, which the above technique attempts to
           prevent.  To differentiate between LOGIN commands  and
           other  program  names that begin with the letters LOG,
           use the following format:

                R LOG...

   If errors occur during processing, the rest of the input file may  not
   be  executed.   Therefore,  the order of the commands in SYSJOB.INI is
   vital to successful system startup.  It is important to place  monitor


                                    12-4
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


   components  first  in  the file, followed by CUSPS and other programs.
   You should place ACTDAE first in the file, to ensure  that  accounting
   is enabled when the rest of the programs are started.  You may include
   commands to the programs you are starting.  If you  include  commands,
   you  must  explicitly  detach  the  program  after the commands if the
   program does not detach itself as a result of the commands.



   12.1.2  The TTY.INI File   12.1.2  The TTY.INI File

   Before a user can log in, the terminal must be logically connected  to
   the  system.   When  a  terminal requests connection, INITIA reads the
   file SYS:TTY.INI to set up terminal and job characteristics.   TTY.INI
   can contain commands to INITIA to:

         o  Interrogate  the  connecting  terminal   to   determine   its
            characteristics and attributes.

         o  Set terminal characteristics by explicit command.

         o  Set options that specify information to  be  associated  with
            the terminal.

                                    NOTE

           If you specified the  ONCE  startup  option  NOINITIA,
           users  must  issue  either the INITIA CHECK command or
           SETTY command to activate the options in TTY.INI.



   12.1.2.1  Format of TTY.INI   12.1.2.1  Format of TTY.INI - Each command  line  of  TTY.INI,  except
   continued  lines,  must  begin  with  one  of the terminal identifiers
   listed in Section 12.1.2.2.  By  using  the  terminal  identifiers  in
   combination  with  the  options  listed  in  Section  12.1.2.3 you can
   specify any number of terminals in a command line, and you may use any
   number  of  options  for  each  terminal.   If conflicting options are
   specified for a single terminal, the last option in the  command  line
   for that terminal takes effect.

   To continue a command line, put a hyphen (-) as the last character  of
   the  line  that  is to be continued.  To insert a comment, precede the
   comment by a semicolon (;) or an exclamation  point  (!).   File  line
   numbers  are  ignored.   Multiple  tabs  and spaces are treated as one
   space.

   The following is an example of a SYS:TTY.INI file:

      ALL:                        CHECK NORUN KSYS XONXOFF TEXT NOGAG LC-
                                  REMOTE
      APC:CTERM                   NOCHECK


                                    12-5
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


      STOMP                       ACCOUNT "MUMBLE"
      CONNECT                     COMET_TTY0
      KL1026_TTY405               NO REMOTE NO TABS
      KL1026_TTY406               NO REMOTE NO TABS
      KL1026_TTY407               NO REMOTE NO TABS
      CTY:            TYPE:LA120  NO REMOTE NO TABS GALOPR ACCOUNT-
                                  "MUMBLE"
      KL1026_TTY5                 RCV:9600 XMT:9600 NO REMOTE
      KL1026_TTY6                 RCV:300 XMT:300 REMOTE
      KL1026_TTY405  TYPE:LA120   ;CPU2 CTY
      KL1026_TTY406  TYPE:LA120   ;CPU1 CTY
      KL1026_TTY407  TYPE:LA120   ;CPU0 CTY (when not THE CTY)
      .
      .
      .



   12.1.2.2  Specifying Terminal Lines   12.1.2.2  Specifying Terminal Lines - The following commands  identify
   a  terminal  or  set of terminals.  This identifier is placed first in
   the command line, followed by the options that are listed in the  next
   section.

        Identifier            Terminal Lines Indicated

        ALL:                  All terminal lines.

        APC:x                 Asynchronous  Port   Characteristic.    All
                              terminals  of  APC  type  x  where  'x'  is
                              determined  by   certain   attributes   and
                              characteristics.   This  identifier  can be
                              one of the following:

                                unknown
                                hardwired
                                dataset
                                Gandalf
                                TSN
                                autodial
                                Micom
                                NRT (Network Remote Terminal)
                                LAT (Local Area Terminal)
                                CTERM (Command Terminal)

        CTY:                  The CTY (controlling terminal) only.

        DETECT n              Dataset lines that are set to n baud.

        LINSPD n              Lines that are set to n baud.

        node_identifier       Terminal at the  node  called  "node."  The
                              identifier  following  node_  can be any of


                                    12-6
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


                              the identifiers in this list.

        OTHER                 Any terminals not  specified  with  a  TTY:
                              identifier.

        OTHSPD n              All lines not set to n baud.

        TTYnnn:               Terminal line nnn.  This identifier can  be
                              abbreviated to TTnnn:.

        TTYnnn-zzz:           All terminal lines from nnn to  zzz.   This
                              identifier    can    be    abbreviated   to
                              TTnnn-zzz:.

        (TTYaaa:, TTYbbb:,...,TTYzzz:)
                              All terminal lines listed.

   Terminal line numbers range from 0-777  octal.   Hard-wired  terminals
   are  assigned  permanent  terminal  line  numbers in the form TTYnnn:,
   where 'nnn' is the physical line number.  For example, if the terminal
   number  TTY10:   is  assigned  to  a terminal that is hardwired to the
   system, that number will not change.  If  the  host  system  is  named
   MING, this terminal may also be referred to as MING_10.

   Terminals connected through nodes have permanent line numbers  in  the
   form  nnn_lll, where 'nnn' is the node name or number and 'lll' is the
   number of the line that connects the terminal to the node.   When  one
   of these remotely-connected terminals is recognized by the system, the
   monitor assigns a "terminal name" to it, in the  form  TTYnnn:,  where
   'nnn'  is  a  temporary  number assigned during the connection.  These
   terminal names  are  reassigned  on  a  dynamic  basis,  as  terminals
   logically connect and disconnect from the system.

   For  example,  terminal  line  15  on  node  number  44,  a   terminal
   concentrator with node name XENON, would be called 44_15, or XENON_15,
   and this designation will not change.  However, when terminal 44_15 is
   connected to the host system, it may be assigned terminal name TTY130:
   by the monitor.  The terminal will be known to the monitor as  TTY130:
   as  long  as it remains connected to the host system.  If the terminal
   becomes disconnected and then reconnected,  it  might  be  assigned  a
   different terminal name, such as TTY52:.



   12.1.2.3  Specifying  Terminal  Options   12.1.2.3  Specifying  Terminal  Options - Terminal   identifiers   are
   followed by options that specify information to be associated with the
   terminal(s) identified at the beginning of the command line.







                                    12-7
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


   There are three types of options:

         o  Commands that specify special processing by INITIA.

         o  Terminal characteristics to be set for the terminal  when  it
            is connected.

         o  Programs to run automatically when the terminal is connected.

   The options are separated by commas or spaces.  For those options that
   require  an  argument,  the argument can immediately follow the option
   name, or it can be separated from the option name  by  a  colon  or  a
   space.   Option  names can be abbreviated, as long as the abbreviation
   is unique.

   In conflicting situations, the option specified last  in  the  command
   line takes precedence over those specified earlier.  You can turn many
   options off by typing NO before the option word, with  or  without  an
   intervening  space.   A  minus  sign has the same effect as NO.  Thus,
   NO GAG, NOGAG, and -GAG have the same effect.  In the table below, the
   complement  of  the  command  is shown, if a complement is valid.  The
   default setting of the options is designated by (*).

   The  following  table  lists  TTY.INI  options  to  indicate   special
   processing to be done for the terminal at initialization:


   Table 12-1:  Special Processing Commands   Table 12-1:  Special Processing Commands


   ______________________________________________________________________

     Option          Meaning
   ______________________________________________________________________

     ATTRIBUTE       Display terminal attributes.

     CHECK           Interrogate terminal to determine its class, model
     CHECK:DEFAULT   and   type,   and   set   the    attributes    and
                     characteristics  associated with the class, model,
                     and type found.  When CHECK:default is  specified,
                     INITIA  interrogates only if current terminal type
                     matches  the  system  default  type  specified  in
                     MONGEN.   Complement:   NOCHECK.   NOCHECK  is the
                     default.

     CONNECT         Connect networked terminal to the host.

     HELP            Read the file HLP:INITIA.HLP and print information
                     about the INITIA command.




                                    12-8
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


     KSYS            Display KSYS time if it has been set.  Complement:
                     NOKSYS.  NOKSYS is the default.

     LOCATE node     Make a logical connection with the specified node,
                     similar to the monitor LOCATE command.

     NAME            Print the system name.  Complement:  NONAME.  NAME
                     is the default.

     NORUN           Suppress the running of programs that are  set  to
                     run automatically for the terminal.

     NOTICE          Print  SYS:NOTICE.TXT,  if  such  a  file  exists.
                     Complement:  NONOTICE.  NONOTICE is the default.

     SETTTY          Set terminal from TTY.INI (on CTY) or  SWITCH.INI.
                     If  the job is logged in, NOSETTTY is the default.
                     For  more  information  about  SETTTY  and  SETTTY
                                      _______ _________ ______ ________                     options, see the TOPS-10 Operating System Commands
                     ______                     Manual.

     STOMP           Initiate  the  "terminal  stomper"  function  that
                     disconnects terminal lines that have been detached
                     and idle for two or more minutes.

     STRUCTURES      Print    individual    structure    notes     from
                     ALL:STR.TXT[1,4].     Complement:    NOSTRUCTURES.
                     NOSTRUCTURES is the default.

     TEXT            Print  SYS:INITIA.TXT,  if  such  a  file  exists.
                     Complement:  NOTEXT.  NOTEXT is the default.

     TTY             Display all terminal settings for  this  terminal.
                     Complement:  NOTTY.  NOTTY is the default.

     TTY:TTYnnn      Display all terminal settings for TTYnnn.
   ______________________________________________________________________


   The following programs start automatically when INITIA  runs  for  the
   terminal.  A job is logged in for the program and INITIA creates a PPN
   for the job.  Unless specified otherwise, INITIA  constructs  PPNs  as
   follows:

         o  If the terminal is a local terminal, INITIA uses [1,2].

         o  If the terminal is remote, INITIA constructs a PPN using  the
            algorithm  [100+node-number,2].   For  example, a terminal at
            the node that has node number 12 receives the PPN [112,2].

            INITIA creates a job search list for the job, which it copies
            from the current setting of the system search list.


                                    12-9
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


   Table 12-2:  Options to Run Programs   Table 12-2:  Options to Run Programs


   ______________________________________________________________________

     Option          Program
   ______________________________________________________________________

     AUTOMATIC       Start OPSER  and  begin  processing  an  automatic
                     startup  file.  The file name that is read depends
                     on the terminal from which OPSER was started.

                     When the terminal is  connected  directly  to  the
                     local system:

                      o  If device OPR:, OPR.ATO is used.

                      o  Otherwise, TTYnnn.ATO is used, where 'nnn'  is
                         the terminal line number.

                     When the terminal is connected to a remote node:

                      o  If device  OPR:,  OPRnnn.ATO  is  used,  where
                         'nnn' is the node number.

                      o  Otherwise, nnnlll.ATO is used, where 'nnn'  is
                         the node number and 'lll' is the terminal line
                         number.

     CHKPNT          Start CHKPNT under [1,2].  This program cannot  be
                     run from a remote terminal.

     CRASH           Start FILEX under [10,1].

     DAEMON          Start DAEMON under [1,2].  This program cannot  be
                     run from a remote terminal.

     GALOPR          Start the OPR program, which begins processing the
                     file SYS:SYSTEM.CMD, if the terminal is local.  If
                     the terminal is remote,  SYS:nnnlll.CMD  is  used,
                     where  'nnn'  is  the node number and 'lll' is the
                     line number of the terminal where OPR is started.

     OMOUNT          Start OMOUNT under [1,2].  This program cannot  be
                     run from a remote terminal.

     OPSER           Start OPSER.







                                   12-10
                    CREATING SYSTEM INITIALIZATION FILES                    CREATING SYSTEM INITIALIZATION FILES


     STOMP           Initiate the "terminal  stomper"  function,  which
                     disconnects terminal lines that have been detached
                     and idle for longer than two minutes.

     SYSDPY          Start  the  SYSDPY   display   program   for   the
                     appropriate terminal type.
   ______________________________________________________________________



   12.1.2.4  Associated (Error) Messages   12.1.2.4  Associated (Error) Messages - If there  are  errors  in  the
   TTY.INI file, INITIA prints:

        ?INTCER INITIA COMMAND ERROR

   Correct the TTY.INI file and restart INITIA for the  job.   Any  other
   ?INT...  error message indicates a serious system problem that must be
   investigated by a software specialist.



   12.1.3  The INITIA Monitor Command   12.1.3  The INITIA Monitor Command

   The INITIA monitor command enables users to initialize their terminals
   at  any  time.   To run INITIA from a terminal, use the INITIA monitor
   command.  You may include  the  INITIA  command  and  your  choice  of
   options in your SWITCH.INI file.

   You can use INITIA to do the following:

         o  Display terminal attribute settings, mode settings, and check
            terminal type.

         o  Display the system banner and time of system shutdown (KSYS),
            if any.

         o  Display general system notices.

         o  Display operator notes about mounted structures.

         o  Change terminal characteristics.

           _______ _________ ______ ________ ______   See the TOPS-10 Operating System Commands Manual for more  information
   about the INITIA command and the SWITCH.INI file.










                                   12-11
                                        
























































                                   12-12
                                        















                     PART 5: SUPPLEMENTARY INFORMATION




             This part is made up  of  four  appendixes  and  a
             glossary.    Appendixes   A   though   D  describe
             alternatives to  the  installation  procedure  and
             information for modifying the monitor software.













                                 APPENDIX A                                 APPENDIX A

                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS



   ONCE runs automatically at system startup.   At  system  startup,  the
   initial  dialog questions allow you to provide a reason for the system
   reload and to specify the date and time.  While the system is  up  and
   running,  ONCE  may  also  be run in user mode by running the monitor.
   You may refresh disks and change disk parameters  when  ONCE  runs  at
   system startup, or you may run ONCE in user mode without reloading the
   system.

   ONCE performs the following functions:

         o  Checks memory for units that are offline and confirms the
            state of the memory units by a response from you.

         o  Checks the HOME blocks on all the units for inconsistencies
            and optionally rewrites the HOME blocks.  If any units are
            write-protected, ONCE reports the unit name, asking whether
            it should be write-enabled or write-protected.

         o  Reports on disk units that are offline.

         o  Checks the BAT blocks, listing any inconsistencies for each
            unit.

         o  Lists the number of bad regions on any unit you specify.

         o  Lists each file structure and the units in the file structure
            in their logical order.

         o  Lists all the disk units that are not in a file structure.

         o  Lists the units in the Active Swapping List.  For new
            installations, there is no swapping list, and ONCE prints a
            message to indicate that.

         o  Lists the structures in the System Search List, or SSL.




                                    A-1
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


         o  Lists the structures in the System Dump List, or SDL.

         o  Allows you to change parameters of any structure.

         o  Allows you to change parameters of any unit.

         o  Allows you to change any system disk parameters.

         o  Allows you to dissolve file structures, if any file
            structures exist.

         o  Allows you to define file structures.

         o  Allows you to specify the units on which you want HOME blocks
            rewritten.

         o  Lists the structures that need to be refreshed, and allows
            you to specify the structures that you want refreshed.

         o  Allows you to log in as [1,2], after ONCE has refreshed
            structures.

         o  Starts running the null job and begins timesharing.

   The Disk Parameters Worksheet, Worksheet 3, is provided in  Chapter  2
   to record the disk parameters for your system.  Because you can define
   so many disk parameters with ONCE, you may find it  useful  to  record
   the  disk  parameters for your system on the worksheet and to use this
   as an aid when you refresh structures, create new file structures,  or
   redefine disk parameters.



   A.1  ONCE AT SYSTEM STARTUP   A.1  ONCE AT SYSTEM STARTUP

   ONCE begins when you reload the system, as described in  Section  9.4.
   First,  the  system name and the date that the monitor was created are
   displayed.  The system name is set by Question 5 of the SYSGEN portion
   of MONGEN (see Chapter 9).

        [Loading from DSKM:RL336A.EXE[1,4]]

        RL336A DEC-10 Development 16-Feb-88

   ONCE scans memory to be sure that it is accessible.  Each  monitor  is
   built  for a specific amount of memory.  MONGEN Question 58 allows you
   to specify the amount of memory when you  are  building  the  monitor.
   Therefore,  new  installations  may  receive  the  following  message,
   indicating that the default monitor was built to  expect  more  memory
   than that which is currently online:

        %Memory from xxxxxx to yyyyyy is offline


                                    A-2
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


        Set memory (DOWN,OFFLIN,ONLINE) [OFFLIN]:

   The default response  appears  in  square  brackets.   If  the  memory
   indicated  is not needed at this time, but will be needed later, press
   RETURN to accept the default answer.  Memory that is set  offline  can
   be  set  online  during system operation, with the SET MEMORY command.
   If all memory must be online, enter ONLINE and press RETURN.   If  the
   memory  is  not  going  to  be  required  at all, enter DOWN and press
   RETURN.  Memory that is down cannot be brought up with the SET  MEMORY
   command.

   If you are starting an SMP system and have not yet started  the  other
   CPUs, ONCE prints the following message:

        %CPU #nnnn is not running.  Set CPU status (DOWN,UP) [DOWN]:

   If you have an SMP system, you can start the CPU indicated by entering
   UP  and  pressing  RETURN.   To  accept  the default value, just press
   RETURN.  After receiving  an  answer,  ONCE  asks  for  a  reason  for
   reloading the system:

        Why reload:

   This question is asked  whenever  the  system  is  reloaded.   Several
   responses  are  allowed, depending on the reason for the reload.  When
   you are installing the monitor, use one of the following answers:

        NEW       if you are installing a new system

        SCHED     if you are loading a new or different version of the
                  monitor

   When you are reloading the system after a problem or crash, use one of
   the following answers:

        HALT      if the system ended with a stopcode or HALT

        HARDWARE  if the system ended with a hardware malfunction

        HUNG      if the system would not respond

        LOOP      if the monitor was looping in executive mode

        NXM       if a non-existent memory stop occurred

        OPR       if an operator error occurred

        PARITY    if a memory parity error occurred

        POWER     if a power failure occurred

        STATIC    if static electricity caused the crash


                                    A-3
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   When you are bringing the system  up  after  a  scheduled  maintenance
   session,  or  for  scheduled standalone time, use one of the following
   answers:

        PM        for preventative maintenance

        CM        for corrective maintenance

        SA        for scheduled stand-alone time

   If none of the responses you see here apply, use the following:

        OTHER     followed by the reason for the reload

   You can include comments to further describe your reasons by preceding
   the comment with a semicolon or a space.  Your answer to this question
   is stored in the system error log file ERROR.SYS.

   After receiving a reason for the reload, ONCE asks for the date:

        Date:

   Enter the date in the form:

        DD-MMM-YY
   or
        MMM-DD-YY

   Where DD is the numerical day of the month (01 through 31), MMM is the
   name  of the month (JANUARY through DECEMBER) abbreviated as the first
   three letters of the month (JAN through DEC), and YY  is  replaced  by
   the two digit year designation.  The year is optional.

   If you respond with an  incorrectly  formatted  date,  ONCE  asks  the
   question again in more detail:

        Please type today's date as MMM-DD(-YY)

   If you specify a date before the  last  system  crash  or  before  the
   creation date of the monitor, the ONCE dialog issues an error message,
   supplies the last crash or creation date, and asks you to verify  your
   response:

        %Specified date is prior to last crash.
        Last crash date:MMM-DD-YY
   or
        %Specified date is prior to monitor creation date.
        Creation date:MMM-DD-YY
   and
        Specified date:MMM-DD-YY
        Is this correct?  (Y or N)



                                    A-4
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   To which you can respond Y if the date you typed was correct, or N, if
   you  typed  an  incorrect  date.  If you enter N, the Date:  prompt is
   reprinted so that you can enter the correct date.

   ONCE asks for the time after it receives the date:

        Time:

   Enter the time based on a 24-hour clock.  The seconds are optional, as
   are the colons separating the hours, minutes and seconds.

        HH:MM:SS
   or
        HHMMSS

   If the format of the time is  incorrect,  ONCE  prints  the  following
   message:

        Please type time as HHMMSS or HH:MM:SS

   If you specify a time before the last system crash,  the  ONCE  dialog
   issues an error message, supplies the last crash time, and asks you to
   verify your response:

        %Specified time is prior to last crash.
        Specified time:HH:MM:SS
        Last crash time:HH:MM:SS

        Is this correct?  (Y or N)

   If you enter N, the Time:  prompt is reprinted so that you  can  enter
   the correct time.

   As with the date, it is important that you  enter  the  correct  time.
   The  system  date and time can be changed with the CHANGE DATE startup
   option; the system time can be changed with the  SET  DAYTIME  monitor
   command.   However,  changing  either  the  system date or time during
   system operation may adversely affect  operation.   Therefore,  it  is
   recommended  that  you  reload  the system if you find it necessary to
   change them.

   The ONCE program now prompts for a startup option.

        Startup option:

   ONCE provides several startup options.  If you  press  RETURN  without
   entering  a startup option, you will be provided with a simple list of
   available options:

                       _____        Startup option:<RET>

        Options are:  CHANGE  DEFINE  DESTRO  DISSOL  GO  NOINIT


                                    A-5
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


                      REFRES  SHOW 

   If you type HELP and press RETURN you will be provided with a list  of
   the startup options and switches and a brief explanation of each:

                       _________        Startup option:HELP<RET>

        Options are:
        CHANGE  - Change system parameters
        DEFINE  - Define structures and system lists
        DESTRO  - Dissolve all structures in the system
        DISSOL  - Dissolve a single structure
        GO      - Start timesharing
        NOINIT  - Start timesharing without system initialization
        REFRES  - Refresh selected structures
        SHOW    - Display system parameters

        Switches are:
        NOASL   - Don't use reserved active swapping list
        NOCOPY  - Don't start CRSCPY
        NOPRIM  - Start timesharing in secondary protocol
        NOSDL   - Don't use preserved system dump list
        NOSSL   - Don't use preserved system search list
        NOVALI  - Don't require account validation
        STANDA  - Start timesharing with SCHED10 set

        Startup option:



   A.2  RUNNING ONCE IN USER MODE   A.2  RUNNING ONCE IN USER MODE

   Running ONCE in user mode, by running the monitor, allows the operator
   to  change  disk  parameters  without  reloading  the system.  To make
   changes to the disk file system, you must be logged in as [1,2].

         _ _________________        .R monitor-name<RET>

        Use scratch file (NO,YES) [default]:

   The first question allows you to store the disk data base  in  a  .BIN
   file.   The  use  of  the  scratch  file  provides the novice user the
   opportunity to learn how to use ONCE without any chance of file system
   damage.   If you are not logged in as [1,2], the default answer is YES
   and you must accept the default answer.  If you are not logged  in  as
   [1,2] and you answer NO, you will be returned to monitor level:

        ?  Must be [1,2]
        .

   If you are logged in as  [1,2]  the  default  is  NO.   Normally,  you
   respond  to  this question by pressing RETURN.  Then, you are prompted


                                    A-6
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   for units to read:

        Read units:

   Specify the name of each disk  unit  you  wish  to  change  and  press
   RETURN.   Your entry specifies the units from which ONCE will read the
   home blocks.  You may specify a single unit, or ALL.   When  you  have
   specified all the units to read, press RETURN.

        Write units:

   Specify the disk units on which to write new HOME blocks  for  changed
   information.  The ONCE program ensures that you will not inadvertently
   disrupt system operation by  not  allowing  you  to  change  the  disk
   parameters for disks that you did not specify as 'Write units'.

        Startup option:

   If you press RETURN without entering a startup  option,  you  will  be
   provided with a simple list of available options:

                       _____        Startup option:<RET>

        Options are:  CHANGE  DEFINE  DISSOL  EXIT  REFRES  SHOW

   If you type HELP and press RETURN you will be provided with a list  of
   the startup options and switches and a brief explanation of each:

                       _________        Startup option:HELP<RET>

        Options are:
        CHANGE  - Change system parameters
        DEFINE  - Define structures and system lists
        DISSOL  - Dissolve a single structure
        EXIT    - Return to monitor level
        REFRES  - Refresh selected structures
        SHOW    - Display system parameters

        Switches are:
        NOERRO  - Re-write HOM blocks despite errors

        Startup option:



   A.3  STARTUP OPTIONS AND SWITCHES   A.3  STARTUP OPTIONS AND SWITCHES

   ONCE allows you to change many disk and search  list  parameters,  and
   performs  disk  refreshing and restructuring for maintenance purposes.
   Certain startup options, startup option  keywords,  and  switches  are
   valid  only  when ONCE runs at system startup (executive mode); others
   are valid only when running ONCE in user mode.  In following sections,


                                    A-7
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   each  startup  option  is  described  and  an  example  of  its use is
   provided.

   When you select a startup option, the  keywords  applicable  for  that
   option  are  listed  after the option in parentheses.  For example, if
   you select the DEFINE startup option,  the  keywords  valid  for  this
   option are listed after the option, in parentheses:

                       ___________        Startup option:DEFINE<RET>
        Define (ASL,SDL,SSL,STRUCT):

   If you are already familiar with the keywords available for a specific
   startup option, you may type the startup option and the keyword on the
   same line:

                       ______ ________        Startup option:DEFINE ASL<RET>

        Enter names of units...

   If you press RETURN without selecting a keyword you will be  asked  to
   specify a startup option again:

                       ___________        Startup option:DEFINE<RET>
                                    _____        Define (ASL,SDL,SSL,STRUCT):<RET>

        Startup option:

   The startup options and keywords, and the  modes  in  which  they  are
   available,  are listed and explained below.  E denotes executive mode,
   and U denotes user mode.

   Option       Mode   Effect

   CHANGE       E,U    Use this option to change disk parameters.  If you
                       choose the CHANGE startup option when ONCE runs at
                       system startup, the LOGIN command requires  a  PPN
                       and password before you can log in a job.

                       Mode  Valid Keywords

                       E,U   ASL
                       E     DATE
                       E     NETWORk
                       E,U   SDL
                       E,U   SETS
                       E,U   SSL
                       E,U   STRUCTure
                       E,U   UNIT

                       Section A.3.1 describes the CHANGE startup option.

   DEFINE       E,U    Use this option to define  structures  and  system


                                    A-8
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


                       lists.   If  you  choose the DEFINE startup option
                       when  ONCE  runs  at  system  startup,  the  LOGIN
                       command requires a PPN and password before you can
                       log in a job.

                       Mode  Valid keywords

                       E,U   ASL
                       E,U   SDL
                       E,U   SSL
                       E,U   STRUCTure.

                       Section A.3.2 describes the DEFINE startup option.

   DESTROY      E      Use this option with extreme caution.  The DESTROY
                       option  is  used  to  refresh  all  structures and
                       rewrite  all  HOME  blocks.   If  you  choose  the
                       DESTROY  startup option, ONCE prints the following
                       message on the CTY:

                         To automatically log-in under [1,2] type "LOGIN"

                       Then you can log in a job under the PPN  [1,2]  by
                       simply typing LOGIN to the monitor prompt.

                       Section  A.3.3  describes  the   DESTROY   startup
                       option.

   DISSOLVE     E,U    Use this option to  dissolve  a  single  specified
                       file structure.

                       Section  A.3.4  describes  the  DISSOLVE   startup
                       option.

   EXIT         U      Use this option to return to monitor level.

                       Section A.3.5 describes the EXIT startup option.

   REFRESH      E,U    Use this option to refresh a single specified file
                       structure.   If  you  choose  the  REFRESH startup
                       option, ONCE prints the following message  on  the
                       CTY:

                         To automatically log-in under [1,2] type "LOGIN"

                       Then you can log in a job under the PPN  [1,2]  by
                       simply typing LOGIN to the monitor prompt.

                       Section  A.3.6  describes  the   REFRESH   startup
                       option.

   SHOW         E,U    Use this option to display system parameters.


                                    A-9
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


                       Mode  Valid keywords

                       E,U   ASL
                       E     DATE
                       E,U   NETWORk
                       E,U   SDL
                       E,U   SETS
                       E,U   SSL
                       E,U   STRUCTure
                       E,U   UNIT

                       Section A.3.7 describes the SHOW option.

   GO           E      Use this option to start the monitor  without  any
                       checking or dialog.

                       Section A.3.8 describes the GO option.

   NOINITIA     E      Use this  option  to  start  the  monitor  without
                       initializing  terminal  lines.   Because  terminal
                       lines are not initialized, this option  should  be
                       used only when running the system stand-alone.

                       Section A.3.9 describes the NOINITIA option.

   The startup option can be followed by a number of switches to  control
   the  type  of  output to the CTY.  The switches available in each mode
   are listed and explained below:

   Switch       Mode   Effect

   /NOASL       E      Use this switch to force the  monitor  to  rebuild
                       the Active Swapping List from disk after a reload.
                       If you do not specify  this  switch,  the  monitor
                       first  tries  to  use  the  preserved  copy in the
                       Active Swapping List.  If the monitor  cannot  use
                       the preserved data, then it rebuilds the data from
                       disk.

   /NOCOPY      E      Use this switch to prevent  CRSCPY  from  starting
                       automatically  when  the  monitor  is  started up.
                       When a continuable stopcode occurs, CRSCPY  copies
                       the  current  crash  file  (SYS:CRASH.EXE)  into a
                       backup file in the XPN area.

   /NOERRO      U      Use this switch to force the  monitor  to  rewrite
                       the HOME blocks.

   /NOPRIMARY   E      Use this switch to start timesharing in  secondary
                       protocol.  This switch is valid for KL10s only.

   /NOSDL       E      Use this switch to force the  monitor  to  rebuild


                                    A-10
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


                       the System Dump List from disk after a reload.  If
                       you do not specify this switch, the monitor  first
                       tries to use the preserved copy in the System Dump
                       List.  If the monitor  cannot  use  the  preserved
                       data, then it rebuilds the data from disk.

   /NOSSL       E      Use this switch to force the  monitor  to  rebuild
                       the  System  Search List from disk after a reload.
                       If you do not specify  this  switch,  the  monitor
                       first  tries  to  use  the  preserved  copy in the
                       System Search List.  If the monitor cannot use the
                       preserved  data,  then  it  rebuilds the data from
                       disk.

   /NOVALIDATE  E      Use this switch to turn off account validation.

   /STANDALONE  E      Use this switch to  bring  up  the  monitor  as  a
                       stand-alone system.



   A.3.1  CHANGing System Parameters   A.3.1  CHANGing System Parameters

   This section describes the CHANGE startup option.  You must DEFINE the
   system lists and structures before you can CHANGE them.  Section A.3.2
   describes  the  DEFINE  startup  option  and   provides   a   complete
   description  of  the  parameters  that must be defined before they are
   changed.

   In the following examples,  the  CHANGE  startup  option  is  selected
   first,  followed  by  the  item  to change.  The text that you type is
   underlined.

   To CHANGE the Active Swapping List (E,U):

   Enter the names of the units in the Active Swapping  List.   Enter  an
   extra RETURN when the list is complete.

                       ______ ________        Startup option:CHANGE ASL<RET>

        Enter names of units to appear in the active swapping list, one
        per line.  Terminate list with a blank line.
        _________        RXxn<RET>
        _____        <RET>

        Startup option:

   To CHANGE the date (E):

                       ______ _________        Startup option:CHANGE DATE<RET>
             ______________        Date:dd-mmm-yy<RET>
             _____________        Time:hh:mm:ss<RET>


                                    A-11
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


        Startup option:

   To CHANGE network information (E):

   The network information is initially provided by your answers  to  the
   network questions in the MONGEN dialog.

                       ______ ____________        Startup option:CHANGE NETWORK<RET>

                                     _________        System wide node name [name]:name<RET>
                                _________        ANF-10 node name [name]:name<RET>
                                         _______        ANF-10 node number (1 - 77) [nn]:nn<RET>
                                     _________        Decnet node name [node name]:name<RET>
                                         _______        DECnet area number (1 - 63) [nn]:nn<RET>
                                             _________        DECnet node number (1 - 1023) [nnnn]:nnnn<RET>
                                _________        LAT service name [name]:name<RET>

        Startup option:

   To CHANGE the System Dump List (E,U):

   Enter the names of the structures in the System Dump List.   Enter  an
   extra RETURN when the list is complete.

                       ______ ________        Startup option:CHANGE SDL<RET>

        Enter names of structures to appear in the system dump list, one
        per line.  Terminate list with a blank line.
        _________        DSKx<RET>
        _____        <RET>

        Startup option:

   To CHANGE disk-set numbers (E,U):

   Disk-set numbers are assigned  within  the  DEFINE  STRUCTure  startup
   option,  and  may  also be changed within the CHANGE STRUCTure startup
   option.

                       ______ _________        Startup option:CHANGE SETS<RET>

        Enter the desired disk-set numbers (1 - 36) or "ALL" for all
        disk-sets, one per line.  Terminate with a blank line.
        ________        ALL<RET>
        _____        <RET>

        Startup Option:

   To CHANGE the System Search List (E,U):

                       ______ ________        Startup option:CHANGE SSL<RET>



                                    A-12
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


        Enter names of structures to appear in the system search list,
        one per line.  Terminate list with a blank line.
        _________        DSKx<RET>
        _____        <RET>

        Startup option:

   To CHANGE STRUCTure parameters (E,U):

   The CHANGE STRUCTure startup option is used to change  the  parameters
   of  an  existing  file  structure.   You  can specify one structure to
   change only its parameters, or ALL to change all the structures.

   In the questions that follow, any question preceded with  an  asterisk
   indicates  changing  that  parameter  will require the structure to be
   refreshed.  A range of acceptable values, if applicable,  is  enclosed
   in  parentheses.   A  default  value,  if  any,  is enclosed in square
   brackets.  The ranges of acceptable values are calculated according to
   the  structure  type  previously defined.  The default values provided
   are those values  which  were  previously  defined.   All  ranges  and
   default values used in the following example are used for illustration
   only.  To accept a default value, just press RETURN.

                       ______ ___________        Startup option:CHANGE STRUCT<RET>
                            _________        Structure to change:DSKx<RET>

        Change unit parameters for this structure (NO,YES) [NO]:
        Do you want to see the BAT blocks (NO,YES) [NO]:
        Parameters for structure DSKx
            Structure name [DSKx]:
           *Blocks per cluster (3 - 131071) [5]:
            Private structure (NO,YES) [NO]:
            Owner PPN (NONE,[p,pn]) [NONE]:
            Disk-set (1 - 36,ALL,NONE) [ALL]:
           *Number of K for CRASH.EXE (0 - 4096) [2048]:
            Blocks allowed for overdraw per user (0 - 307800) [500]:
            Consecutive blocks tried for on output (0 - 262143) [30]:
           *Bits per cluster count (0 - 18) [12]:

        Structure to change:

   When you have finished changing one or all structures, you  may  enter
   another  stucture  to  CHANGE.  If you wish to be prompted for another
   startup option, press RETURN.

   To CHANGE Unit paramters (E,U):

   The CHANGE UNIT startup option is used to change the  unit  parameters
   of an existing file structure.

   Enter a unit to change  and  press  RETURN.   A  range  of  acceptable
   values,  if  applicable, is enclosed in parentheses.  A default value,


                                    A-13
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   if any, is enclosed in square brackets.  To accept  a  default  value,
   just press RETURN.

                       ______ _________        Startup option:CHANGE UNIT<RET>

        Any question preceeded with an asterisk indicates changing that
        parameter will require the structure to be refreshed.

                       _________        Unit to change:RXxn<RET>
        Parameters for unit RXxn
            Unit ID [XXXXn]:
           *SAT blocks per unit (5 - 81) [5]:
            SAT blocks in core (1 - 5) [5]:
           *K for swapping (0 - 21625) [20000]:
           *First logical block for swapping (1400 - 705504) [352752]:
            Swapping class (0 - 1) [0]:
            Make this the only unit in the ASL (NO,YES) [NO]:

        Unit to change:

   When you have finished changing a unit, you may enter another unit  to
   CHANGE.   If you wish to be prompted for another startup option, press
   RETURN.



   A.3.2  DEFINing Structures and System Lists   A.3.2  DEFINing Structures and System Lists

   This section describes the DEFINE startup option.   In  the  following
   examples, the DEFINE startup option is selected first, followed by the
   item to define.  The text that you type is underlined.

   To DEFINE the Active Swapping List (E,U):

   The Active Swapping List is the list of units that the system will use
   to  store  data  that  is  swapped  to  disk.  The units in the Active
   Swapping List should have swapping space allocated on them.  Make this
   allocation  with  the  DEFINE STRUCTure startup option.  To change the
   amount of swapping space allocated to the units in  the  list,  select
   the  CHANGE UNIT startup option.  For the most efficient swapping, the
   units  should  be  listed  in  the  order  of   fastest   to   slowest
   accessibility.

   The swapping list is divided into  classes,  where  Class  0  is  used
   first,  then Class 1.  All swapping units should be placed in Class 0,
   except units that have slow I/O.  Be sure to include  all  or  several
   controllers in the swap list.  Use the DEFINE STRUCTure startup option
   to assign a unit to a swapping class.  To change the swapping class of
   a unit, use the CHANGE UNIT startup option.

   Enter the names of the units in the Active Swapping  List.   Enter  an
   extra RETURN when the list is complete.


                                    A-14
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


                       ______ ________        Startup option:DEFINE ASL<RET>

        Enter names of units to appear in the active swapping list, one
        per line.  Terminate list with a blank line.
        _________        RXxn<RET>
        _____        <RET>

        Startup option:

   To DEFINE the System Dump List (E,U):

   Enter the names of the structures in the System Dump List.   Enter  an
   extra RETURN when the list is complete.

   The System Dump List is the list of structures where the  system  will
   attempt  to write the crash file whenever the system is halted.  Space
   should be allocated on every structure in the System Dump List for the
   crash  file.   Make  this allocation with the DEFINE STRUCTure startup
   option.  To change the amount of space allocated for the  crash  file,
   select the CHANGE STRUCTure startup option.

                       ______ ________        Startup option:DEFINE SDL<RET>

        Enter names of structures to appear in the system dump list, one
        per line.  Terminate list with a blank line.
        _________        DSKx<RET>
        _____        <RET>

        Startup option:

   To DEFINE the System Search List (E,U):

   Enter the name of each structure in the SSL, in the order in which the
   search list should be accessed.  Type an extra RETURN when the list is
   complete.

   The System Search List is a list of file  structures,  listed  in  the
   order  that  they will be searched whenever the ersatz device SYS:  is
   specified or implied.  The system CUSPs must be accessible through the
   System Search List.

                       ______ ________        Startup option:DEFINE SSL<RET>

        Enter names of structures to appear in the system search list,
        one per line.  Terminate list with a blank line.
        _________        DSKP<RET>
        _____        <RET>

        Startup option:

   To DEFINE a structure (E,U):



                                    A-15
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   Enter the name of a structure to define and press RETURN.  Then, enter
   the logical names of units within that structure.

                       ______ ___________        Startup option:DEFINE STRUCT<RET>

        In  the  following  dialogue,  all  numbers  are  decimal  unless
        otherwise  indicated.  Values within square brackets are defaults
        which will be substituted if RETURN is pressed.

        Any question preceeded with an asterisk indicates  changing  that
        parameter will require the structure to be refreshed.


                                  *** Note ***
        HOME blocks will be initialized immediately after  all  units  in
        the structure have been entered.
                            _________        Structure to define:DSKx<RET>
                                      _________        Disk drive for logical unit 0:RXxn<RET>
                                      _____        Disk drive for logical unit 1:<RET>

   ONCE checks the BAT  blocks  for  each  unit.   BAT  blocks  point  to
   hardware  errors  on the disk pack.  Two BAT blocks are written on the
   pack when it is formatted, and the system updates them when  it  finds
   blocks  on  the  disk that cannot be read from or written to.  The BAT
   blocks are  first  checked  for  consistency  errors.   They  must  be
   formatted   properly,   so   that   the  system  can  read  them.   If
   inconsistencies are found in both blocks on the  unit,  they  will  be
   reported.   If  the first BAT block is all right, the second BAT block
   is not checked, because the second can be updated with a copy  of  the
   first.

   You have the option of listing the bad regions pointed to by  the  BAT
   blocks.   This information would be useful if only the first BAT block
   had a consistency error.  If both BAT blocks  are  inconsistent,  then
   this  information would be useless.  Therefore, if the first BAT block
   is inconsistent, but the second is consistent, and if the list of  bad
   regions  on  the  disk is lengthy, you should consider having the disk
   reformatted.

        Do you want to see the bad regions (NO,YES) [NO]:

   ONCE initializes the HOME blocks.  Each disk pack  contains  two  HOME
   blocks that contain pertinent information about the disk unit, such as
   the file structure it is in, swapping space that has been allocated on
   the unit, and the other unit-specific information that ONCE allows you
   to change.

        [HOME blocks initialized on RXxn]

   If you ask to see the bad regions, the bad regions will be  listed  by
   unit according to the format shown below:



                                    A-16
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


        % Unit RXxn bad blocks:
          First  block  No.   CPU    Cont   Unit  Error
          ------------  ---  -----   ----   ----  -----

   You have the option of initializing the  BAT  blocks.   Initialization
   rewrites the BAT blocks completely.  All previous data about errors on
   the disk will be deleted and the BAT blocks will be filled in  by  the
   system  as  it attempts to read/write the disk.  The BAT blocks should
   only  be  initialized   if   both   have   been   reported   to   have
   inconsistencies,  or  if a disk channel has been erroneously reporting
   hard errors on the disk.

   When the BAT blocks are rewritten, the old BAT blocks  will  be  lost,
   and  the  information  about  bad  areas  on  the disk will have to be
   rewritten into the new BAT blocks.

        Initialize BAT blocks (NO,YES) [NO]:

   If you answer YES, you will be  informed  that  the  action  has  been
   completed:

        [BAT blocks initialized on RXxn]

   Enter a value to specify the cluster size for the structure, or accept
   the default value by pressing RETURN.

   The cluster size  is  critical  to  efficient  use  of  the  disk.   A
   one-block  data  file  requires  3 blocks on disk, including RIB, data
   block, and spare RIB.  If a cluster size of 10 were assigned, 7 blocks
   would  be wasted for this one-block file.  The cluster size should not
   be set to less than 3, but the actual size depends upon  the  type  of
   applications using the disk.  The monitor requires a retrieval pointer
   for each cluster in the file it is accessing.  Therefore, the  cluster
   size  should  not  be  too  small for the size of the average file.  A
   large file with a small cluster size wastes monitor overhead.

   The default value listed by ONCE is determined by  the  type  of  disk
   unit.   The  best  value  depends on the type of application using the
   disk, but the default is often appropriate.

        Parameters for structure DSKx
           *Blocks per cluster (3 - 262143) [10]:

   Your next entry sets the privacy status of  a  structure.   A  private
   structure requires that users who wish to access it must use the MOUNT
   command to access that structure.  A system structure is not  private,
   and  may  be  accessed  by  any  user  without explicitly mounting the
   structure for the job.

            Private structure (NO,YES) [NO]:

   A file structure need not have an owner PPN.  However,  if  the  owner


                                    A-17
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   PPN  is set, the user with that PPN has full file access of the entire
   structure.  Enter a PPN if you want to set or change the owner PPN  of
   the  structure.   If  you  press  return,  the  default  value will be
   accepted and the current PPN will be cleared without replacing it.

   The PPN may be wildcarded.  Note that a PPN of [*,*] allows all  users
   full access to all files on the structure.

            Owner PPN [NONE]:
            Disk-set (1-36,ALL,NONE) [ALL]:

   If this structure will be included in the System Dump List,  you  must
   allocate  space  for  the  crash  file.   Enter a value to specify the
   amount of space to allow on the structure for a crash file.  The crash
   file,  CRASH.EXE,  is  the  copy  of  memory  that  is written to disk
   automatically when the system crashes.  This value should be at  least
   the  size  of  the  maximum amount of memory used by your system.  For
   RP20 and CI disks, however, this value should be 0.

           *Number of K for CRASH.EXE (0 - 4096) [4096]:

   Enter the number of blocks each user is allowed on the  structure  for
   overdraw  purposes.  The maximum allowable value is a variable that is
   dependant upon the type of disk unit.

   When the system attempts to write a file for a user  whose  disk-space
   quota  on  the  structure is not large enough to accommodate the whole
   file, a number of blocks over the quota can be allowed:   this  number
   is  the "overdraw".  When the user reaches the disk quota, the monitor
   does not allow new files to be created.   It  attempts  to  write  the
   files that are open at the time quota was exceeded.

            Blocks allowed for overdraw per user (0 - 307800) [500]:

   Determine the number of consecutive blocks that the system will  check
   for when searching for free space on disk to write files.

   When the system attempts to write to disk,  it  tries  to  allocate  a
   consecutive  number  of  blocks  that  are  free.   You are allowed to
   specify this number.  If the consecutive blocks are found, the file is
   written  and  the SAT block pointers are changed to reflect the change
   in free space.  If the system cannot  find  a  consecutive  number  of
   blocks  of  the  size  specified  here, the file will be stored in the
   first free space, fragmented if necessary.  Therefore, the  value  you
   give  can  affect  the  efficiency of file storage on the disk.  It is
   recommended that you use a multiple of the cluster size.  A number too
   small  can result in fragmented disk files and excessive time spent in
   accessing files.

            Consecutive blocks tried for on output 90 - 262143) [30]:

   Enter the number of bits per cluster count, or press RETURN to  accept


                                    A-18
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   the default.

           *Bits per cluster count (0 - 18) [12]:

   The system search list is a list of file structures, in the order that
   they will be searched whenever the ersatz device SYS:  is specified or
   implied.  The system CUSPs  must  be  accessible  through  the  system
   search  list.   Enter YES if you want this structure to be included in
   the SSL.

            Make this the only structure in the SSL (NO,YES) [YES]:

   The system dump list is the list of structures where the  system  will
   attempt  to write the crash file whenever the system is halted.  Space
   should be allocated on every structure in the system dump list for the
   crash file.  Allocation for the crash file was made above.

            Make this the only structure in the SDL (NO,YES) [YES]:

   Specify a unit identification.  This  identification  resides  in  the
   HOME  blocks  on  the disk unit, for unique identification of the disk
   pack.  Therefore, it  should  be  a  unique  number  that  will  never
   conflict  with  another code.  Every pack should have a unit-id of six
   alphanumeric characters that may be a portion  of  the  pack's  serial
   number.

        Parameters for unit RXxn
            Unit ID [XXXXn]:

   Specify the number  of  SAT  blocks  on  the  unit.   The  default  is
   calculated according to the type of disk unit.  As a general rule, you
   should select the minimum number of  SAT  blocks,  to  reduce  monitor
   overhead.

           *SAT blocks per unit (8 - 81) [8]:

   Enter the number of SAT blocks to be stored in memory  for  the  unit.
   While  the  unit  is mounted, the SAT blocks on the unit are stored in
   memory for fast access by the system.  All of the SAT blocks should be
   stored in memory.

            SAT blocks in core (1 - 8) [8]:

   Specify the amount of swapping space allowed on the unit.   The  total
   allocated on all units should be at least 2 times memory size.

   If enough space is not allowed, swapping  space  may  run  out  during
   timesharing.   The only way to expand the swapping space is to refresh
   the disk, which destroys all user files.  If the unit is or will be in
   the  system's  Active  Swapping List, you must allocate some space for
   swapping on the unit.



                                    A-19
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


           *K for swapping (0 - 4807) [4807]:

   ONCE calculates the address of  the  first  logical  block  where  the
   system  will  attempt  to write swapped data.  This address appears as
   the default value.  The default is usually  appropriate,  because  the
   swapping  space  is  put  in  the  middle of the disk, to minimize the
   average seek time when accessing the swapping space.  However, you may
   change this value.

           *First logical block for swapping (33090 - 269332) [134672]:

   The swapping list is divided into  classes,  where  Class  0  is  used
   first, then Class 1.

            Swapping class (0 - 1) [0]:

   The active swapping list is the list of units that the system will use
   to  store  data  that is swapped to disk.  If you wish to include this
   unit in the active swapping list, enter YES below:

            Make this the only unit in the ASL (NO,YES) [YES]:

   If you have changed any  parameters  marked  with  an  asterisk,  ONCE
   reminds you that the structure must be refreshed:

        % Structure DSKx must be refreshed before it can be used.

        Structure to define:

   When you have finished defining a structure,  you  may  enter  another
   structure  to  DEFINE.  If you wish to be prompted for another startup
   option, press RETURN.



   A.3.3  DESTROYing All Structures   A.3.3  DESTROYing All Structures

   This section describes the DESTROY startup  option.   This  option  is
   available only in executive mode.

   The DESTROY option is very powerful.  If used with disks that  already
   contain   data  or  structure  definitions,  the  data  and  structure
   information  will  be  destroyed.   The  HOME  and  SAT   blocks   are
   initialized, deleting all information about the disk's place in system
   lists and file structures.  For this reason, the ONCE program  ensures
   that  you  want  to  select  the  DESTROY option by printing a warning
   message before accepting the DESTROY startup option.  This warning  is
   intended to prevent accidental destruction of disk data.

        %WARNING:  All structures will be refreshed.  All disk files
        will be  destroyed.   All information on currently spinning packs
        will be lost.  Do not proceed unless you are positive that you


                                    A-20
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


        want to do this.

        Proceed  (NO,YES) [NO]:

   If you type NO or press RETURN in response to this question, ONCE will
   prompt you for another startup option.

   If you type YES and press RETURN, the disks will be  refreshed.   When
   ONCE is finished with that operation, it prints the following message:

        [HOME blocks initialized on all units]

   You are then prompted for another startup option.



   A.3.4  DISSOLving a Single Structure   A.3.4  DISSOLving a Single Structure

   This section describes the  DISSOLVE  startup  option.   The  DISSOLVE
   option is available in executive and user modes.

   In the following example, the  DISSOLVE  startup  option  is  selected
   first,  followed by the structure to dissolve.  The text that you type
   is underlined.

   A file structure is dissolved by deleting all reference to  that  file
   structure on the unit.  The units in that structure will not be listed
   as part of any file structure until you define  a  file  structure  as
   containing those units.

                       _____________        Startup option:DISSOLVE<RET>
                              _________        Structure to dissolve:DSKx<RET>
                                                                ________        All data will be destroyed.  Are you sure (NO,YES) [NO]:YES<RET>
        Structure to dissolve:

   Enter another structure to dissolve or press RETURN to select  another
   startup option.



   A.3.5  EXITing to Monitor Level   A.3.5  EXITing to Monitor Level

   This section illustrates the EXIT startup option.  EXIT returns you to
   monitor level.

   You may EXIT only when running ONCE in user mode.

                       _________        Startup option:EXIT<RET>
        .





                                    A-21
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   A.3.6  GO Option   A.3.6  GO Option

   This  section  describes  the  GO  startup  option.   This  option  is
   available only in executive mode.

                       _______        Startup option:GO<RET>

   The GO option allows you to start up the monitor without changing  any
   disk parameters.  INITIA is allowed to run, but offline disk units are
   not checked for or reported.  Because the  GO  startup  option  starts
   INITIA, one of the following files must exist:

        SYS:TTY.INI to set up terminal line characteristics.

        SYS:OPR.ATO to be read by OPSER automatically.

   INITIA first attempts to read TTY.INI.  If the file does not exist  in
   SYS,  it  runs OPSER, which attempts to read OPR.ATO.  If OPR.ATO does
   not exist, OPSER prints an error message.  You  can  exit  from  OPSER
   typing CTRL/C and continue.

   If TTY.INI exists, then INITIA follows the  instructions  in  TTY.INI.
   The  following  example  assumes that TTY.INI exists, and contains the
   line:

        CTY       GALOPR

   INITIA reads the line, and starts OPR on the CTY, where  the  commands
   are   entered.   INITIA  reads  SYS:SYSJOB.INI,  starting  the  system
   programs, and then waits for input.  Type the  EXIT  command  to  exit
   from OPR:

        MONITOR  FEB-16-88
                   _____ __________        Why reload:OTHER ;TEST<RET>
              ______________        Date: FEB-20-88<RET>
              __________        Time: 11:35<RET>

                        _______        Startup option: GO<RET>

        MONITOR  11:35:32  CTY  system 1026
        Connected to Node CENTR(0) Line # 45
        .LOGIN 1,2
        .R OPR
            _________        OPR>EXIT<RET>

        .



   A.3.7  NOINITIA Option   A.3.7  NOINITIA Option

   This section describes the NOINITIA startup option.   This  option  is


                                    A-22
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   available only in executive mode.

   You can start up the monitor without running INITIA to initialize  the
   terminal  lines  by  using  the  NOINITIA option.  Note that this also
   prevents INITIA  from  reading  the  SYSJOB.INI  file  as  well.   The
   SYSJOB.INI file is described in Chapter 10.

   The NOINITIA startup option is identical to the GO option, except that
   it prevents the INITIA program from running.  Therefore, it is a quick
   way to  start  the  monitor  without  changing  any  disk  parameters.
   However,  the  NOINITIA option should not be used to start timesharing
   because INITIA is required to initialize terminal lines.   INITIA  can
   be  run  later from the CTY using the INITIA SYS monitor command.  See
   Chapter 10 for more information about INITIA.

        TOPS-10 7.04 system FEB-16-88
                   _______________        Why reload:OTHER;TEST<RET>
             ______________        Date:FEB-16-88<RET>
             __________        Time:11:44<RET>

                        _____________        Startup option: NOINITIA<RET>

   After entering NOINITIA and pressing RETURN, ONCE checks  for  offline
   disk  units  and  lists  them.  However, you are not allowed to change
   them.

        %UNIT-NAME is offline

        TOPS-10 7.04 system FEB-16-88

        .



   A.3.8  REFRESHing Selected Structures   A.3.8  REFRESHing Selected Structures

   This section describes the REFRESH startup option.  In  the  following
   example, the REFRESH startup option is selected first, followed by the
   structure to refresh.  The text that you type is underlined.

   Structures may be refreshed in executive and user modes.

                                  WARNING

           When you refresh a file structure you destroy all data
           on  the  structure.   Therefore, ONCE attempts to make
           absolutely certain that  you  intend  to  refresh  the
           structure before doing so.

   The  REFRESH  option  forces  a  refresh   procedure   to   initialize
   characteristics  that require refreshing.  When you select the REFRESH
   startup option, the HOME blocks of all units are checked to  determine


                                    A-23
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


   which  file  structures  need to be refreshed.  Then, you are asked to
   enter the name of a file structure to be refreshed.  After refreshing,
   you  will  again  be  asked  for  the  name  of a file structure to be
   refreshed.  If you press RETURN without providing the name of  a  file
   structure, you will be prompted to enter another startup option.

                       ____________        Startup option:REFRESH<RET>
                             _________        Structure to refresh:DSKx<RET>
        Structure does not need refreshing.
                                   _______        Are you sure (NO,YES) [NO]:NO<RET>
                             _____        Structure to refresh:<RET>

        Startup option:

   Enter another structure to refresh or press RETURN.



   A.3.9  SHOWing System Parameters   A.3.9  SHOWing System Parameters

   This section describes the SHOW  startup  option.   In  the  following
   examples,  the  SHOW startup option is selected first, followed by the
   item to show.  The text that you type is underlined.

   To SHOW the Active Swapping List (E,U):

                       ____ ________        Startup option:SHOW ASL<RET>

        Swapping units:
                Unit    UnitID  Class   Space (K)
                ----    ------  -----   ---------
                RPA0    DSKD0     0          4807
                RPA6    KLAD0     0          4807
                RPB4    DSKP0     0         20000
                     (Memory size = 2048K)

        Startup option:

   The Active Swapping List is the list of units that the system will use
   to  store  data that is swapped to disk.  The swapping list is divided
   into classes, where Class 0 is used first, then Class 1, Class 2,  and
   so on.

   To SHOW the date (E):

                       ____ _________        Startup option:SHOW DATE<RET>
        Thursday 4-Feb-88 :27:58

        Startup option:

   To SHOW networks (E,U):



                                    A-24
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


                       ____ ___________        Startup option:SHOW NETWOR<RET>

        Networks:
                System-wide node name:  DEC10
                ANF-10 node DEC10(10)
                DECnet node DEC10(7.169)
                LAT service:  DEC10

        Startup option:

   To SHOW the System Dump List (E,U):

                       ____ ________        Startup option:SHOW SDL<RET>
        System dump list:  DSKD, DSKP

        Startup option:

   To SHOW the System Search List (E,U):

                       ____ ________        Startup option:SHOW SSL<RET>

        System search list:
                Structure       Position
                ---------       --------
                  DSKD              0

        Startup option:

   To SHOW disk sets (E,U):

                       ____ _________        Startup option:SHOW SETS<RET>
        Disk sets:  2, 6, 11, 26

        Startup option:

   To SHOW a structure (E,U):

   Enter a  structure  to  SHOW.   If  you  enter  ALL,  ONCE  lists  the
   parameters  for  all  the  structures  that are online and repeats the
   question so that you can SHOW parameters for another structure.   When
   you  enter  a  structure  to  show,  you  are  provided with a list of
   parameters for that structure or  structures.   This  listing  can  be
   useful  if  you wish to change the parameters of a file structure.  If
   you do not wish to SHOW a structure, press  RETURN  and  you  will  be
   prompted for another startup option.

                       ____ ___________        Startup option:SHOW STRUCT<RET>
                  _________        Structure:DSKD<RET>

        Parameters for structure DSKD
           *Blocks per cluster:  10
            Private structure:  NO


                                    A-25
                            ONCE STARTUP OPTIONS                            ONCE STARTUP OPTIONS


            Owner PPN:  [10,56]
            Disk-set:  ALL
           *Number of K for CRASH.EXE:  4096
            Blocks allowed for overdraw per user:  500
            Consecutive blocks tried for on output:  0
           *Bits per cluster count:  15
            Position in the SSL:  0
            Unit in the SDL:  YES
                  _____        Structure:<RET>

        Startup option:

   To SHOW a unit (E,U):

   Enter a unit to SHOW.  When you enter a unit to show, you are provided
   with  a  list  of  the  parameters of any disk unit or all disk units.
   This listing is useful when changing the parameters of  a  disk  unit.
   If  you  type ALL, parameters of all of the disk units will be listed.
   If you specify a unit, ONCE lists the unit parameters and then repeats
   the question so you can SHOW another unit.  If you do not wish to SHOW
   a unit, press RETURN and you will  be  prompted  for  another  startup
   option.

                       ____ _________        Startup option:SHOW UNIT<RET>
               _________        Unit:  RPA0<RET>

        Parameters for unit RPA0
            Unit ID:  DSKD0
           *K for swapping:  4807
           *First logical block for swapping:  134672
            Swapping class:  0
           *SAT blocks for unit:  8
           *SAT blocks in core:  8
            Unit in the ASL:  YES
             _____        Unit:<RET>

        Startup option:

















                                    A-26












                                 APPENDIX B                                 APPENDIX B

                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR



   B.1  REBUILDING THE MONITOR LIBRARY FILE   B.1  REBUILDING THE MONITOR LIBRARY FILE

   The monitor library file, TOPS10.REL is distributed with  the  TOPS-10
   monitor  in  a  standard  form.   It is linked with the monitor common
   modules (COMMON, COMDEV, and COMMOD), as explained in Section  9.3  of
   this  manual.   For  new  installations, the procedure in Chapter 9 is
   sufficient for building the monitor.

   The monitor library file contains assembled code for all  the  bundled
   monitor  modules.   If  an  installation has made modifications to the
   monitor, or if you changed any settings of feature test options in the
   FGEN portion of MONGEN, you must reassemble the monitor library file.

                                    NOTE

           The symbol values and configuration  options  possible
           with  this  procedure  are  so  numerous  that  it  is
           impossible to predict results  in  every  combination.
           Therefore,  you  should  be  aware  that the resulting
           operating system  may  not  be  supported  by  Digital
           Equipment Corporation.

   Several modules must appear in a specific order.  They are:

        F.MAC
        S.MAC
        NETPRM.MAC
        DTEPRM.MAC
        SYSCNF.MAC+COMMON.MAC
        SYSCNF.MAC+COMDEV.MAC
        SYSCNF.MAC+COMMOD.MAC
        EJBDAT.REL
        FILFND.MAC
        FILIO.MAC
        FILUUO.MAC
        RHXKON.MAC
        RPXKON.MAC


                                    B-1
                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR


   These files must precede all other modules, and must be listed in this
   order.   The following files must be placed, in this order, at the end
   of the list:

        PATCH.MAC
        EDDT.REL
        USRONC.MAC

   For more information about building the monitor library file, read the
   batch control file COMPIL.CTL.



   B.2  CHANGING COMMON SYMBOLS   B.2  CHANGING COMMON SYMBOLS

   The COMMON, COMDEV, and COMMOD modules contain  symbols  that  may  be
   redefined  with  MONGEN.   This  section  lists  those  symbols.  When
   entering the symbols to MONGEN, type them in the form:

        symbol,value

   The symbols and their default values are listed here as they might  be
   typed in the MONGEN dialog.

   The following symbols may be changed in Questions 126 through  128  of
   the  SYSGEN  portion  of  MONGEN.   Decimal  values  are  changed with
   Question 126, Octal values are changed with Question 127,  and  SIXBIT
   values are changed with Question 128.



   B.2.1  Symbols Defined in COMMON   B.2.1  Symbols Defined in COMMON

   The following symbols are defined in COMMON.  The symbols  are  listed
   in the form symbol,default-value.



   B.2.1.1  Decimal Symbols,Values   B.2.1.1  Decimal Symbols,Values - The following  symbols  are  defined
   with values in decimal radix.

        ERPTMX,80           Specifies the length of block for errors.

        EVBN,128            Blocks available for mapping buffers and
                            IOWDs.

        HIGHXC,80           Highest extended channel.

        IFC0,5              Swapper fairness count maximum.

        LIM1HS,30           Limit of stopcodes in any 1 hour period.



                                    B-2
                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR


        LOGSIZ,34           17K (current size of LOGIN CUSP).

        M.BMAX,13           Maximum number of simultaneous batch job
                            streams.

        M.CBAT,10           Number of bad addresses in per CPU bad.

        M.CLSN,16           Number of CPU classes for scheduler.

        M.CMCT,32           Number of calls to CHKTAL routine.

        M.DNSZ,30000        DECnet free core size.

        M.DTLS,90           CPU time limit (seconds) to set.

        M.EBPS,12500000     Default number of EBOX ticks per second.

        M.ENQD,100          Default ENQ quota.

        M.ENQM,500          Maximum number of active queues.

        M.ETSZ,3000         Ethernet free core size.

        M.KNSZ,3000         KLNI free core size.

        M.LASZ,15000        LAT free core size.

        M.LCST,0            Length of the Line Data Block reserved for
                            customer definition.

        M.MBPS,9750000      Default MBOX references per second.

        M.OMSM,60           Number of minutes between calls to BIGBEN.

        M.PCST,0            Length of the Process Data Block reserved for
                            customer definition.

        M.PFHT              Default Page Fault Handler timer trap
                            interval.

        M.SCSZ,4000         SCA free core size.

        MAXNBP,64           Maximum number of SNOOP UUO breakpoints.

        MEMITL,4            Number of ways memory can be interleaved.

        MINCOR,Jobn*300     Assume 3 DDBS per job.

        MINMAX,1024*12      Smallest legal CORMAX.

        MLACTS,39           Maximum length of the account string.



                                    B-3
                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR


        NSPMEM,1000         1000 nano-seconds per memory cycle.

        PAVJSP,20           Predicted average job size.

        RLDTIM,112          Time to auto-reload.

        SFC0,20             CPU0 scheduler fairness count.

        SFC1,20             CPU1 scheduler fairness count.

        TTDMOS,16           Maximum output string for RSX-20F.

        UFC0,10             UUO fairness counter maximum.

        UFC1,10             UUO fairness counter for slave.



   B.2.1.2  Octal Symbols,Values   B.2.1.2  Octal Symbols,Values - The following symbols are  defined  by
   values in octal radix.

        BPTBIT,0            Initial user "SET DDT BREAKPOINT" setting.

        CTYDCR,0            Delay for RETURN on CTY during ONCE.

        CTYDLF,0            Delay for LINE FEED on CTY during ONCE.

        DEFBPT,0            Initial CPU breakpoint mask (one bit per
                            CPU).

        DEFDEB,0            Debugging word.

        DTTRY,4             Number of times to retry on DECtape errors.

        INDPPN,0            0 means project programmer numbers are
                            dependant across projects.  That is, owner of
                            PPN is determined by programmer number only.

        LIM1MS,4            Limit of stopcodes in any 1 minute period.

        LIM8MS,7            Limit of stopcodes in any 8 minute period.

        M.BMIN,0            Minimum number of guaranteed batch jobs.

        M.CLSS,1            Scheduler is class system scheduler.

        M.DCLS,0            Scheduler class for new jobs.

        M.EMRT,0            Default is regular runtime.

        M.ITA,0             Default is to use interval timer.



                                    B-4
                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR


        M.JMAX,M.JOB-M.BMIN Maximum number of simultaneous interactive
                            jobs.

        M.PIDN,JOBN*2       Size of PIDTAB.

        M.RCMP,0            Prohibits execution of restricted command
                            features from remote terminals.

        M.STOF,0            Frequency to call start TTY output (must be
                            2^n-1).

        M.WCH,JW.WMT        Watch bits used to set initial.

        M.XFFA,0            Do file access protection checking on [1,2]
                            and JACCT.

        SCHEDN,0            Schedule value.

        STDENS,5            Standard density (6250 BPI).

        SYSSEG,-1           Minus one for fast GETSEG from SYS.

        TTXTRA,0            Number of extra TTY DDBs for slave lines.



   B.2.1.3  SIXBIT Symbols,Values   B.2.1.3  SIXBIT Symbols,Values - The following symbols are defined  by
   values in SIXBIT radix.

        M.CRSH,CRSCPY       Default crash copy program name.

        M.MAIL,MS           Name of mail program



   B.2.2  Symbols Defined in COMDEV   B.2.2  Symbols Defined in COMDEV

   The following symbols are defined in COMDEV.  The symbols  are  listed
   in the form symbol,default-value.



   B.2.2.1  Decimal Symbols,Values   B.2.2.1  Decimal Symbols,Values - The following  symbols  are  defined
   with values in decimal radix.

        DSETIM,320          Maximum time to do a data security erase
                            (seconds).

        IDLSEC,90           Any terminal idle this number of seconds gets
                            disconnected.

        LPTSIZ,27+2         LPT buffer size in words (132 column


                                    B-5
                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR


                            printer).

        M.AIDL,n            The number of seconds before idle ANF-10
                            lines are disconnected, where n defaults to
                            the current value for IDLESEC (see above).

        M.DIDL,n            The number of seconds before idle dataset
                            lines are disconnected, where n defaults to
                            the current value for IDLESEC (see above).

        M.LIDL,n            The number of seconds before idle LAT lines
                            are disconnected, where n defaults to the
                            current value for IDLESEC (see above).

        M.NIDL,n            The number of seconds before idle NRT/CTERM
                            lines are disconnected, where n defaults to
                            the current value for IDLESEC (see above).

        MSGMAX,512          Maximum message size in the network.

        MTSIZ,128           Magtape buffer size in words.

        NOISE,12            Noise record length in bytes.

        NTTPLN,32           Size of a terminal Process Control Block.

        TAPTIM,60           Maximum time to skip 10 records (seconds).

        TTCHKS,8            Size of words in a TTY chunk, in powers of 2,
                            with a minimum of 8.  Increasing the size of
                            a TTY chunk can increase TTY throughput.

        TTYRMT,1            Remote terminal.  If 1, terminal is remote.
                            If 2, terminal is local.



   B.2.2.2  Octal Symbols,Values   B.2.2.2  Octal Symbols,Values - The following symbols are  defined  by
   values in octal radix.

        MAXODR,6            Maximum number of data requests for input
                            devices.

        MSGXMX,512          Maximum message size the -10 will transmit.

        MTDAEM,10           Number of times per reel to call DAEMON for
                            magtape error reports.

        MTDLTP,LT.BLP       Default label type.

        MTELOG,-1           Zero to log all recovered magtape errors.



                                    B-6
                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR


   B.2.3  Symbols Defined in COMMOD   B.2.3  Symbols Defined in COMMOD

   The following symbols are defined in COMMOD.  The symbols  are  listed
   in the form symbol,default-value.



   B.2.3.1  Decimal Symbols,Values   B.2.3.1  Decimal Symbols,Values - The following  symbols  are  defined
   with values in decimal radix.

        BLKMAX,100000       Maximum number of blocks to transfer (KL10).

        BLKMAX,252          Maximum number of blocks to transfer (KS10).

        CHVIFP,10           Standard initial fairness count for
                            positioning.

        CHVIFT,10           Standard initial fairness count for
                            transferring.

        DSKTRY,10           Number of error trys on disk data errors.

        FIL4WD,9            Number of 8 word core blocks per job (for
                            NMB,PPB,UFB,ACC).

        M.BNDT,16           Number of seconds before binding CI disks at
                            ONCE time.

        MAXUSI,8            Maximum negative USETI (maximum number of
                            extended RIBs).

        MFDSIZ,30           Number of blocks for initial MFD set by
                            refresher.

        PTRLEN,7            Number of in-core retrieval pointers per
                            file.

        RCLTRY,10           Number of times to try 'DSKTRY' data errors.

        SERTRY,3            Number of times to try on search errors.

        SWCLSN,7            Highest class for swapping.

        SWPMAX,8            Maximum number of units for swapping.

        UNVRSF,500          Reciprocal safety factor for each unit.



   B.2.3.2  Octal Symbols,Values   B.2.3.2  Octal Symbols,Values - The following symbols are  defined  by
   values in octal radix.



                                    B-7
                           MODIFYING THE MONITOR                           MODIFYING THE MONITOR


        CCWMAX,1            Maximum number of data channel command words.

        LBFSIZ,1000         Default large-buffer size (OP.LBF on an
                            OPEN).  Specify the octal value in words in
                            multiples of 200.

        LIMLVL,5            Maximum number of nested SFDs for this
                            monitor.

        LNMMXL,144          Maximum length of any logical name specified.

        LNMMAX,77           Maximum number of logical names.

        M.CBMX,JOBN-1       Default blocks in disk cache.

        M.DFLB,3            Default number of large disk buffers.

        M.DFNB,6            Default number of disk buffers.

        MFDPRV,555000       MFD privileges (all can READ, LOOKUP).

        PRVFIL,057          Standard file privilege.

        PRVSPL,077          Protection for spooled output.

        PRVSYS,155          Protection for most system programs.

        PRVUFD,775          Standard UFD privilege.

        PRYSYS,157          Protection for SYS:*.SYS.

        RIBERN,0            RIB error threshold for RIB errors on
                            structures in system search list.

        SYNRPR,357000       Privileged files in SYS.

        SYRDPR,355000       Non-privileged files in SYS.

        SYSPRV,775000       SYS UFD privileges (project 1 can read/create
                            on SYS).



   B.2.3.3  SIXBIT Symbols,Values   B.2.3.3  SIXBIT Symbols,Values - The following symbol is defined by  a
   value in SIXBIT radix.

        M.QSTR,             Default structure  for  device  queues.   The
                            default value for M.QSTR is blank.  The value
                            is the SIXBIT name of the file structure  for
                            queuing  programs set up by ONCE-only code to
                            be the first stream up.



                                    B-8












                                 APPENDIX C                                 APPENDIX C

                        SETTING SCHEDULER PARAMETERS                        SETTING SCHEDULER PARAMETERS



   The SCDSET  program  enables  a  privileged  user  to  accomplish  the
   functions  of the SCHED.  monitor call, and to manipulate a SCDMAP.SYS
   file.  For example, you can use SCDSET to do the following:

         o  Set system usage quotas

         o  Adjust scheduler parameters

         o  Create and modify a SCDMAP.SYS file

         o  Move a SCDMAP.SYS file into the SYS area

         o  Update the class of all logged-in jobs automatically



   C.1  REQUIRED PRIVILEGES   C.1  REQUIRED PRIVILEGES

   The privileges required to use SCDSET depend on the functions you want
   to  accomplish.   The following list describes the privileges required
   for different functions.

         o  To manipulate a SCDMAP.SYS file, you need only  to  have  the
            privileges necessary to move the file into the SYS area.

         o  To set system usage quotas, and adjust scheduler  parameters,
            you  must  be  logged in as [1,2], or the SCDSET program must
            have JACCT privileges.

         o  To use the READ/SET functions,  you  must  be  logged  in  as
            [1,2].



   C.2  CAUTIONS   C.2  CAUTIONS

   If you misunderstand how the scheduler works, or make typing  mistakes


                                    C-1
                        SETTING SCHEDULER PARAMETERS                        SETTING SCHEDULER PARAMETERS


   while  using  SCDSET, you may unintentionally halt all work being done
   on the system.   Therefore,  practice  working  with  SCDSET  and  the
   scheduler  during  non-production  timesharing  until you are familiar
   with both of them.

   To prevent system quotas and sytem load from affecting your work,  run
   SCDSET in a High Priority Queue (HPQ) except when you create or modify
   a SCDMAP.SYS file.  If you use an HPQ when  you  create  or  modify  a
   SCDMAP.SYS file, you adversely affect system performance.



   C.3  SCDSET COMMANDS   C.3  SCDSET COMMANDS

   This  section  describes  the  top-level  SCDSET  commands.   It  also
   describes  EDIT  subcommands,  and the parameters you can read and set
   with the READ/SET commands.



   C.3.1  EDIT   C.3.1  EDIT

   Calls the MAKMAP routine.  The MAKMAP routine enables you to create or
   modify a SCDMAP.SYS file.  EDIT uses the following subcommands:

   Subcommand     Function

   COPY/SET       Copies a file from a area or device to the SYS area.

   EXIT           Returns to top-level.

   HELP           Displays EDIT help text.

   ONE CLASS      Changes one scheduler type to a scheduler class in  the
                  SCDMAP.SYS file.

   RANGE          Changes a range of scheduler types to scheduler classes
                  in the SCDMAP.SYS file.

   READ           Reads in a SCDMAP.SYS file for modification.

   TYPE           Displays a specified range of scheduler types.

   WRITE          Writes a SCDMAP.SYS file to a device or area.



   C.3.2  EXIT   C.3.2  EXIT

   Returns your job to monitor level.




                                    C-2
                        SETTING SCHEDULER PARAMETERS                        SETTING SCHEDULER PARAMETERS


   C.3.3  HELP   C.3.3  HELP

   Displays help text.



   C.3.4  READ/SET   C.3.4  READ/SET

   Execute functions of the SCHED.  monitor call.  You can  read  or  set
   the following parameters:

   Parameter      Meaning

   AVG SWAP TIME
                  The estimated average swap time for a  typical  job  on
                  the  system.   The  AVG  SWAP TIME controls the rate at
                  which the swapper changes from one class  to  the  next
                  when it chooses jobs to swap in.

   BB CLASS
                  The class to run as background batch.  Background batch
                  class jobs run whenever the system is otherwise idle.

   BB SWAP TIME
                  The estimated time required to swap a background  batch
                  job.   The  scheduler  uses  the BB SWAP TIME to decide
                  when the system should permit a background batch job to
                  be swapped in.

   CORE SCHEDULING INTERVAL

                  The rate at  which  the  system  stops  accounting  for
                  in-core  protect  time  and stops using in-core protect
                  time to requeue jobs.  The CORE SCHEDULING INTERVAL  is
                  important for systems with a large amount of memory, or
                  very few users.

   CPU SCAN ORDER
                  The scan table used by a CPU or CPUs.

   DEFAULT CLASS
                  The class new jobs assume when they first log in.   The
                  DEFAULT  CLASS  applies  to a new job until LOGIN reads
                  the job's class from SCDMAP.SYS and changes  the  class
                  appropriately.

   FREE CORE GOALS/LIMITS
                  The percentage of free and potentially free memory that
                  must  be  available to the swapper.  If this percentage
                  is not available, the swapper swaps out  jobs  in  long
                  term wait.



                                    C-3
                        SETTING SCHEDULER PARAMETERS                        SETTING SCHEDULER PARAMETERS


   HIGH SEGMENT RETENTION TIME
                  The dormant high segment retention time is high segment
                  in-core  protect  time.   It prevents the deletion from
                  memory of high segments which have become dormant until
                  a specified time has elapsed.

   IN-CORE FAIRNESS FACTOR
                  The factor that controls the rate at which out of  core
                  jobs and in-core jobs are scheduled for swapping.

   JOB CLASS
                  The scheduler class of all logged in jobs.

   MS INTERVAL
                  The Micro Scheduling interval  (in  jiffies).   The  MS
                  interval  specifies  how  often the scheduler selects a
                  class to be scheduled.

   PRIMARY PERCENTAGES
                  The system  usage  percentages  for  a  particular  job
                  class.   The  sum  of  all  primary  percentages may be
                  fixed.  In this case, the sheduler only chooses  a  job
                  to  run  when its class has the highest priority.  When
                  the sum is fixed,  a  class  cannot  exceed  its  class
                  quota.   If  the  only runnable jobs are in this class,
                  the scheduler runs the null job.

   PROT
                  A constant used to calculate  the  minimum  core  usage
                  quota.  The measurement is in microseconds.

   PROT1
                  The in-core timeslice used after a job has expired  its
                  initial  in-core protect time.  PROT1 controls the rate
                  at which  I/O  bound  jobs  circulate  around  the  run
                  queues.

   PROTM
                  The maximum in-core protect time assigned to a job.  It
                  specifies an upper limit for very large jobs.

   PROTOT
                  A constant used to calculate  the  minimum  core  usage
                  quota.  The measurement is in microseconds.

   RESPONSE FAIRNESS
                  The rate at which the scheduler chooses  jobs  to  run.
                  The  rate depends on the order of the jobs in the "just
                  swapped in list", and the allocations specified by  the
                  job classes.

   RUNTIME BY CLASS


                                    C-4
                        SETTING SCHEDULER PARAMETERS                        SETTING SCHEDULER PARAMETERS


                  The amount of runtime each class  has  used  since  the
                  last   time  that  a  class  quota  was  changed.   The
                  measurement  is  in  jiffies.   This   parameter   also
                  displays the percentage of runtime each class has used.

   SCHEDULER FAIRNESS
                  The rate at which PQ2 jobs are scheduled ahead  of  PQ1
                  jobs.   SCHEDULER FAIRNESS allows compute bound jobs to
                  run even when there are many interactive jobs running.

   SECONDARY ALLOCATION
                  The maximum amount that a class  will  be  given  after
                  using up the primary percentage.

   SWAPPER FAIRNESS
                  The rate at which PQ2 jobs are swapped in ahead of  PQ1
                  jobs.

   TIME BASE
                  The base run quanta (in milliseconds)  for  either  run
                  queue.  Note that internally, the scheduler stores this
                  value in local  jiffies.   Therefore,  it  may  not  be
                  possible   to   adjust   the   time   slice  by  a  few
                  milliseconds.

   TIME MAXIMUM
                  The maximum quantum runtime that a job uses.

   TIME MULTIPLIER
                  The parameter that asssigns a  larger  quantum  runtime
                  for  large  jobs.  The quantum runtime is the result of
                  the following:

                  (TIME BASE)+(TIME MULTIPLIER)*(job size)

                  The scheduler compares the quantum  runtime  to  a  run
                  quantum  maximum,  and  assigns  the smaller of the two
                  values to large jobs.



   C.3.5  UPDATE JOBS   C.3.5  UPDATE JOBS

   The UPDATE JOBS command updates all the job parameters  defined  above
   for  logged  in  jobs,  and  writes the changes to files if requested.
   UPDATE JOBS accomplishes this through the FIXJOB routine,  which  does
   the following:

         o  Asks if you want to move a new SCDMAP.SYS  file  to  the  SYS
            area.   If  you answer yes, you move the SCDMAP.SYS file.  If
            you answer NO, FIXJOB calls the MOVMAP routine  to  move  the
            SCDMAP.SYS file.


                                    C-5
                        SETTING SCHEDULER PARAMETERS                        SETTING SCHEDULER PARAMETERS


         o  Gets each logged in job's PPN.

         o  Determines whether to use the batch half or timesharing  half
            of the SCDMAP.SYS file currently on SYS.

         o  Looks in ACTDAE.SYS for the user's scheduler type.

         o  Executes the SCHED.  monitor call to  put  that  job  in  the
            correct scheduler class.

         o  Prints an error message for each logged in job  it  does  not
            find  in  ACTDAE.SYS,  or  for which the SCHED.  monitor call
            failed.

   The FIXJOB routine does not execute the SCHED.  monitor call for [2,5]
   jobs, or for its own job.



   C.4  THE SCDMAP.SYS FILE   C.4  THE SCDMAP.SYS FILE

   You must have the SCDMAP.SYS file on  SYS.   The  file  contains  1024
   (decimal) nine-bit entries (256 decimal words).  The first 512 entries
   constitute the map for  timesharing  users,  the  second  512  entries
   constitute  the  map  for  batch  users.  Each entry contains a number
   between  zero  and  thirty-one  inclusive  (0-31)  that  specifies   a
   scheduler class.  Each of the 512 scheduler types for both timesharing
   and batch has an entry.

   At login time, LOGIN looks in ACTDAE.SYS for the PPN's scheduler  type
   and  then looks in SCDMAP.SYS for the current scheduler class for that
   scheduler type and job type (timeshare or batch).

   If you do not want to differentiate between timeshare and  batch,  the
   second half of the map should be identical to the first half.

   The format of the SCDMAP.SYS file is as follows:

















                                    C-6
                        SETTING SCHEDULER PARAMETERS                        SETTING SCHEDULER PARAMETERS


   Table C-1:  SCDMAP.SYS Format   Table C-1:  SCDMAP.SYS Format


   ______________________________________________________________________

     BITS              0-8          9-17         18-26         27-35
   ______________________________________________________________________

     Word 0            n0           n1           n2            n3

     Word 1            n4           n5           n6            n7

     Word 2            n8           n9           n10           n11

     nXXX is the location of the Scheduler Class for timesharing  users
     of Scheduler Type XXX, as stored in ACTDAE.SYS.

     Word 127          n508         n509         n510          n511

     Word 128          m0           m1           m2            m3

     Word 129          m4           m5           m6            m7

     Word 130          m8           m9           m10           m11

     Word 255          m508         m509         m510          m511

     mXXX is the location of the Scheduler Class  for  batch  users  of
     Scheduler Type XXX, as stored in ACTDAE.SYS.
   ______________________________________________________________________
























                                    C-7

























































                                    D-1












                                 APPENDIX D                                 APPENDIX D

                     CREATING BOOTABLE FRONT-END MEDIA                     CREATING BOOTABLE FRONT-END MEDIA



   This appendix documents the procedure for creating bootable  front-end
   media  for  RSX-20F.  These media provide a fallback capability if the
   front-end file system on your system's RP06 disk is damaged or lost.

   The installation process comprises two parts.  Part 1 of the  process,
   described  in  Section  D.1,  creates  the  "A"  and  "B"  DECtapes or
   floppies, and requires  that  your  system  be  standalone.   Part  2,
   described  in  Section D.2, creates the "C" DECtape or floppy, and can
   be performed at any time, either before or after part 1 is  performed,
   without shutting down timesharing on the KL.



   D.1  BUILDING THE PRIMARY BOOTABLE VOLUMES   D.1  BUILDING THE PRIMARY BOOTABLE VOLUMES

   This procedure assumes:

         o  that your system has a bootable front-end file system mounted
            on the front-end's hard disk drive.

         o  that the system has been shut down, as this process  must  be
            done in a standalone environment.

         o  that you have installed your front-end files using the RSXINS
            procedure described in chapter 8.

         o  that you have a set of three DECtapes  or  floppies  in  good
            condition to hold the front-end files.

   The example below illustrates the  procedure  for  both  DECtapes  and
   floppies.   The  left-hand  column displays the DECtape procedure; the
   right-hand displays the floppy procedure.

     1.  Mount the disk pack containing a bootable RSX-20F system in  the
         front-end RP06.

     2.  Mount a pair of DECtapes or floppies on drives 0 and  1.   These


                                    D-1
                     CREATING BOOTABLE FRONT-END MEDIA                     CREATING BOOTABLE FRONT-END MEDIA


         will become the A and B volumes of the set you are creating.

     3.  If you are writing DECtapes, ensure that both DECtape drives are
         write enabled.

     4.  Set the PDP-11 console switches to 000203.

     5.  Press the SW/REG and ENABLE switches at the same time.

     6.  Initialize the media on drive 0:

         For DECtapes:                        For floppies:

         ________                             ________         <CTRL/\>                             <CTRL/\>
             ___ ________                         ___ ________         PAR>MCR INI<RET>                     PAR>MCR INI<RET>
             __________________                   _________         INI>DT0:/INDX=MID<RET>               INI>DX0:<RET>

   The INI program will now initialize the  volume.   This  process  will
   take approximately 5 minutes for a DECtape or 30 seconds for a floppy.
   The INI program will not reprompt when it is complete.

     7.  Repeat step 6 for drive 1, substituting a 1 for  the  0  in  the
         command line for INI.

     8.  Now tell RSX-20F to mount the media:

         For DECtapes:                        For floppies:

         ________                             ________         <CTRL/\>                             <CTRL/\>
             ___ ________                         ___ ________         PAR>MCR MOU<RET>                     PAR>MCR MOU<RET>
             _________                            _________         MOU>DT0:<RET>                        MOU>DX0:<RET>
         MOU -- MOUNT COMPLETE                MOU -- MOUNT COMPLETE
             _________                            _________         MOU>DT1:<RET>                        MOU>DX1:<RET>
         MOU -- MOUNT COMPLETE                MOU -- MOUNT COMPLETE
             ________                             ________         MOU><CTRL/Z>                         MOU><CTRL/Z>

     9.  Create the [5,5] UFD on the volume on  unit  0,  using  the  UFD
         utility:

         For DECtapes:                        For floppies:

         ________                             ________         <CTRL/\>                             <CTRL/\>
             ___ ________                         ___ ________         PAR>MCR UFD<RET>                     PAR>MCR UFD<RET>
             ______________                       ______________         UFD>DT0:[5,5]<RET>                   UFD>DX0:[5,5]<RET>

   UFD, like INI, does  not  reprompt  when  it  is  finished.   The  UFD
   creation  process  takes  about  3  minutes  on a DECtape and about 15
   seconds on a floppy.

     10. Repeat step 9 for the volume on drive 1.

   The remaining commands are common to both DECtape and floppy systems.


                                    D-2
                     CREATING BOOTABLE FRONT-END MEDIA                     CREATING BOOTABLE FRONT-END MEDIA


     11. Invoke the PIP utility to copy the files to both volumes:

         ________         <CTRL/\>
             ___ ________         PAR>MCR PIP<RET>
             ____________         PIP>@BLDFE1<RET>

   BLDFE1 is a command file that tells PIP which files to put on each  of
   the  two  volumes.   It instructs PIP to copy the files to each volume
   and then to do a directory of the newly-created  files.   The  process
   will  take  about  40  minutes  for  DECtapes and about 10 minutes for
   floppies.

     12. Exit from PIP and boot the unrun image of RSX-20F from the  file
         RSX20F.SYS.   This  image  will  use the newly created front-end
         volumes as the system device SY:.

             ________         PIP><CTRL/Z>
         ________         <CTRL/\>
             ___ ________         PAR>MCR BOO<RET>
             ___________________         BOO>DB0:RSX20F.SYS<RET>

     13. Wait a few seconds and then type control-backslash.   This  will
         cause  the  newly-booted  RSX-20F  to  search  for the PARSER on
         DECtape or floppy 0.

   Please note that all commands will take somewhat longer to perform, as
   the files must now be read in from DECtape or floppy.

         ________         <CTRL/\>
         INS -- SY MOUNTED, TSK=PARSER

         PAR -- [PARSER] ESE - EBOX STOPPED - EXAMINE
         PAR>

     14. If you are building a  floppy-based  system,  please  skip  this
         step.   The DECtape version of RSX-20F does not mount DECtape 1,
         so you must do it manually:

             ___ ________         PAR>MCR MOU<RET>
             _________         MOU>DT1:<RET>
         MOU -- MOUNT COMPLETE
             ________         MOU><CTRL/Z>

     15. Next, set some PARSER parameters and save the full RSX-20F image
         to  the front-end media.  The last command, which directs SAV to
         save the system core  image,  will  take  about  10  minutes  to
         execute.   Once  the save is completed, the newly saved software
         will be reloaded automatically.

         ________         <CTRL/\>
             ___ _______ ________________         PAR>SET CONSOLE MAINTENANCE<RET>
          CONSOLE MODE: MAINTENANCE


                                    D-3
                     CREATING BOOTABLE FRONT-END MEDIA                     CREATING BOOTABLE FRONT-END MEDIA


             ___ ___________________         PAR>SET FAULT-CONTINUE<RET>
         FAULT-CONTINUATION: ON
             ___ _________         PAR>SET DATE<RET>
               ______________         DATE: 16-MAR-88<RET>
               __________         TIME: 16:11<RET>
          CURRENT SYSTEM DATE:
          WEDNESDAY, 16-MARCH-88 16:11
          VALIDITY FLAG IS:ON
             ___ ________         PAR>MCR SAV<RET>
             ____________         SAV>SY0:/WB<RET>
         [Dx0: dismounted]
         [Dx1: dismounted]


         RSX-20F   Vx##-##   16-MAR-88

         [SY0: redirected to Dx0:]
         [Dx0: mounted]
         [Dx1: mounted]
         ________         <CTRL/\>

         PAR -- [PARSER] ESE - EBOX STOPPED - EXAMINE
         PAR>

     16. Lower and raise the HALT switch on the PDP-11 console,  set  the
         PDP-11  console  switches  to  000203,  and press the SW/REG and
         ENABLE switches at the same time.

   You may now remove the DECtapes or floppies from the  drives.   Please
   be  sure to place labels on them identifying the volumes -- the one on
   drive 0 should be labelled "A"; the one on drive 1, "B".

   You now have a minimal  bootable  RSX-20F  system  on  the  first  two
   DECtapes  or  floppies.   If  you wish, you may build the third volume
   now, or you may reboot the KL system and build the third volume  after
   timesharing has been restarted.



   D.2  BUILDING THE THIRD VOLUME   D.2  BUILDING THE THIRD VOLUME

   To have a complete copy of RSX-20F on console media, you must create a
   third  volume  of  front-end  media.  This volume will hold additional
   files that will not fit on the first two of the set.

   The steps involved can be done immediately after Part 1 is  completed,
   or  they  may  be done later.  It is not necessary to shut down the KL
   before starting this procedure.

     1.  Mount the floppy or DECtape that is  to  receive  the  files  on
         drive 0.



                                    D-4
                     CREATING BOOTABLE FRONT-END MEDIA                     CREATING BOOTABLE FRONT-END MEDIA


     2.  Initialize the media on drive 0:

         For DECtapes:                        For floppies:

         ________                             ________         <CTRL/\>                             <CTRL/\>
             ___ ________                         ___ ________         PAR>MCR INI<RET>                     PAR>MCR INI<RET> 
             __________________                   _________         INI>DT0:/INDX=MID<RET>               INI>DX0:<RET>

   The INI program will now initialize the  volume.   This  process  will
   take approximately 5 minutes for a DECtape or 30 seconds for a floppy.
   The INI program will not reprompt when it is complete.

     3.  Now tell RSX-20F to mount the device, making  it  available  for
         use:

         For DECtapes:                        For floppies:

         ________                             ________         <CTRL/\>                             <CTRL/\>
             ___ ________                         ___ ________         PAR>MCR MOU<RET>                     PAR>MCR MOU<RET>
             _________                            _________         MOU>DT0:<RET>                        MOU>DX0:<RET>
         MOU -- MOUNT COMPLETE                MOU -- MOUNT COMPLETE
             ________                             ________         MOU><CTRL/Z>                         MOU><CTRL/Z>

     4.  Create the [5,5] UFD on the volume, using the UFD utility:

         For DECtapes:                        For floppies:

         ________                             ________         <CTRL/\>                             <CTRL/\>
             ___ ________                         ___ ________         PAR>MCR UFD<RET>                     PAR>MCR UFD<RET>
             ______________                       ______________         UFD>DT0:[5,5]<RET>                   UFD>DX0:[5,5]<RET>

   UFD, like INI, does  not  reprompt  when  it  is  finished.   The  UFD
   creation  process  takes  about 2 minutes on a DECtape and about 10-15
   seconds on a floppy.

     5.  Now invoke PIP, and tell it to copy the files.  The commands  in
         this example are common to both DECtape and floppy systems.

         ________         <CTRL/\>
             ___ ________         PAR>MCR PIP<RET>
             ____________         PIP>@BLDFE2<RET>

   BLDFE2, like the BLDFE1 file used in Part 1,  tells  PIP  which  files
   belong on this volume.  It will also do a directory of the volume when
   it is finished copying those files.  The process will  take  about  20
   minutes for DECtapes and 5 minutes for floppies.

     6.  Once the file copy is complete, exit from PIP and  dismount  the
         volume:

         For DECtapes:                        For floppies:



                                    D-5
                     CREATING BOOTABLE FRONT-END MEDIA                     CREATING BOOTABLE FRONT-END MEDIA


             ________                             ________         PIP><CTRL/Z>                         PIP><CTRL/Z>
         ________                             ________         <CTRL/\>                             <CTRL/\>
             ___ ________                         ___ ________         PAR>MCR DMO<RET>                     PAR>MCR DMO<RET>
             _________                            _________         DMO>DT0:<RET>                        DMO>DX0:<RET>
         DMO -- DISMOUNT COMPLETE             DMO -- DISMOUNT COMPLETE
             ________                             ________         DMO><CTRL/Z>                         DMO><CTRL/Z>

     7.  Remove the DECtape or floppy from the drive.  Label it as volume
         "C" of the set.

   The installation process is complete.











































                                    D-6













                                  GLOSSARY                                  GLOSSARY



   This appendix lists and explains the terms  and  conventions  used  in
   this manual.


   AC

        An accumulator.


   Accounting Files

        The files that are used to control access  and  use  of  computer
        resources.   ACTDAE.SYS  and  QUOTA.SYS are the accounting files.
        See Chapter 9 for more information about these files.


   AUTCON

        The monitor module  to  automatically  configure  tape  and  disk
        drives.   AUTCON  is part of the monitor, that detects changes in
        status of I/O channels.  It is also invoked at system startup  to
        build the appropriate data bases for mass-bus and CI bus devices.


   BAF block

        The BAT block that is stored in memory.


   BAT block

        The data table, stored on disk, containing information about  bad
        areas on disk.


   CRASH.EXE

        The file automatically written by BOOT  when  the  system  fails.


                                  Gloss-1
                                  GLOSSARY                                  GLOSSARY


        CRASH.EXE can be used to reload a suspended monitor.


   CTY:

        The console terminal for the  front-end  and  CPU.   The  CTY  is
        usually a hard-copy terminal, so that important information about
        the system that is printed can be easily perused when the  system
        is not running.


   CUSP

        A Commonly Used  System  Program  that  works  closely  with  the
        monitor  to  perform  system functions.  For example, LOGIN, PIP,
        and BACKUP are CUSPs.


   DAY-MON-YEAR

        The format of the system date you supply to the ONCE-only dialog.


   Ersatz Device Names

        The monitor associates certain device names with  PPNs.   Such  a
        device  name  is  called  an  "ersatz device." The list of ersatz
        device names can be expanded  with  Question  49  of  the  HDWGEN
        portion of MONGEN.


   File Structure

        A file structure is one or more disk packs, mounted and spinning,
        that  have  been  defined to the monitor as a single entity to be
        referenced  and  accessed  by  the  file  structure  name.   File
        structure information is entered into the disk HOME blocks by the
        ONCE program.


   HH:MM:SS

        The time you input for the system time in the ONCE-only dialog.


   HIGH-ADDR

        The high-bound physical address in memory that is  referenced  in
        the ONCE dialog.


   HOME block


                                  Gloss-2
                                  GLOSSARY                                  GLOSSARY


        The data block that is stored on disk which contains  information
        about  the  unit's file structure, access information, and amount
        of swapping space.


   Initial Job Search List

        The job's initial search list  (established  by  LOGIN  from  the
        information in the accounting files.)


   Job Search List

        Those file structures that constitute DSK for the job.


   LOW-ADDR

        The lower-bound address of a physical address reference specified
        in the ONCE dialog.


   MFD

        The Master File Directory of all the User File  Directories.   An
        MFD is kept for each file structure.


   ONCE

        The monitor module that contains the ONCE-only  mandatory  system
        startup dialog and I/O device initialization.  In debugging mode,
        ONCE preserves the monitor's symbol table.  If the  data  is  not
        available, ONCE asks why the system is being reloaded, and allows
        any of several startup options to change disk  parameters  and/or
        start up the system.


   ONCMOD

        The monitor  module  containing  the  optional  ONCE-only  system
        startup  dialog  for  disk  initialization.   Structure  and unit
        parameters are changed using ONCMOD.  TWICE  runs  ONCMOD  during
        timesharing.


   OPR device

        A  designation  made  for  the  benefit  of  the  monitor,  which
        indicates  the terminal from which the operator's controlling job
        is running.  Monitor messages for the operator  are  directed  to
        the OPR device.


                                  Gloss-3
                                  GLOSSARY                                  GLOSSARY


   OPR program

        The operator-interface program to the various components  of  the
        GALAXY batch and spooling system.


   PPN

        A project-programmer number.  [PPN] in square brackets represents
        the User File Directory of the user with that PPN.


   REFSTR

        The monitor module that is called by ONCE and  TWICE  to  refresh
        structures.


   SAB block

        The SAT block that is stored in memory.


   SAT block

        The  Storage  Allocation  Table,  stored  on  each   disk   unit,
        containing  information  about  the status of the clusters on the
        disk and their use bits, which tell whether clusters on the  disk
        are "in use," storing data, or "free" for storage of data.


   STR-NAME

        The name of a defined file structure, which you  provide  to  the
        ONCE dialog.


   SYSINI

        The monitor module responsible for system initialization.  SYSINI
        runs  only  in  the  policy,  or  boot, CPU.  It invokes the ONCE
        dialog, initializes device data blocks, maps memory, and sets  up
        monitor  service  routines,  such  as  the RSX-20F interface.  In
        time, it causes CPU startup.


   System Dump List

        The list of file structures that will be searched  for  space  to
        store CRASH.EXE when the system fails.




                                  Gloss-4
                                  GLOSSARY                                  GLOSSARY


   System Search List

        Those files structures that are searched when some ersatz  device
        names, such as SYS:  or DEC:, are used.


   UFD

        The User File Directory that lists the files of each  user  in  a
        file structure.


   UNIT-NAME

        The physical unit name of a disk specified in the ONCE dialog.







































                                  Gloss-5
                                        
























































                                  Gloss-6
                                        


                                   INDEX



               -A-                                 -E-               -A-                                 -E-
    
   Account string definition, 11-11    Enabling account verification,
   Account validation                      9-7
     enabling, 9-7                     Ersatz device names, 5-5
     setting up, 11-10
                                                   -F-   Assembling                                      -F-
     monitor sources, B-1
     the monitor, 9-16                 FAILUR.LOG file, 11-12
                                       Feature-test
               -B-               -B-                       configuration file, 9-1
                                         switches, 9-14
   Beware files, 5-7, 7-4              FEFILE, 5-2
   Boot file specification             FGEN, 9-14
     for KL, 3-4                       File structures
     for KS, 3-5                         defining, A-15
   Bootable tape, 9-19                   modifying, A-11
   Booting                               refreshing, A-23
     from DECtape, 3-1                 File system
     from floppies, 3-1                  front-end, 6-1
     KL front-end, 3-3                   KS microprocessor, 6-7
                                         TOPS-10, 5-5
               -C-               -C-                     FRCLIN mechanism, 12-2
                                       Front-end
   Changing                              file system, 6-1
     disk parameters, A-13               installation material, 2-3
   Configuring
                                                   -G-     the monitor, 9-1                              -G-
   CPU serial number, 9-6
   CREDIR program, 5-5                 GALAXY spoolers, 10-2
                                       GALAXY system
                                         assembling, 10-12
               -D-               -D-                       components, 10-1
                                         starting, 10-14
   Decimal symbols, B-2, B-5, B-7        stopping, 10-13
   DEFINE startup option, 4-3            tailoring, 10-2
   Defining                            GALGEN, 10-3
     disk units, A-13                  GO startup option, A-22
     file structures, A-15
                                                   -I-     structure owner, A-17                         -I-
     swapping lists, A-11
     system dump list, A-12            INITIA monitor command, 12-11
     system search list, A-12          INITIA program
   DESTROY Startup Option, A-20          disabling, A-22
   Device names, 5-5                     system startup, 12-1
   Disk parameters                     Installation
     changing, A-13                      materials, 2-1
   Disk units, A-13                      tapes, 2-2


                                  Index-1
                                        


               -K-               -K-                     REFRESH startup option, A-23
                                       Refreshing file structures, A-23
   KS microprocessor file system,      Reloading KS systems, 6-7, 8-9
       6-7                             Restoring
                                         FEFILE, 5-2
               -L-               -L-
                                                   -S-                                                   -S-
   Loading
     the monitor, 9-17                 Saving the monitor, 9-19
     unbundled software, 9-17          SCDMAP.SYS file, C-6
   Login failures, 11-12               SCDSET program, C-1
                                       Setting date and time, 4-2
               -M-               -M-                     SIXBIT symbols, B-5, B-8
                                       Specifying monitor configuration,
   Minimum hardware configuration,         9-1
       2-3                             Standard directories, 5-5
   Modifying file structures, A-11     Starting the monitor, 9-18
   MONGEN                              Startup option
     program, 9-1                        DEFINE, 4-3
     questions, 9-4                      GO, A-22
   Monitor configuration, 9-1            REFRESH, A-23
   Monitor-build files, 9-1            Structure owner, A-17
   Multi-CPU system front-ends, 6-1    Swapping list, A-11
                                       SYSCNF configuration file, 9-1
               -O-               -O-                     SYSGEN, 9-6
                                       SYSJOB.INI
   Octal symbols, B-4, B-6, B-7          commands, 12-3
   ONCE dialog, A-1                      creating, 12-3
   ONCE program, 4-1                     example, 12-3
     startup options, A-7                file, 12-1
   OPR.ATO file, 12-10                 System dump list, A-12
   OPSER auto file, 12-10              System name, 9-6
                                       System search list, A-12
               -P-               -P-
                                                   -T-                                                   -T-
   Powering up the KL10, 2-5
   Powering up the KS10, 2-5           Terminal lines
   Printing Beware files, 5-7, 7-4       number, 12-7
   PROJCT.ACT file, 11-11                option, 12-8
   PROJCT.EXE file, 11-12              Terminal names, 12-7
                                       TOPS-10 file system, 5-5
               -R-               -R-                     TTY.INI
                                         creating, 12-5
   REACT program                         file, 12-2, 12-5
     getting help, 11-2
                                                   -U-     privileges required to run,                   -U-
         11-1
     profile attributes, 11-4          USAGE accounting, 11-10
     user profile, 11-4                User runtime, 9-6





                                  Index-2
