


OPSER.DOC -- Changes from V5D(116) to V5E(131)
June 1982






























COPYRIGHT (c) DIGITAL EQUIPMENT CORPORATION 1975,1982,1986.
ALL RIGHTS RESERVED.


THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND  COPIED
ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH  LICENSE AND WITH THE
INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR  ANY  OTHER
COPIES  THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF  THE  SOFTWARE  IS  HEREBY
TRANSFERRED.

THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
CORPORATION.

DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR  RELIABILITY  OF  ITS
SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.
OPS5E.DOC                                                       Page 2


OPSER.DOC -- Changes from V5D(116) to V5E(131)
June 1982



1.0  SUMMARY

OPSER version 5E(131) is a maintenance release that  incorporates  the
changes  produced  by SPR's.  A list of the changes and the associated
SPR number is included in section 5.

OPSER version 5E  is  supported  and  tested  under  7.01A  and  later
monitors.

OPSER is documented in the TOPS-10 Operating System  Commands  Manual,
the TOPS-10 Operator's Guide and the DECsystem-10 Utilities Manual.



2.0  EXTERNAL CHANGES

The following visible changes have been made:

Control E (^E) will be converted to an escape before sending it to the
subjob.

The KSYS comand will accept a quoted string an perform a SEND ALL with
the message (:KSYS +5 "a message").

At KSYS time, all levels of subjobs will be killed.

When OPSER is run via INITIA to automatically run an  auto  file,  the
following  steps  are  used  to determine the name of the auto file to
process.

     1.  If run on the "OPR" line (i.e.  MONGEN answered, usually  the
         "CTY"), use "SYS:OPR.ATO"

     2.  If  any   other   local   (i.e.    non-network)   line,   use
         "SYS:TTYnnn.ATO",  where  "nnn"  is  the line number, leading
         zeros supressed (e.g.  "SYS:TTY4.ATO")

     3.  If the  CTY  on  a  remote  station  (usually  line  0),  use
         "SYS:OPRn.ATo",  where  "n" is the node number, leading zeros
         surpressed (e.g.  "SYS:OPR31.ATO")

     4.  If any other network line, use "SYS:nnnlll.ATO", where  "nnn"
         is  the  node  number  and  "lll" is the line number, leading
         zeros supplied (e.g.  "SYS:031042.ATO" for line  42  on  node
         31.)




3.0  KNOWN BUGS AND DEFICIENCIES
OPS5E.DOC                                                       Page 3


There are limitations on the types (or characteristics) of  jobs  that
may  receive  commands  through  auto  files.   These  jobs  must  use
conventions similar to the ones  used  by  BATCON,  LPTSPL,  or  other
supported programs that are designed to run as subjobs of OPSER.  That
is, they must hibernate on TTY input or  go  quickly  into  TTY  input
wait.   DOC  files  that accompanied OPSERs 5A(67), 5B(73) and 5C(110)
explained the history and nature  of  the  timing  problems  that  can
arise,  but  it is sufficient to say that, although the probability is
small, it is possible that lines read from an auto file directed to  a
subjob  that either has set hibernate enable bit on TTY input, such as
MCS, or does not follow those conventions, could be lost.



4.0  INSTALLATION INSTRUCTIONS

See BUILD.CTL for compiling and loading instructions.  Copy the EXE to
SYS:, the help file to HLP:  and this file to DOC:.



5.0  INTERNAL CHANGES

116) RESERVED FOR DEC.
117) GETTAB FOR UPTIME IS WRONG FOR SMP, USES CPU0 UPTIME, GET  SYSTEM
     UPTIME INSTEAD
120) RESERVED FOR DEC.
121) REMOVE EDIT 107 DONT KILL SUBJOBS THAT FAILED ON  LOGIN.   REMOVE
     ASCII 175 176 FROM BREAKLIST SPR 10-29319 15-APR-81 MRB
122) CHANGE  STTYIN  TO  SKIP  OVER  TAB'S  ALSO  (SPR  10-30882,  MRB
     15-APR-81)
123) PROBLEM WITH THE :AUTO COMMAND USING THE TIME SWITCH.   NEEDED  A
     SPACE  AFTER WORD :AUTO AND BEFORE THE SLASH.  29-MAY-81 MRB SPR 
     10-31102 @COMDEC+1,TIMEAF+2.
124) UUOSYMIZED OPSER (ADDED STANDARD UUOSYM NAMES TO OPSER) 15-JUN-81
     MRB NO SPR
125) MAKE OPSER SOURCE PRETTY (NO  SPR)  RESEQUENCED  DISPATCH  TABLE.
     ADDED ---- TO SEGMENT ROUTINES
126) CHANGE TO LOOK AT CONFIG TABLE RATHER THAN PID OF QUASAR FOR  PTY
     LOGOUTS.  25-NOV-81, MRB, 10-31685
127) CORRECT EDIT 126.  AFTER LOOKING AT CONFIG STATUS WORD CHECK  THE
     PROPER BIT.  12-JAN-82, MRB, 10-     
130) ADD CODE FOR KSYS MESSAGE.  BECOME VERSION 17E.
131) ADD CODE TO CONVERT CONTROL E TO AN ESCAPE BEFORE SENDING  IT  TO
     THE SUBJOB.  



6.0  SUGGESTIONS

None.



[End of OPS5E.DOC]
OPS5E.DOC                                                       Page 4


[OPS5D.DOC is appended as an integral part of OPS5E.DOC]
OPS5D.DOC                                                       Page 5


OPSER.DOC -- CHANGES FROM V5C(105) TO V5D(116) NOV 1979






























COPYRIGHT (C) 1975,1976,1977,1979,1980 DIGITAL EQUIPMENT  CORPORATION,
MAYNARD, MASS.


THIS SOFTWARE IS FURNISHED UNDER A LICENSE FOR USE ONLY  ON  A  SINGLE
COMPUTER SYSTEM AND MAY BE COPIED ONLY WITH THE INCLUSION OF THE ABOVE
COPYRIGHT NOTICE.  THIS SOFTWARE, OR ANY OTHER COPIES THEREOF, MAY NOT
BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY OTHER PERSON EXCEPT FOR
USE ON SUCH SYSTEM AND TO ONE  WHO  AGREES  TO  THESE  LICENSE  TERMS.
TITLE  TO  AND  OWNERSHIP OF THE SOFTWARE SHALL AT ALL TIMES REMAIN IN
DEC.

THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE  WITHOUT  NOTICE
AND  SHOULD  NOT  BE  CONSTRUED  AS  A COMMITMENT BY DIGITAL EQUIPMENT
CORPORATION.

DEC ASSUMES NO RESPONSIBILITY  FOR  THE  USE  OR  RELIABILITY  OF  ITS
SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DEC.


1.0 SUMMARY

     OPSER VERSION 5D(116) IS A MAINTENANCE RELEASE THAT  INCORPORATES
     THE  CHANGES  PRODUCED  BY  SPR'S.  A LIST OF THE CHANGES AND THE
OPS5D.DOC                                                       Page 6


     ASSOCIATED SPR NUMBER IS INCLUDED IN SECITON 5.

     OPSER VERSION 5D IS SUPPORTED AND  TESTED  UNDER  7.00  AND  7.01
     MONITORS.

OPSER IS DOCUMENTED UNDER THE FOLLOWING NOTEBOOK:  1.  NOTEBOOK  12  -
          OPSER PROGRAMMING SPECIFICATION
          2.  NOTEBOOK 14 - OPERATOR'S GUIDE
          3.  NOTEBOOK 4 - MPB OPERATION PROCEDURES (IMPLICIT)



2.0 EXTERNAL CHANGES

THE FOLLOWING VISIBLE CHANGES HAVE BEEN MADE:

AT KSYS TIME, ALL LEVELS OF SUBJOBS WILL BE KILLED.

WHEN OPSER IS RUN VIA INITIA TO AUTOMATICALLY RUN AN  AUTO  FILE,  THE
FOLLOWING  STEPS  ARE  USED  TO DETERMINE THE NAME OF THE AUTO FILE TO
PROCESS.

     1.  IF RUN ON THE "OPR" LINE (I.E.  MONGEN ANSWERED, USUALLY  THE
         "CTY"), USE "SYS:OPR.ATO"

     2.  IF  ANY   OTHER   LOCAL   (I.E.    NON-NETWORK)   LINE,   USE
         "SYS:TTYnnn.ATO",  WHERE  "nnn"  IS  THE LINE NUMBER, LEADING
         ZEROS SUPRESSED (E.G.  "SYS:TTY4.ATO")

     3.  IF THE  CTY  ON  A  REMOTE  STATION  (USUALLY  LINE  0),  USE
         "SYS:OPRn.ATO",  WHERE  "n" IS THE NODE NUMBER, LEADING ZEROS
         SURPRESSED (E.G.  "SYS:OPR31.ATO")

     4.  IF ANY OTHER NETWORK LINE, USE "SYS:nnnlll.ATO", WHERE  "nnn"
         IS  THE  NODE  NUMBER  AND  "lll" IS THE LINE NUMBER, LEADING
         ZEROS SUPPLIED (E.G.  "SYS:031042.ATO" FOR LINE  42  ON  NODE
         31.)




3.0 KNOWN BUGS AND DEFICIENCIES

THERE ARE LIMITATIONS ON THE TYPES (OR CHARACTERISTICS) OF  JOBS  THAT
     MAY  RECEIVE  COMMANDS  THROUGH  AUTO FILES.  THESE JOBS MUST USE
     CONVENTIONS SIMILAR TO THE ONES USED BY BATCON, LPTSPL, OR  OTHER
     SUPPORTED  PROGRAMS THAT ARE DESIGNED TO RUN AS SUBJOBS OF OPSER.
     THAT IS, THEY MUST HIBERNATE ON TTY INPUT OR GO QUICKLY INTO  TTY
     INPUT WAIT.  DOC FILES THAT ACCOMPANIED OPSERS 5A(67), 5B(73) AND
     5C(110) EXPLAINED THE HISTORY AND NATURE OF THE  TIMING  PROBLEMS
     THAT  CAN  ARISE,  BUT IT IS SUFFICIENT TO SAY THAT, ALTHOUGH THE
     PROBABILITY IS SMALL, IT IS POSSIBLE THAT LINES READ FROM AN AUTO
     FILE  DIRECTED  TO  A SUBJOB THAT EITHER HAS SET HIBERNATE ENABLE
     BIT ON  TTY  INPUT,  SUCH  AS  MCS,  OR  DOES  NOT  FOLLOW  THOSE
     CONVENTIONS, COULD BE LOST.
OPS5D.DOC                                                       Page 7


4.0 INSTALLATION INSTRUCTIONS

SEE OPSER.CTL FOR THE INSTALLATION INSTRUCTIONS.


5.0 INTERNAL CHANGES


106  OPSER  WAS  A  LITTLE  SLOW  RECOVERING  FROM  CONTROL-C'S.   SPR
     10-25520

107  OPSER LEFT SUBJOBS RUNNING LOGIN WHEN LOGIN FAILED.  SPR 10-24809

110  WHEN :LOGIN FAILS WITH NO FREE SUBJOBS, THE CURRNT SUBJOB REMAINS
     SET  TO  THE  LAST  SUBJOB  USED  BEFORE  THE FAILED :LOGIN.  SPR
     10-24596

111  OVERFLOW  OCCURS  WHILE  CONVERTING  THE  SYSTEM   UP   TIME   TO
     MILLISECONDS  IF THE SYSTEM HAS BEEN UP FOR 160 CONSECUTIVE HOURS
     OR LONGER.  SPR 10-27243

112  IF AN .ATO FILE HAS SEQUENCE NUMBERS, THE SEQUENCE NUMBER WILL BE
     THROWN  AWAY  BUT  THE  BYTE  COUNT  IN THE BUFFER HEADER DOESN'T
     ADJUST CORRECTLY.  SPR 10-27401

113  AT KSYS TIME OPSER DOESN'T KILL ALL THE SUBJOBS.  SPR 10-26985

114  IMPLEMENT "nnnlll.ATO" FILE NAME AS  DESCRIBED  IN  SECTION  2.0.
     SPR 10-28302

115  AN ERROR IN EDIT 113 CAUSED BATCH JOBS TO BE KSYS'ED, CORRECT IT.

116  USE 7 SERIES GETTAB FOR SYSTEM UPTIME WHEN PROCESSING TIME OF DAY
     AUTO FILES.



6.0 SUGGESTIONS

NONE.
