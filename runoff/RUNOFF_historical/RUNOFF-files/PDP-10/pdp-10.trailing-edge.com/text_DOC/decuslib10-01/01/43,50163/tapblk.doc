	THIS IS THE DOCUMENTATION FILE FOR THE TAPBLK.MAC PROGRAM.

1)  AUTHOR:    ANDY COPANAS--DEC,MAYNARD

2)  DATE SUBMITTED:    JANUARY 25,1971

3)  PURPOSE:

	 THIS PROGRAM IS TO BE USED FOR BLOCKING FILES WRITTEN ON 
MAGTAPE INTO STANDARD SIZE RECORDS (128 WDS/RECORD IS STANDARD FOR DISK)
AND PUTTING THESE FILES ON THE DISK.  (THIS PROGRAM WILL ALSO WORK
FOR TAPES WRITTEN WITH STANDARD RECORD SIZES, BUT WHY WOULD ONE NEED
TO BLOCK THOSE ANYWAY?)

4)  PROGRAM OPERATION:

	THE PROGRAM IS DESIGNED TO ACCEPT ANY RECORD SIZE FROM THE TAPE.
IT HAS AN EXPANDABLE BUFFER FOR INPUT AND EXECUTES CORE UUO'S TO KEEP
ENLARGING ITSELF UNTIL IT CAN READ THE RECORDS.  IT HAS AUTOMATIC BACK-
SPACING TO POSITION ITSELF FOR RETRIES, BUT THERE ARE NO OTHER PHYSICAL
SPACING OPERATIONS.

	THIS PROGRAM READS THE TAPE IN IMAGE MODE, 36 BITS/BYTE,
AND TRANSFERS DATA TO DISK EXACTLY AS IT APPEARS IN THE BUFFER.
NO CHECKSUMMING IS DONE, AND NO LINE BREAK CHARACTERS (C.R.,LINE
FEED,TABS,ETC) ARE INSERTED. THIS IS LEFT TO THE USER.

	THE USER CAN SPECIFY THE PARITY,DENSITY,AND TYPE OF TAPE
THAT HE IS READING BY ANSWERING THE QUESTIONS AT THE START OF THE
PROGRAM. A CARRIAGE RETURN CAN BE USED TO INDICATE A NEGATIVE
RESPONSE, OR TO FORCE THE DEFAULT RESPONSE.  ONCE THE INITIAL CONDITIONS
ARE SET, THE VALUES CANNOT BE CHANGED WITHOUT RESTARTING THE PROGRAM.

	THE PROGRAM WILL ASSIGN FILE NAMES TO EACH FILE FROM THE
TAPE IN AN OCTAL SEQUENCE BEGINNING WITH "T00001".  THESE
FILENAMES WILL GO "T00001","T00002","T00003", ETC.  AS LONG AS
YOU RUN, THESE FILENAMES WILL BE GENERATED FOR EACH NEW FILE. 
TAPBLK ASSIGNS <157> PROTECTION TO ALL T0000N FILES TO PRE-
VENT ACCIDENTAL DELETION UPON LOGOUT.

	THE PROGRAM IS REENTRANT AND RESTARTS  FROM THE BEGINNING
IF YOU TYPE "REENTER" FROM THE TTY.  IF YOU EXIT FROM THE PROG-
RAM FOR ANY REASON, AND WISH TO RESTART AGAIN, YOU MUST RENAME
ALL PREVIOUS T0000N FILES OR THEY WILL BE WRITTEN OVER.  THE 
FILENAME COUNTER ALWAYS STARTS WITH "T00001" WHEN THE PROGRAM
IS RESTARTED.

	ERROR CHECKING IS PERFORMED AND APPROPRIATE MESSAGES, WITH
SUGGESTED RECOVERY TECHNIQUES, ARE TYPED OUT ON THE USER'S TTY.
ALL SEVERE ERROR SITUATIONS WILL STOP I/O TRANSFER AND RETURN
CONTROL TO THE USER.  HE MUST INITIATE ANY RECOVERY PROCEDURES.

	TAPBLK WILL DETECT LOGICAL END OF TAPE (2 END OF FILE
MARKS) AND SO INDICATE TO THE USER.  THEREFORE, THE LAST OUTPUT
FILE ON DISK SHOULD BE A FILE OF ZERO BLOCKS, SINCE AN ENTER
WAS DONE FOLLOWED BY A CLOSE FORCED BY THE 2ND EOF MARK AND NO
DATA WAS WRITTEN OUT.

	MULTIPLE REEL FILES CAN ALSO BE BLOCKED.  UPON REACHING
THE END OF TAPE MARK, USER IS ASKED IF HE WISHES TO CONTINUE DATA
TRANSFER, OR CLOSE THE OUTPUT FILE AND EXIT.  IF HE ELECTS TO
CONTINUE, A NEW TAPE CAN BE MOUNTED.  THEN USER TYPES A CARRIAGE
RETURN AND HIS DATA NOW GOES INTO THE LAST FILE PREVIOUSLY
OPENED FOR OUTPUT.

5)  OPERATING INSTRUCTIONS:

	ASSIGN THE MAGTAPE AS LOGICAL NAME "INN", AND THE DISK
AS LOGICAL NAME "OUT". NO OTHER PROGRAMS OR SUBROUTINES ARE NEEDED.

6)  SAMPLE OPERATION:

.LOG
JOB 11 DEC DATA CENTER SYS#169 TTY11
#13,602
PASSWORD:
1412	25-JAN-71

.AS MTA1 INN
MTA1 ASSIGNED

.AS DSK OUT
DSK ASSIGNED

.EXECUTE TAPBLK
MACRO: TAPBLK
LOADING

LOADER 2K CORE
EXECUTION

TYPE "E" FOR EVEN PARITY ON INPUT TAPE.
(DEFAULT VALUE IS ODD)
E
TYPE 2,5,OR 8 FOR 200,556,OR 800 BPI INPUT.
(DEFAULT VALE IS THE SYSTEM STANDARD)
8
TYPE 1 FOR 9 TRACK INDUSTRY STANDARD MODE.
	(I.E. IBM TAPES)
TYPE 2 FOR DEC 7 OR 9 TRACK (NON-STANDARD), OR
TYPE 3 TO CLOSE FILES AND EXIT
(DEFAULT VALUE IS 1)
2

EOF ON INPUT TAPE
TYPE 1 FOR 9 TRACK INDUSTRY STANDARD MODE.
(ETC.)
2
EOF ON INPUT TAPE
TYPE 1 FOR 9 TRACK (ETC)
2
REACHED LOGICAL END OF TAPE (2 EOF'S TOGETHER)
TYPE 1 FOR 9 TRACK (ETC)
3
EXIT

.DIR


DIRECTORY    13,602    15:21    25-JAN-71

DSKB:
TAPBLK  MAC        07    <157>   19-JAN-71
TAPBLK  BAK        07    <157>   19-JAN-71
TAPBLK  REL        05    <057>   25-JAN-71
TAPBLK  DOC        07    <157>   25-JAN-71
T00001             76    <157>   25-JAN-71
T00002             41    <157>   25-JAN-71
T00003             00    <157>   25-JAN-71

TOTAL BLOCKS      143
DSKC:

.KJOB
CONFIRM: S
JOB 11, USER [13,602]  LOGGED OFF TTY11      1545  25-JAN-71
SAVED ALL 7 FILES (160. DISK BLOCKS)
RUNTIME 1 MIN, 10.57 SEC


.



